(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();var Ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rf(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),s}var du={exports:{}},vi={},hu={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tr=Symbol.for("react.element"),af=Symbol.for("react.portal"),lf=Symbol.for("react.fragment"),of=Symbol.for("react.strict_mode"),cf=Symbol.for("react.profiler"),uf=Symbol.for("react.provider"),df=Symbol.for("react.context"),hf=Symbol.for("react.forward_ref"),ff=Symbol.for("react.suspense"),mf=Symbol.for("react.memo"),pf=Symbol.for("react.lazy"),$o=Symbol.iterator;function gf(t){return t===null||typeof t!="object"?null:(t=$o&&t[$o]||t["@@iterator"],typeof t=="function"?t:null)}var fu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mu=Object.assign,pu={};function nn(t,e,s){this.props=t,this.context=e,this.refs=pu,this.updater=s||fu}nn.prototype.isReactComponent={};nn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};nn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gu(){}gu.prototype=nn.prototype;function Cl(t,e,s){this.props=t,this.context=e,this.refs=pu,this.updater=s||fu}var El=Cl.prototype=new gu;El.constructor=Cl;mu(El,nn.prototype);El.isPureReactComponent=!0;var Fo=Array.isArray,xu=Object.prototype.hasOwnProperty,Tl={current:null},vu={key:!0,ref:!0,__self:!0,__source:!0};function yu(t,e,s){var n,i={},a=null,l=null;if(e!=null)for(n in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)xu.call(e,n)&&!vu.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=s;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:tr,type:t,key:a,ref:l,props:i,_owner:Tl.current}}function xf(t,e){return{$$typeof:tr,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Pl(t){return typeof t=="object"&&t!==null&&t.$$typeof===tr}function vf(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var Uo=/\/+/g;function Ui(t,e){return typeof t=="object"&&t!==null&&t.key!=null?vf(""+t.key):e.toString(36)}function Ir(t,e,s,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case tr:case af:l=!0}}if(l)return l=t,i=i(l),t=n===""?"."+Ui(l,0):n,Fo(i)?(s="",t!=null&&(s=t.replace(Uo,"$&/")+"/"),Ir(i,e,s,"",function(u){return u})):i!=null&&(Pl(i)&&(i=xf(i,s+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Uo,"$&/")+"/")+t)),e.push(i)),1;if(l=0,n=n===""?".":n+":",Fo(t))for(var o=0;o<t.length;o++){a=t[o];var c=n+Ui(a,o);l+=Ir(a,e,s,c,i)}else if(c=gf(t),typeof c=="function")for(t=c.call(t),o=0;!(a=t.next()).done;)a=a.value,c=n+Ui(a,o++),l+=Ir(a,e,s,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function dr(t,e,s){if(t==null)return t;var n=[],i=0;return Ir(t,n,"","",function(a){return e.call(s,a,i++)}),n}function yf(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ce={current:null},Or={transition:null},bf={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:Or,ReactCurrentOwner:Tl};function bu(){throw Error("act(...) is not supported in production builds of React.")}K.Children={map:dr,forEach:function(t,e,s){dr(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return dr(t,function(){e++}),e},toArray:function(t){return dr(t,function(e){return e})||[]},only:function(t){if(!Pl(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};K.Component=nn;K.Fragment=lf;K.Profiler=cf;K.PureComponent=Cl;K.StrictMode=of;K.Suspense=ff;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bf;K.act=bu;K.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=mu({},t.props),i=t.key,a=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=Tl.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)xu.call(e,c)&&!vu.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:tr,type:t.type,key:i,ref:a,props:n,_owner:l}};K.createContext=function(t){return t={$$typeof:df,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uf,_context:t},t.Consumer=t};K.createElement=yu;K.createFactory=function(t){var e=yu.bind(null,t);return e.type=t,e};K.createRef=function(){return{current:null}};K.forwardRef=function(t){return{$$typeof:hf,render:t}};K.isValidElement=Pl;K.lazy=function(t){return{$$typeof:pf,_payload:{_status:-1,_result:t},_init:yf}};K.memo=function(t,e){return{$$typeof:mf,type:t,compare:e===void 0?null:e}};K.startTransition=function(t){var e=Or.transition;Or.transition={};try{t()}finally{Or.transition=e}};K.unstable_act=bu;K.useCallback=function(t,e){return Ce.current.useCallback(t,e)};K.useContext=function(t){return Ce.current.useContext(t)};K.useDebugValue=function(){};K.useDeferredValue=function(t){return Ce.current.useDeferredValue(t)};K.useEffect=function(t,e){return Ce.current.useEffect(t,e)};K.useId=function(){return Ce.current.useId()};K.useImperativeHandle=function(t,e,s){return Ce.current.useImperativeHandle(t,e,s)};K.useInsertionEffect=function(t,e){return Ce.current.useInsertionEffect(t,e)};K.useLayoutEffect=function(t,e){return Ce.current.useLayoutEffect(t,e)};K.useMemo=function(t,e){return Ce.current.useMemo(t,e)};K.useReducer=function(t,e,s){return Ce.current.useReducer(t,e,s)};K.useRef=function(t){return Ce.current.useRef(t)};K.useState=function(t){return Ce.current.useState(t)};K.useSyncExternalStore=function(t,e,s){return Ce.current.useSyncExternalStore(t,e,s)};K.useTransition=function(){return Ce.current.useTransition()};K.version="18.3.1";hu.exports=K;var S=hu.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wf=S,jf=Symbol.for("react.element"),_f=Symbol.for("react.fragment"),kf=Object.prototype.hasOwnProperty,Nf=wf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Sf={key:!0,ref:!0,__self:!0,__source:!0};function wu(t,e,s){var n,i={},a=null,l=null;s!==void 0&&(a=""+s),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(n in e)kf.call(e,n)&&!Sf.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:jf,type:t,key:a,ref:l,props:i,_owner:Nf.current}}vi.Fragment=_f;vi.jsx=wu;vi.jsxs=wu;du.exports=vi;var r=du.exports,ju={exports:{}},Be={},_u={exports:{}},ku={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,z){var B=L.length;L.push(z);e:for(;0<B;){var J=B-1>>>1,le=L[J];if(0<i(le,z))L[J]=z,L[B]=le,B=J;else break e}}function s(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var z=L[0],B=L.pop();if(B!==z){L[0]=B;e:for(var J=0,le=L.length,ws=le>>>1;J<ws;){var Xe=2*(J+1)-1,cr=L[Xe],ot=Xe+1,R=L[ot];if(0>i(cr,B))ot<le&&0>i(R,cr)?(L[J]=R,L[ot]=B,J=ot):(L[J]=cr,L[Xe]=B,J=Xe);else if(ot<le&&0>i(R,B))L[J]=R,L[ot]=B,J=ot;else break e}}return z}function i(L,z){var B=L.sortIndex-z.sortIndex;return B!==0?B:L.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],u=[],d=1,f=null,p=3,b=!1,g=!1,v=!1,N=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(L){for(var z=s(u);z!==null;){if(z.callback===null)n(u);else if(z.startTime<=L)n(u),z.sortIndex=z.expirationTime,e(c,z);else break;z=s(u)}}function j(L){if(v=!1,h(L),!g)if(s(c)!==null)g=!0,E(k);else{var z=s(u);z!==null&&$(j,z.startTime-L)}}function k(L,z){g=!1,v&&(v=!1,x(T),T=-1),b=!0;var B=p;try{for(h(z),f=s(c);f!==null&&(!(f.expirationTime>z)||L&&!O());){var J=f.callback;if(typeof J=="function"){f.callback=null,p=f.priorityLevel;var le=J(f.expirationTime<=z);z=t.unstable_now(),typeof le=="function"?f.callback=le:f===s(c)&&n(c),h(z)}else n(c);f=s(c)}if(f!==null)var ws=!0;else{var Xe=s(u);Xe!==null&&$(j,Xe.startTime-z),ws=!1}return ws}finally{f=null,p=B,b=!1}}var y=!1,C=null,T=-1,w=5,P=-1;function O(){return!(t.unstable_now()-P<w)}function D(){if(C!==null){var L=t.unstable_now();P=L;var z=!0;try{z=C(!0,L)}finally{z?F():(y=!1,C=null)}}else y=!1}var F;if(typeof m=="function")F=function(){m(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,_=I.port2;I.port1.onmessage=D,F=function(){_.postMessage(null)}}else F=function(){N(D,0)};function E(L){C=L,y||(y=!0,F())}function $(L,z){T=N(function(){L(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){g||b||(g=!0,E(k))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(L){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var B=p;p=z;try{return L()}finally{p=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,z){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var B=p;p=L;try{return z()}finally{p=B}},t.unstable_scheduleCallback=function(L,z,B){var J=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?J+B:J):B=J,L){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=B+le,L={id:d++,callback:z,priorityLevel:L,startTime:B,expirationTime:le,sortIndex:-1},B>J?(L.sortIndex=B,e(u,L),s(c)===null&&L===s(u)&&(v?(x(T),T=-1):v=!0,$(j,B-J))):(L.sortIndex=le,e(c,L),g||b||(g=!0,E(k))),L},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(L){var z=p;return function(){var B=p;p=z;try{return L.apply(this,arguments)}finally{p=B}}}})(ku);_u.exports=ku;var Cf=_u.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ef=S,ze=Cf;function A(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nu=new Set,An={};function xs(t,e){Ks(t,e),Ks(t+"Capture",e)}function Ks(t,e){for(An[t]=e,t=0;t<e.length;t++)Nu.add(e[t])}var kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,Tf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mo={},zo={};function Pf(t){return ja.call(zo,t)?!0:ja.call(Mo,t)?!1:Tf.test(t)?zo[t]=!0:(Mo[t]=!0,!1)}function Df(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function If(t,e,s,n){if(e===null||typeof e>"u"||Df(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ee(t,e,s,n,i,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ye[t]=new Ee(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ye[e]=new Ee(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ye[t]=new Ee(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ye[t]=new Ee(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ye[t]=new Ee(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ye[t]=new Ee(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ye[t]=new Ee(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ye[t]=new Ee(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ye[t]=new Ee(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dl=/[\-:]([a-z])/g;function Il(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dl,Il);ye[e]=new Ee(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dl,Il);ye[e]=new Ee(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dl,Il);ye[e]=new Ee(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ye[t]=new Ee(t,1,!1,t.toLowerCase(),null,!1,!1)});ye.xlinkHref=new Ee("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ye[t]=new Ee(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ol(t,e,s,n){var i=ye.hasOwnProperty(e)?ye[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(If(e,s,i,n)&&(s=null),n||i===null?Pf(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):i.mustUseProperty?t[i.propertyName]=s===null?i.type===3?!1:"":s:(e=i.attributeName,n=i.attributeNamespace,s===null?t.removeAttribute(e):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var Et=Ef.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hr=Symbol.for("react.element"),Ps=Symbol.for("react.portal"),Ds=Symbol.for("react.fragment"),Ll=Symbol.for("react.strict_mode"),_a=Symbol.for("react.profiler"),Su=Symbol.for("react.provider"),Cu=Symbol.for("react.context"),Al=Symbol.for("react.forward_ref"),ka=Symbol.for("react.suspense"),Na=Symbol.for("react.suspense_list"),Rl=Symbol.for("react.memo"),It=Symbol.for("react.lazy"),Eu=Symbol.for("react.offscreen"),Bo=Symbol.iterator;function cn(t){return t===null||typeof t!="object"?null:(t=Bo&&t[Bo]||t["@@iterator"],typeof t=="function"?t:null)}var ie=Object.assign,Mi;function vn(t){if(Mi===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);Mi=e&&e[1]||""}return`
`+Mi+t}var zi=!1;function Bi(t,e){if(!t||zi)return"";zi=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),l=i.length-1,o=a.length-1;1<=l&&0<=o&&i[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(i[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||i[l]!==a[o]){var c=`
`+i[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{zi=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?vn(t):""}function Of(t){switch(t.tag){case 5:return vn(t.type);case 16:return vn("Lazy");case 13:return vn("Suspense");case 19:return vn("SuspenseList");case 0:case 2:case 15:return t=Bi(t.type,!1),t;case 11:return t=Bi(t.type.render,!1),t;case 1:return t=Bi(t.type,!0),t;default:return""}}function Sa(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ds:return"Fragment";case Ps:return"Portal";case _a:return"Profiler";case Ll:return"StrictMode";case ka:return"Suspense";case Na:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Cu:return(t.displayName||"Context")+".Consumer";case Su:return(t._context.displayName||"Context")+".Provider";case Al:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rl:return e=t.displayName||null,e!==null?e:Sa(t.type)||"Memo";case It:e=t._payload,t=t._init;try{return Sa(t(e))}catch{}}return null}function Lf(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sa(e);case 8:return e===Ll?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tu(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Af(t){var e=Tu(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,a=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(l){n=""+l,a.call(this,l)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fr(t){t._valueTracker||(t._valueTracker=Af(t))}function Pu(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=Tu(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function Vr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ca(t,e){var s=e.checked;return ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function qo(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=Qt(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Du(t,e){e=e.checked,e!=null&&Ol(t,"checked",e,!1)}function Ea(t,e){Du(t,e);var s=Qt(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ta(t,e.type,s):e.hasOwnProperty("defaultValue")&&Ta(t,e.type,Qt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vo(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Ta(t,e,s){(e!=="number"||Vr(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var yn=Array.isArray;function Bs(t,e,s,n){if(t=t.options,e){e={};for(var i=0;i<s.length;i++)e["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=e.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&n&&(t[s].defaultSelected=!0)}else{for(s=""+Qt(s),e=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Pa(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(A(91));return ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wo(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(A(92));if(yn(s)){if(1<s.length)throw Error(A(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:Qt(s)}}function Iu(t,e){var s=Qt(e.value),n=Qt(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function Ho(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ou(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Da(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ou(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mr,Lu=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mr=mr||document.createElement("div"),mr.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rn(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var _n={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rf=["Webkit","ms","Moz","O"];Object.keys(_n).forEach(function(t){Rf.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_n[e]=_n[t]})});function Au(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||_n.hasOwnProperty(t)&&_n[t]?(""+e).trim():e+"px"}function Ru(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,i=Au(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,i):t[s]=i}}var $f=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ia(t,e){if(e){if($f[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(A(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(A(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(A(61))}if(e.style!=null&&typeof e.style!="object")throw Error(A(62))}}function Oa(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var La=null;function $l(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Aa=null,qs=null,Vs=null;function Qo(t){if(t=rr(t)){if(typeof Aa!="function")throw Error(A(280));var e=t.stateNode;e&&(e=_i(e),Aa(t.stateNode,t.type,e))}}function $u(t){qs?Vs?Vs.push(t):Vs=[t]:qs=t}function Fu(){if(qs){var t=qs,e=Vs;if(Vs=qs=null,Qo(t),e)for(t=0;t<e.length;t++)Qo(e[t])}}function Uu(t,e){return t(e)}function Mu(){}var qi=!1;function zu(t,e,s){if(qi)return t(e,s);qi=!0;try{return Uu(t,e,s)}finally{qi=!1,(qs!==null||Vs!==null)&&(Mu(),Fu())}}function $n(t,e){var s=t.stateNode;if(s===null)return null;var n=_i(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(A(231,e,typeof s));return s}var Ra=!1;if(kt)try{var un={};Object.defineProperty(un,"passive",{get:function(){Ra=!0}}),window.addEventListener("test",un,un),window.removeEventListener("test",un,un)}catch{Ra=!1}function Ff(t,e,s,n,i,a,l,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(s,u)}catch(d){this.onError(d)}}var kn=!1,Wr=null,Hr=!1,$a=null,Uf={onError:function(t){kn=!0,Wr=t}};function Mf(t,e,s,n,i,a,l,o,c){kn=!1,Wr=null,Ff.apply(Uf,arguments)}function zf(t,e,s,n,i,a,l,o,c){if(Mf.apply(this,arguments),kn){if(kn){var u=Wr;kn=!1,Wr=null}else throw Error(A(198));Hr||(Hr=!0,$a=u)}}function vs(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function Bu(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ko(t){if(vs(t)!==t)throw Error(A(188))}function Bf(t){var e=t.alternate;if(!e){if(e=vs(t),e===null)throw Error(A(188));return e!==t?null:t}for(var s=t,n=e;;){var i=s.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){s=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===s)return Ko(i),t;if(a===n)return Ko(i),e;a=a.sibling}throw Error(A(188))}if(s.return!==n.return)s=i,n=a;else{for(var l=!1,o=i.child;o;){if(o===s){l=!0,s=i,n=a;break}if(o===n){l=!0,n=i,s=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===s){l=!0,s=a,n=i;break}if(o===n){l=!0,n=a,s=i;break}o=o.sibling}if(!l)throw Error(A(189))}}if(s.alternate!==n)throw Error(A(190))}if(s.tag!==3)throw Error(A(188));return s.stateNode.current===s?t:e}function qu(t){return t=Bf(t),t!==null?Vu(t):null}function Vu(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Vu(t);if(e!==null)return e;t=t.sibling}return null}var Wu=ze.unstable_scheduleCallback,Go=ze.unstable_cancelCallback,qf=ze.unstable_shouldYield,Vf=ze.unstable_requestPaint,oe=ze.unstable_now,Wf=ze.unstable_getCurrentPriorityLevel,Fl=ze.unstable_ImmediatePriority,Hu=ze.unstable_UserBlockingPriority,Qr=ze.unstable_NormalPriority,Hf=ze.unstable_LowPriority,Qu=ze.unstable_IdlePriority,yi=null,ft=null;function Qf(t){if(ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(yi,t,void 0,(t.current.flags&128)===128)}catch{}}var it=Math.clz32?Math.clz32:Yf,Kf=Math.log,Gf=Math.LN2;function Yf(t){return t>>>=0,t===0?32:31-(Kf(t)/Gf|0)|0}var pr=64,gr=4194304;function bn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kr(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,l=s&268435455;if(l!==0){var o=l&~i;o!==0?n=bn(o):(a&=l,a!==0&&(n=bn(a)))}else l=s&~i,l!==0?n=bn(l):a!==0&&(n=bn(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-it(e),i=1<<s,n|=t[s],e&=~i;return n}function Jf(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xf(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-it(a),o=1<<l,c=i[l];c===-1?(!(o&s)||o&n)&&(i[l]=Jf(o,e)):c<=e&&(t.expiredLanes|=o),a&=~o}}function Fa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ku(){var t=pr;return pr<<=1,!(pr&4194240)&&(pr=64),t}function Vi(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function sr(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-it(e),t[e]=s}function Zf(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var i=31-it(s),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,s&=~a}}function Ul(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-it(s),i=1<<n;i&e|t[n]&e&&(t[n]|=e),s&=~i}}var Y=0;function Gu(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Yu,Ml,Ju,Xu,Zu,Ua=!1,xr=[],Ut=null,Mt=null,zt=null,Fn=new Map,Un=new Map,Lt=[],em="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yo(t,e){switch(t){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":zt=null;break;case"pointerover":case"pointerout":Fn.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Un.delete(e.pointerId)}}function dn(t,e,s,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=rr(e),e!==null&&Ml(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function tm(t,e,s,n,i){switch(e){case"focusin":return Ut=dn(Ut,t,e,s,n,i),!0;case"dragenter":return Mt=dn(Mt,t,e,s,n,i),!0;case"mouseover":return zt=dn(zt,t,e,s,n,i),!0;case"pointerover":var a=i.pointerId;return Fn.set(a,dn(Fn.get(a)||null,t,e,s,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Un.set(a,dn(Un.get(a)||null,t,e,s,n,i)),!0}return!1}function ed(t){var e=ls(t.target);if(e!==null){var s=vs(e);if(s!==null){if(e=s.tag,e===13){if(e=Bu(s),e!==null){t.blockedOn=e,Zu(t.priority,function(){Ju(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Ma(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);La=n,s.target.dispatchEvent(n),La=null}else return e=rr(s),e!==null&&Ml(e),t.blockedOn=s,!1;e.shift()}return!0}function Jo(t,e,s){Lr(t)&&s.delete(e)}function sm(){Ua=!1,Ut!==null&&Lr(Ut)&&(Ut=null),Mt!==null&&Lr(Mt)&&(Mt=null),zt!==null&&Lr(zt)&&(zt=null),Fn.forEach(Jo),Un.forEach(Jo)}function hn(t,e){t.blockedOn===e&&(t.blockedOn=null,Ua||(Ua=!0,ze.unstable_scheduleCallback(ze.unstable_NormalPriority,sm)))}function Mn(t){function e(i){return hn(i,t)}if(0<xr.length){hn(xr[0],t);for(var s=1;s<xr.length;s++){var n=xr[s];n.blockedOn===t&&(n.blockedOn=null)}}for(Ut!==null&&hn(Ut,t),Mt!==null&&hn(Mt,t),zt!==null&&hn(zt,t),Fn.forEach(e),Un.forEach(e),s=0;s<Lt.length;s++)n=Lt[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<Lt.length&&(s=Lt[0],s.blockedOn===null);)ed(s),s.blockedOn===null&&Lt.shift()}var Ws=Et.ReactCurrentBatchConfig,Gr=!0;function nm(t,e,s,n){var i=Y,a=Ws.transition;Ws.transition=null;try{Y=1,zl(t,e,s,n)}finally{Y=i,Ws.transition=a}}function rm(t,e,s,n){var i=Y,a=Ws.transition;Ws.transition=null;try{Y=4,zl(t,e,s,n)}finally{Y=i,Ws.transition=a}}function zl(t,e,s,n){if(Gr){var i=Ma(t,e,s,n);if(i===null)ea(t,e,n,Yr,s),Yo(t,n);else if(tm(i,t,e,s,n))n.stopPropagation();else if(Yo(t,n),e&4&&-1<em.indexOf(t)){for(;i!==null;){var a=rr(i);if(a!==null&&Yu(a),a=Ma(t,e,s,n),a===null&&ea(t,e,n,Yr,s),a===i)break;i=a}i!==null&&n.stopPropagation()}else ea(t,e,n,null,s)}}var Yr=null;function Ma(t,e,s,n){if(Yr=null,t=$l(n),t=ls(t),t!==null)if(e=vs(t),e===null)t=null;else if(s=e.tag,s===13){if(t=Bu(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yr=t,null}function td(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wf()){case Fl:return 1;case Hu:return 4;case Qr:case Hf:return 16;case Qu:return 536870912;default:return 16}default:return 16}}var $t=null,Bl=null,Ar=null;function sd(){if(Ar)return Ar;var t,e=Bl,s=e.length,n,i="value"in $t?$t.value:$t.textContent,a=i.length;for(t=0;t<s&&e[t]===i[t];t++);var l=s-t;for(n=1;n<=l&&e[s-n]===i[a-n];n++);return Ar=i.slice(t,1<n?1-n:void 0)}function Rr(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vr(){return!0}function Xo(){return!1}function qe(t){function e(s,n,i,a,l){this._reactName=s,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(s=t[o],this[o]=s?s(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?vr:Xo,this.isPropagationStopped=Xo,this}return ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=vr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=vr)},persist:function(){},isPersistent:vr}),e}var rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ql=qe(rn),nr=ie({},rn,{view:0,detail:0}),im=qe(nr),Wi,Hi,fn,bi=ie({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fn&&(fn&&t.type==="mousemove"?(Wi=t.screenX-fn.screenX,Hi=t.screenY-fn.screenY):Hi=Wi=0,fn=t),Wi)},movementY:function(t){return"movementY"in t?t.movementY:Hi}}),Zo=qe(bi),am=ie({},bi,{dataTransfer:0}),lm=qe(am),om=ie({},nr,{relatedTarget:0}),Qi=qe(om),cm=ie({},rn,{animationName:0,elapsedTime:0,pseudoElement:0}),um=qe(cm),dm=ie({},rn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hm=qe(dm),fm=ie({},rn,{data:0}),ec=qe(fm),mm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xm(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gm[t])?!!e[t]:!1}function Vl(){return xm}var vm=ie({},nr,{key:function(t){if(t.key){var e=mm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?pm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vl,charCode:function(t){return t.type==="keypress"?Rr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ym=qe(vm),bm=ie({},bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tc=qe(bm),wm=ie({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vl}),jm=qe(wm),_m=ie({},rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),km=qe(_m),Nm=ie({},bi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Sm=qe(Nm),Cm=[9,13,27,32],Wl=kt&&"CompositionEvent"in window,Nn=null;kt&&"documentMode"in document&&(Nn=document.documentMode);var Em=kt&&"TextEvent"in window&&!Nn,nd=kt&&(!Wl||Nn&&8<Nn&&11>=Nn),sc=" ",nc=!1;function rd(t,e){switch(t){case"keyup":return Cm.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function id(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Is=!1;function Tm(t,e){switch(t){case"compositionend":return id(e);case"keypress":return e.which!==32?null:(nc=!0,sc);case"textInput":return t=e.data,t===sc&&nc?null:t;default:return null}}function Pm(t,e){if(Is)return t==="compositionend"||!Wl&&rd(t,e)?(t=sd(),Ar=Bl=$t=null,Is=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nd&&e.locale!=="ko"?null:e.data;default:return null}}var Dm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Dm[t.type]:e==="textarea"}function ad(t,e,s,n){$u(n),e=Jr(e,"onChange"),0<e.length&&(s=new ql("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var Sn=null,zn=null;function Im(t){xd(t,0)}function wi(t){var e=As(t);if(Pu(e))return t}function Om(t,e){if(t==="change")return e}var ld=!1;if(kt){var Ki;if(kt){var Gi="oninput"in document;if(!Gi){var ic=document.createElement("div");ic.setAttribute("oninput","return;"),Gi=typeof ic.oninput=="function"}Ki=Gi}else Ki=!1;ld=Ki&&(!document.documentMode||9<document.documentMode)}function ac(){Sn&&(Sn.detachEvent("onpropertychange",od),zn=Sn=null)}function od(t){if(t.propertyName==="value"&&wi(zn)){var e=[];ad(e,zn,t,$l(t)),zu(Im,e)}}function Lm(t,e,s){t==="focusin"?(ac(),Sn=e,zn=s,Sn.attachEvent("onpropertychange",od)):t==="focusout"&&ac()}function Am(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wi(zn)}function Rm(t,e){if(t==="click")return wi(e)}function $m(t,e){if(t==="input"||t==="change")return wi(e)}function Fm(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var lt=typeof Object.is=="function"?Object.is:Fm;function Bn(t,e){if(lt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var i=s[n];if(!ja.call(e,i)||!lt(t[i],e[i]))return!1}return!0}function lc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function oc(t,e){var s=lc(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=lc(s)}}function cd(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cd(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ud(){for(var t=window,e=Vr();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=Vr(t.document)}return e}function Hl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Um(t){var e=ud(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&cd(s.ownerDocument.documentElement,s)){if(n!==null&&Hl(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=s.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=oc(s,a);var l=oc(s,n);i&&l&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Mm=kt&&"documentMode"in document&&11>=document.documentMode,Os=null,za=null,Cn=null,Ba=!1;function cc(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ba||Os==null||Os!==Vr(n)||(n=Os,"selectionStart"in n&&Hl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Cn&&Bn(Cn,n)||(Cn=n,n=Jr(za,"onSelect"),0<n.length&&(e=new ql("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=Os)))}function yr(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var Ls={animationend:yr("Animation","AnimationEnd"),animationiteration:yr("Animation","AnimationIteration"),animationstart:yr("Animation","AnimationStart"),transitionend:yr("Transition","TransitionEnd")},Yi={},dd={};kt&&(dd=document.createElement("div").style,"AnimationEvent"in window||(delete Ls.animationend.animation,delete Ls.animationiteration.animation,delete Ls.animationstart.animation),"TransitionEvent"in window||delete Ls.transitionend.transition);function ji(t){if(Yi[t])return Yi[t];if(!Ls[t])return t;var e=Ls[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in dd)return Yi[t]=e[s];return t}var hd=ji("animationend"),fd=ji("animationiteration"),md=ji("animationstart"),pd=ji("transitionend"),gd=new Map,uc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yt(t,e){gd.set(t,e),xs(e,[t])}for(var Ji=0;Ji<uc.length;Ji++){var Xi=uc[Ji],zm=Xi.toLowerCase(),Bm=Xi[0].toUpperCase()+Xi.slice(1);Yt(zm,"on"+Bm)}Yt(hd,"onAnimationEnd");Yt(fd,"onAnimationIteration");Yt(md,"onAnimationStart");Yt("dblclick","onDoubleClick");Yt("focusin","onFocus");Yt("focusout","onBlur");Yt(pd,"onTransitionEnd");Ks("onMouseEnter",["mouseout","mouseover"]);Ks("onMouseLeave",["mouseout","mouseover"]);Ks("onPointerEnter",["pointerout","pointerover"]);Ks("onPointerLeave",["pointerout","pointerover"]);xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qm=new Set("cancel close invalid load scroll toggle".split(" ").concat(wn));function dc(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,zf(n,e,void 0,t),t.currentTarget=null}function xd(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;dc(i,o,u),a=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,u=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;dc(i,o,u),a=c}}}if(Hr)throw t=$a,Hr=!1,$a=null,t}function ee(t,e){var s=e[Qa];s===void 0&&(s=e[Qa]=new Set);var n=t+"__bubble";s.has(n)||(vd(e,t,2,!1),s.add(n))}function Zi(t,e,s){var n=0;e&&(n|=4),vd(s,t,n,e)}var br="_reactListening"+Math.random().toString(36).slice(2);function qn(t){if(!t[br]){t[br]=!0,Nu.forEach(function(s){s!=="selectionchange"&&(qm.has(s)||Zi(s,!1,t),Zi(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[br]||(e[br]=!0,Zi("selectionchange",!1,e))}}function vd(t,e,s,n){switch(td(e)){case 1:var i=nm;break;case 4:i=rm;break;default:i=zl}s=i.bind(null,e,s,t),i=void 0,!Ra||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,s,{capture:!0,passive:i}):t.addEventListener(e,s,!0):i!==void 0?t.addEventListener(e,s,{passive:i}):t.addEventListener(e,s,!1)}function ea(t,e,s,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;l=l.return}for(;o!==null;){if(l=ls(o),l===null)return;if(c=l.tag,c===5||c===6){n=a=l;continue e}o=o.parentNode}}n=n.return}zu(function(){var u=a,d=$l(s),f=[];e:{var p=gd.get(t);if(p!==void 0){var b=ql,g=t;switch(t){case"keypress":if(Rr(s)===0)break e;case"keydown":case"keyup":b=ym;break;case"focusin":g="focus",b=Qi;break;case"focusout":g="blur",b=Qi;break;case"beforeblur":case"afterblur":b=Qi;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Zo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=lm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=jm;break;case hd:case fd:case md:b=um;break;case pd:b=km;break;case"scroll":b=im;break;case"wheel":b=Sm;break;case"copy":case"cut":case"paste":b=hm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=tc}var v=(e&4)!==0,N=!v&&t==="scroll",x=v?p!==null?p+"Capture":null:p;v=[];for(var m=u,h;m!==null;){h=m;var j=h.stateNode;if(h.tag===5&&j!==null&&(h=j,x!==null&&(j=$n(m,x),j!=null&&v.push(Vn(m,j,h)))),N)break;m=m.return}0<v.length&&(p=new b(p,g,null,s,d),f.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",p&&s!==La&&(g=s.relatedTarget||s.fromElement)&&(ls(g)||g[Nt]))break e;if((b||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,b?(g=s.relatedTarget||s.toElement,b=u,g=g?ls(g):null,g!==null&&(N=vs(g),g!==N||g.tag!==5&&g.tag!==6)&&(g=null)):(b=null,g=u),b!==g)){if(v=Zo,j="onMouseLeave",x="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(v=tc,j="onPointerLeave",x="onPointerEnter",m="pointer"),N=b==null?p:As(b),h=g==null?p:As(g),p=new v(j,m+"leave",b,s,d),p.target=N,p.relatedTarget=h,j=null,ls(d)===u&&(v=new v(x,m+"enter",g,s,d),v.target=h,v.relatedTarget=N,j=v),N=j,b&&g)t:{for(v=b,x=g,m=0,h=v;h;h=js(h))m++;for(h=0,j=x;j;j=js(j))h++;for(;0<m-h;)v=js(v),m--;for(;0<h-m;)x=js(x),h--;for(;m--;){if(v===x||x!==null&&v===x.alternate)break t;v=js(v),x=js(x)}v=null}else v=null;b!==null&&hc(f,p,b,v,!1),g!==null&&N!==null&&hc(f,N,g,v,!0)}}e:{if(p=u?As(u):window,b=p.nodeName&&p.nodeName.toLowerCase(),b==="select"||b==="input"&&p.type==="file")var k=Om;else if(rc(p))if(ld)k=$m;else{k=Am;var y=Lm}else(b=p.nodeName)&&b.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(k=Rm);if(k&&(k=k(t,u))){ad(f,k,s,d);break e}y&&y(t,p,u),t==="focusout"&&(y=p._wrapperState)&&y.controlled&&p.type==="number"&&Ta(p,"number",p.value)}switch(y=u?As(u):window,t){case"focusin":(rc(y)||y.contentEditable==="true")&&(Os=y,za=u,Cn=null);break;case"focusout":Cn=za=Os=null;break;case"mousedown":Ba=!0;break;case"contextmenu":case"mouseup":case"dragend":Ba=!1,cc(f,s,d);break;case"selectionchange":if(Mm)break;case"keydown":case"keyup":cc(f,s,d)}var C;if(Wl)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Is?rd(t,s)&&(T="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(T="onCompositionStart");T&&(nd&&s.locale!=="ko"&&(Is||T!=="onCompositionStart"?T==="onCompositionEnd"&&Is&&(C=sd()):($t=d,Bl="value"in $t?$t.value:$t.textContent,Is=!0)),y=Jr(u,T),0<y.length&&(T=new ec(T,t,null,s,d),f.push({event:T,listeners:y}),C?T.data=C:(C=id(s),C!==null&&(T.data=C)))),(C=Em?Tm(t,s):Pm(t,s))&&(u=Jr(u,"onBeforeInput"),0<u.length&&(d=new ec("onBeforeInput","beforeinput",null,s,d),f.push({event:d,listeners:u}),d.data=C))}xd(f,e)})}function Vn(t,e,s){return{instance:t,listener:e,currentTarget:s}}function Jr(t,e){for(var s=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=$n(t,s),a!=null&&n.unshift(Vn(t,a,i)),a=$n(t,e),a!=null&&n.push(Vn(t,a,i))),t=t.return}return n}function js(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hc(t,e,s,n,i){for(var a=e._reactName,l=[];s!==null&&s!==n;){var o=s,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,i?(c=$n(s,a),c!=null&&l.unshift(Vn(s,c,o))):i||(c=$n(s,a),c!=null&&l.push(Vn(s,c,o)))),s=s.return}l.length!==0&&t.push({event:e,listeners:l})}var Vm=/\r\n?/g,Wm=/\u0000|\uFFFD/g;function fc(t){return(typeof t=="string"?t:""+t).replace(Vm,`
`).replace(Wm,"")}function wr(t,e,s){if(e=fc(e),fc(t)!==e&&s)throw Error(A(425))}function Xr(){}var qa=null,Va=null;function Wa(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ha=typeof setTimeout=="function"?setTimeout:void 0,Hm=typeof clearTimeout=="function"?clearTimeout:void 0,mc=typeof Promise=="function"?Promise:void 0,Qm=typeof queueMicrotask=="function"?queueMicrotask:typeof mc<"u"?function(t){return mc.resolve(null).then(t).catch(Km)}:Ha;function Km(t){setTimeout(function(){throw t})}function ta(t,e){var s=e,n=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(n===0){t.removeChild(i),Mn(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=i}while(s);Mn(e)}function Bt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function pc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var an=Math.random().toString(36).slice(2),ht="__reactFiber$"+an,Wn="__reactProps$"+an,Nt="__reactContainer$"+an,Qa="__reactEvents$"+an,Gm="__reactListeners$"+an,Ym="__reactHandles$"+an;function ls(t){var e=t[ht];if(e)return e;for(var s=t.parentNode;s;){if(e=s[Nt]||s[ht]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=pc(t);t!==null;){if(s=t[ht])return s;t=pc(t)}return e}t=s,s=t.parentNode}return null}function rr(t){return t=t[ht]||t[Nt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function As(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(A(33))}function _i(t){return t[Wn]||null}var Ka=[],Rs=-1;function Jt(t){return{current:t}}function te(t){0>Rs||(t.current=Ka[Rs],Ka[Rs]=null,Rs--)}function Z(t,e){Rs++,Ka[Rs]=t.current,t.current=e}var Kt={},_e=Jt(Kt),Oe=Jt(!1),hs=Kt;function Gs(t,e){var s=t.type.contextTypes;if(!s)return Kt;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in s)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Le(t){return t=t.childContextTypes,t!=null}function Zr(){te(Oe),te(_e)}function gc(t,e,s){if(_e.current!==Kt)throw Error(A(168));Z(_e,e),Z(Oe,s)}function yd(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(A(108,Lf(t)||"Unknown",i));return ie({},s,n)}function ei(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kt,hs=_e.current,Z(_e,t),Z(Oe,Oe.current),!0}function xc(t,e,s){var n=t.stateNode;if(!n)throw Error(A(169));s?(t=yd(t,e,hs),n.__reactInternalMemoizedMergedChildContext=t,te(Oe),te(_e),Z(_e,t)):te(Oe),Z(Oe,s)}var yt=null,ki=!1,sa=!1;function bd(t){yt===null?yt=[t]:yt.push(t)}function Jm(t){ki=!0,bd(t)}function Xt(){if(!sa&&yt!==null){sa=!0;var t=0,e=Y;try{var s=yt;for(Y=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}yt=null,ki=!1}catch(i){throw yt!==null&&(yt=yt.slice(t+1)),Wu(Fl,Xt),i}finally{Y=e,sa=!1}}return null}var $s=[],Fs=0,ti=null,si=0,We=[],He=0,fs=null,bt=1,wt="";function ns(t,e){$s[Fs++]=si,$s[Fs++]=ti,ti=t,si=e}function wd(t,e,s){We[He++]=bt,We[He++]=wt,We[He++]=fs,fs=t;var n=bt;t=wt;var i=32-it(n)-1;n&=~(1<<i),s+=1;var a=32-it(e)+i;if(30<a){var l=i-i%5;a=(n&(1<<l)-1).toString(32),n>>=l,i-=l,bt=1<<32-it(e)+i|s<<i|n,wt=a+t}else bt=1<<a|s<<i|n,wt=t}function Ql(t){t.return!==null&&(ns(t,1),wd(t,1,0))}function Kl(t){for(;t===ti;)ti=$s[--Fs],$s[Fs]=null,si=$s[--Fs],$s[Fs]=null;for(;t===fs;)fs=We[--He],We[He]=null,wt=We[--He],We[He]=null,bt=We[--He],We[He]=null}var Fe=null,$e=null,se=!1,rt=null;function jd(t,e){var s=Qe(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function vc(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Fe=t,$e=Bt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Fe=t,$e=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=fs!==null?{id:bt,overflow:wt}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Qe(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Fe=t,$e=null,!0):!1;default:return!1}}function Ga(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ya(t){if(se){var e=$e;if(e){var s=e;if(!vc(t,e)){if(Ga(t))throw Error(A(418));e=Bt(s.nextSibling);var n=Fe;e&&vc(t,e)?jd(n,s):(t.flags=t.flags&-4097|2,se=!1,Fe=t)}}else{if(Ga(t))throw Error(A(418));t.flags=t.flags&-4097|2,se=!1,Fe=t}}}function yc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Fe=t}function jr(t){if(t!==Fe)return!1;if(!se)return yc(t),se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wa(t.type,t.memoizedProps)),e&&(e=$e)){if(Ga(t))throw _d(),Error(A(418));for(;e;)jd(t,e),e=Bt(e.nextSibling)}if(yc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(A(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){$e=Bt(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}$e=null}}else $e=Fe?Bt(t.stateNode.nextSibling):null;return!0}function _d(){for(var t=$e;t;)t=Bt(t.nextSibling)}function Ys(){$e=Fe=null,se=!1}function Gl(t){rt===null?rt=[t]:rt.push(t)}var Xm=Et.ReactCurrentBatchConfig;function mn(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(A(309));var n=s.stateNode}if(!n)throw Error(A(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var o=i.refs;l===null?delete o[a]:o[a]=l},e._stringRef=a,e)}if(typeof t!="string")throw Error(A(284));if(!s._owner)throw Error(A(290,t))}return t}function _r(t,e){throw t=Object.prototype.toString.call(e),Error(A(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bc(t){var e=t._init;return e(t._payload)}function kd(t){function e(x,m){if(t){var h=x.deletions;h===null?(x.deletions=[m],x.flags|=16):h.push(m)}}function s(x,m){if(!t)return null;for(;m!==null;)e(x,m),m=m.sibling;return null}function n(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function i(x,m){return x=Ht(x,m),x.index=0,x.sibling=null,x}function a(x,m,h){return x.index=h,t?(h=x.alternate,h!==null?(h=h.index,h<m?(x.flags|=2,m):h):(x.flags|=2,m)):(x.flags|=1048576,m)}function l(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,m,h,j){return m===null||m.tag!==6?(m=ca(h,x.mode,j),m.return=x,m):(m=i(m,h),m.return=x,m)}function c(x,m,h,j){var k=h.type;return k===Ds?d(x,m,h.props.children,j,h.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===It&&bc(k)===m.type)?(j=i(m,h.props),j.ref=mn(x,m,h),j.return=x,j):(j=qr(h.type,h.key,h.props,null,x.mode,j),j.ref=mn(x,m,h),j.return=x,j)}function u(x,m,h,j){return m===null||m.tag!==4||m.stateNode.containerInfo!==h.containerInfo||m.stateNode.implementation!==h.implementation?(m=ua(h,x.mode,j),m.return=x,m):(m=i(m,h.children||[]),m.return=x,m)}function d(x,m,h,j,k){return m===null||m.tag!==7?(m=ds(h,x.mode,j,k),m.return=x,m):(m=i(m,h),m.return=x,m)}function f(x,m,h){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ca(""+m,x.mode,h),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case hr:return h=qr(m.type,m.key,m.props,null,x.mode,h),h.ref=mn(x,null,m),h.return=x,h;case Ps:return m=ua(m,x.mode,h),m.return=x,m;case It:var j=m._init;return f(x,j(m._payload),h)}if(yn(m)||cn(m))return m=ds(m,x.mode,h,null),m.return=x,m;_r(x,m)}return null}function p(x,m,h,j){var k=m!==null?m.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return k!==null?null:o(x,m,""+h,j);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case hr:return h.key===k?c(x,m,h,j):null;case Ps:return h.key===k?u(x,m,h,j):null;case It:return k=h._init,p(x,m,k(h._payload),j)}if(yn(h)||cn(h))return k!==null?null:d(x,m,h,j,null);_r(x,h)}return null}function b(x,m,h,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(h)||null,o(m,x,""+j,k);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case hr:return x=x.get(j.key===null?h:j.key)||null,c(m,x,j,k);case Ps:return x=x.get(j.key===null?h:j.key)||null,u(m,x,j,k);case It:var y=j._init;return b(x,m,h,y(j._payload),k)}if(yn(j)||cn(j))return x=x.get(h)||null,d(m,x,j,k,null);_r(m,j)}return null}function g(x,m,h,j){for(var k=null,y=null,C=m,T=m=0,w=null;C!==null&&T<h.length;T++){C.index>T?(w=C,C=null):w=C.sibling;var P=p(x,C,h[T],j);if(P===null){C===null&&(C=w);break}t&&C&&P.alternate===null&&e(x,C),m=a(P,m,T),y===null?k=P:y.sibling=P,y=P,C=w}if(T===h.length)return s(x,C),se&&ns(x,T),k;if(C===null){for(;T<h.length;T++)C=f(x,h[T],j),C!==null&&(m=a(C,m,T),y===null?k=C:y.sibling=C,y=C);return se&&ns(x,T),k}for(C=n(x,C);T<h.length;T++)w=b(C,x,T,h[T],j),w!==null&&(t&&w.alternate!==null&&C.delete(w.key===null?T:w.key),m=a(w,m,T),y===null?k=w:y.sibling=w,y=w);return t&&C.forEach(function(O){return e(x,O)}),se&&ns(x,T),k}function v(x,m,h,j){var k=cn(h);if(typeof k!="function")throw Error(A(150));if(h=k.call(h),h==null)throw Error(A(151));for(var y=k=null,C=m,T=m=0,w=null,P=h.next();C!==null&&!P.done;T++,P=h.next()){C.index>T?(w=C,C=null):w=C.sibling;var O=p(x,C,P.value,j);if(O===null){C===null&&(C=w);break}t&&C&&O.alternate===null&&e(x,C),m=a(O,m,T),y===null?k=O:y.sibling=O,y=O,C=w}if(P.done)return s(x,C),se&&ns(x,T),k;if(C===null){for(;!P.done;T++,P=h.next())P=f(x,P.value,j),P!==null&&(m=a(P,m,T),y===null?k=P:y.sibling=P,y=P);return se&&ns(x,T),k}for(C=n(x,C);!P.done;T++,P=h.next())P=b(C,x,T,P.value,j),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?T:P.key),m=a(P,m,T),y===null?k=P:y.sibling=P,y=P);return t&&C.forEach(function(D){return e(x,D)}),se&&ns(x,T),k}function N(x,m,h,j){if(typeof h=="object"&&h!==null&&h.type===Ds&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case hr:e:{for(var k=h.key,y=m;y!==null;){if(y.key===k){if(k=h.type,k===Ds){if(y.tag===7){s(x,y.sibling),m=i(y,h.props.children),m.return=x,x=m;break e}}else if(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===It&&bc(k)===y.type){s(x,y.sibling),m=i(y,h.props),m.ref=mn(x,y,h),m.return=x,x=m;break e}s(x,y);break}else e(x,y);y=y.sibling}h.type===Ds?(m=ds(h.props.children,x.mode,j,h.key),m.return=x,x=m):(j=qr(h.type,h.key,h.props,null,x.mode,j),j.ref=mn(x,m,h),j.return=x,x=j)}return l(x);case Ps:e:{for(y=h.key;m!==null;){if(m.key===y)if(m.tag===4&&m.stateNode.containerInfo===h.containerInfo&&m.stateNode.implementation===h.implementation){s(x,m.sibling),m=i(m,h.children||[]),m.return=x,x=m;break e}else{s(x,m);break}else e(x,m);m=m.sibling}m=ua(h,x.mode,j),m.return=x,x=m}return l(x);case It:return y=h._init,N(x,m,y(h._payload),j)}if(yn(h))return g(x,m,h,j);if(cn(h))return v(x,m,h,j);_r(x,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,m!==null&&m.tag===6?(s(x,m.sibling),m=i(m,h),m.return=x,x=m):(s(x,m),m=ca(h,x.mode,j),m.return=x,x=m),l(x)):s(x,m)}return N}var Js=kd(!0),Nd=kd(!1),ni=Jt(null),ri=null,Us=null,Yl=null;function Jl(){Yl=Us=ri=null}function Xl(t){var e=ni.current;te(ni),t._currentValue=e}function Ja(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function Hs(t,e){ri=t,Yl=Us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(De=!0),t.firstContext=null)}function Ye(t){var e=t._currentValue;if(Yl!==t)if(t={context:t,memoizedValue:e,next:null},Us===null){if(ri===null)throw Error(A(308));Us=t,ri.dependencies={lanes:0,firstContext:t}}else Us=Us.next=t;return e}var os=null;function Zl(t){os===null?os=[t]:os.push(t)}function Sd(t,e,s,n){var i=e.interleaved;return i===null?(s.next=s,Zl(e)):(s.next=i.next,i.next=s),e.interleaved=s,St(t,n)}function St(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Ot=!1;function eo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qt(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,G&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,St(t,s)}return i=n.interleaved,i===null?(e.next=e,Zl(n)):(e.next=i.next,i.next=e),n.interleaved=e,St(t,s)}function $r(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Ul(t,s)}}function wc(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var i=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?i=a=l:a=a.next=l,s=s.next}while(s!==null);a===null?i=a=e:a=a.next=e}else i=a=e;s={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function ii(t,e,s,n){var i=t.updateQueue;Ot=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,l===null?a=u:l.next=u,l=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==l&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(a!==null){var f=i.baseState;l=0,d=u=c=null,o=a;do{var p=o.lane,b=o.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:b,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,v=o;switch(p=e,b=s,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(b,f,p);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,p=typeof g=="function"?g.call(b,f,p):g,p==null)break e;f=ie({},f,p);break e;case 2:Ot=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[o]:p.push(o))}else b={eventTime:b,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=b,c=f):d=d.next=b,l|=p;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do l|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);ps|=l,t.lanes=l,t.memoizedState=f}}function jc(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=s,typeof i!="function")throw Error(A(191,i));i.call(n)}}}var ir={},mt=Jt(ir),Hn=Jt(ir),Qn=Jt(ir);function cs(t){if(t===ir)throw Error(A(174));return t}function to(t,e){switch(Z(Qn,e),Z(Hn,t),Z(mt,ir),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Da(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Da(e,t)}te(mt),Z(mt,e)}function Xs(){te(mt),te(Hn),te(Qn)}function Ed(t){cs(Qn.current);var e=cs(mt.current),s=Da(e,t.type);e!==s&&(Z(Hn,t),Z(mt,s))}function so(t){Hn.current===t&&(te(mt),te(Hn))}var ne=Jt(0);function ai(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var na=[];function no(){for(var t=0;t<na.length;t++)na[t]._workInProgressVersionPrimary=null;na.length=0}var Fr=Et.ReactCurrentDispatcher,ra=Et.ReactCurrentBatchConfig,ms=0,re=null,he=null,pe=null,li=!1,En=!1,Kn=0,Zm=0;function be(){throw Error(A(321))}function ro(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!lt(t[s],e[s]))return!1;return!0}function io(t,e,s,n,i,a){if(ms=a,re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fr.current=t===null||t.memoizedState===null?n0:r0,t=s(n,i),En){a=0;do{if(En=!1,Kn=0,25<=a)throw Error(A(301));a+=1,pe=he=null,e.updateQueue=null,Fr.current=i0,t=s(n,i)}while(En)}if(Fr.current=oi,e=he!==null&&he.next!==null,ms=0,pe=he=re=null,li=!1,e)throw Error(A(300));return t}function ao(){var t=Kn!==0;return Kn=0,t}function ut(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?re.memoizedState=pe=t:pe=pe.next=t,pe}function Je(){if(he===null){var t=re.alternate;t=t!==null?t.memoizedState:null}else t=he.next;var e=pe===null?re.memoizedState:pe.next;if(e!==null)pe=e,he=t;else{if(t===null)throw Error(A(310));he=t,t={memoizedState:he.memoizedState,baseState:he.baseState,baseQueue:he.baseQueue,queue:he.queue,next:null},pe===null?re.memoizedState=pe=t:pe=pe.next=t}return pe}function Gn(t,e){return typeof e=="function"?e(t):e}function ia(t){var e=Je(),s=e.queue;if(s===null)throw Error(A(311));s.lastRenderedReducer=t;var n=he,i=n.baseQueue,a=s.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}n.baseQueue=i=a,s.pending=null}if(i!==null){a=i.next,n=n.baseState;var o=l=null,c=null,u=a;do{var d=u.lane;if((ms&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,l=n):c=c.next=f,re.lanes|=d,ps|=d}u=u.next}while(u!==null&&u!==a);c===null?l=n:c.next=o,lt(n,e.memoizedState)||(De=!0),e.memoizedState=n,e.baseState=l,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){i=t;do a=i.lane,re.lanes|=a,ps|=a,i=i.next;while(i!==t)}else i===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function aa(t){var e=Je(),s=e.queue;if(s===null)throw Error(A(311));s.lastRenderedReducer=t;var n=s.dispatch,i=s.pending,a=e.memoizedState;if(i!==null){s.pending=null;var l=i=i.next;do a=t(a,l.action),l=l.next;while(l!==i);lt(a,e.memoizedState)||(De=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),s.lastRenderedState=a}return[a,n]}function Td(){}function Pd(t,e){var s=re,n=Je(),i=e(),a=!lt(n.memoizedState,i);if(a&&(n.memoizedState=i,De=!0),n=n.queue,lo(Od.bind(null,s,n,t),[t]),n.getSnapshot!==e||a||pe!==null&&pe.memoizedState.tag&1){if(s.flags|=2048,Yn(9,Id.bind(null,s,n,i,e),void 0,null),ge===null)throw Error(A(349));ms&30||Dd(s,e,i)}return i}function Dd(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=re.updateQueue,e===null?(e={lastEffect:null,stores:null},re.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function Id(t,e,s,n){e.value=s,e.getSnapshot=n,Ld(e)&&Ad(t)}function Od(t,e,s){return s(function(){Ld(e)&&Ad(t)})}function Ld(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!lt(t,s)}catch{return!0}}function Ad(t){var e=St(t,1);e!==null&&at(e,t,1,-1)}function _c(t){var e=ut();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:t},e.queue=t,t=t.dispatch=s0.bind(null,re,t),[e.memoizedState,t]}function Yn(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=re.updateQueue,e===null?(e={lastEffect:null,stores:null},re.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function Rd(){return Je().memoizedState}function Ur(t,e,s,n){var i=ut();re.flags|=t,i.memoizedState=Yn(1|e,s,void 0,n===void 0?null:n)}function Ni(t,e,s,n){var i=Je();n=n===void 0?null:n;var a=void 0;if(he!==null){var l=he.memoizedState;if(a=l.destroy,n!==null&&ro(n,l.deps)){i.memoizedState=Yn(e,s,a,n);return}}re.flags|=t,i.memoizedState=Yn(1|e,s,a,n)}function kc(t,e){return Ur(8390656,8,t,e)}function lo(t,e){return Ni(2048,8,t,e)}function $d(t,e){return Ni(4,2,t,e)}function Fd(t,e){return Ni(4,4,t,e)}function Ud(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Md(t,e,s){return s=s!=null?s.concat([t]):null,Ni(4,4,Ud.bind(null,e,t),s)}function oo(){}function zd(t,e){var s=Je();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&ro(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function Bd(t,e){var s=Je();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&ro(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function qd(t,e,s){return ms&21?(lt(s,e)||(s=Ku(),re.lanes|=s,ps|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,De=!0),t.memoizedState=s)}function e0(t,e){var s=Y;Y=s!==0&&4>s?s:4,t(!0);var n=ra.transition;ra.transition={};try{t(!1),e()}finally{Y=s,ra.transition=n}}function Vd(){return Je().memoizedState}function t0(t,e,s){var n=Wt(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Wd(t))Hd(e,s);else if(s=Sd(t,e,s,n),s!==null){var i=Se();at(s,t,n,i),Qd(s,e,n)}}function s0(t,e,s){var n=Wt(t),i={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Wd(t))Hd(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,o=a(l,s);if(i.hasEagerState=!0,i.eagerState=o,lt(o,l)){var c=e.interleaved;c===null?(i.next=i,Zl(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}s=Sd(t,e,i,n),s!==null&&(i=Se(),at(s,t,n,i),Qd(s,e,n))}}function Wd(t){var e=t.alternate;return t===re||e!==null&&e===re}function Hd(t,e){En=li=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function Qd(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Ul(t,s)}}var oi={readContext:Ye,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useInsertionEffect:be,useLayoutEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useMutableSource:be,useSyncExternalStore:be,useId:be,unstable_isNewReconciler:!1},n0={readContext:Ye,useCallback:function(t,e){return ut().memoizedState=[t,e===void 0?null:e],t},useContext:Ye,useEffect:kc,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Ur(4194308,4,Ud.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Ur(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ur(4,2,t,e)},useMemo:function(t,e){var s=ut();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=ut();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=t0.bind(null,re,t),[n.memoizedState,t]},useRef:function(t){var e=ut();return t={current:t},e.memoizedState=t},useState:_c,useDebugValue:oo,useDeferredValue:function(t){return ut().memoizedState=t},useTransition:function(){var t=_c(!1),e=t[0];return t=e0.bind(null,t[1]),ut().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=re,i=ut();if(se){if(s===void 0)throw Error(A(407));s=s()}else{if(s=e(),ge===null)throw Error(A(349));ms&30||Dd(n,e,s)}i.memoizedState=s;var a={value:s,getSnapshot:e};return i.queue=a,kc(Od.bind(null,n,a,t),[t]),n.flags|=2048,Yn(9,Id.bind(null,n,a,s,e),void 0,null),s},useId:function(){var t=ut(),e=ge.identifierPrefix;if(se){var s=wt,n=bt;s=(n&~(1<<32-it(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=Kn++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Zm++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},r0={readContext:Ye,useCallback:zd,useContext:Ye,useEffect:lo,useImperativeHandle:Md,useInsertionEffect:$d,useLayoutEffect:Fd,useMemo:Bd,useReducer:ia,useRef:Rd,useState:function(){return ia(Gn)},useDebugValue:oo,useDeferredValue:function(t){var e=Je();return qd(e,he.memoizedState,t)},useTransition:function(){var t=ia(Gn)[0],e=Je().memoizedState;return[t,e]},useMutableSource:Td,useSyncExternalStore:Pd,useId:Vd,unstable_isNewReconciler:!1},i0={readContext:Ye,useCallback:zd,useContext:Ye,useEffect:lo,useImperativeHandle:Md,useInsertionEffect:$d,useLayoutEffect:Fd,useMemo:Bd,useReducer:aa,useRef:Rd,useState:function(){return aa(Gn)},useDebugValue:oo,useDeferredValue:function(t){var e=Je();return he===null?e.memoizedState=t:qd(e,he.memoizedState,t)},useTransition:function(){var t=aa(Gn)[0],e=Je().memoizedState;return[t,e]},useMutableSource:Td,useSyncExternalStore:Pd,useId:Vd,unstable_isNewReconciler:!1};function tt(t,e){if(t&&t.defaultProps){e=ie({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function Xa(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:ie({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Si={isMounted:function(t){return(t=t._reactInternals)?vs(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=Se(),i=Wt(t),a=jt(n,i);a.payload=e,s!=null&&(a.callback=s),e=qt(t,a,i),e!==null&&(at(e,t,i,n),$r(e,t,i))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=Se(),i=Wt(t),a=jt(n,i);a.tag=1,a.payload=e,s!=null&&(a.callback=s),e=qt(t,a,i),e!==null&&(at(e,t,i,n),$r(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=Se(),n=Wt(t),i=jt(s,n);i.tag=2,e!=null&&(i.callback=e),e=qt(t,i,n),e!==null&&(at(e,t,n,s),$r(e,t,n))}};function Nc(t,e,s,n,i,a,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,l):e.prototype&&e.prototype.isPureReactComponent?!Bn(s,n)||!Bn(i,a):!0}function Kd(t,e,s){var n=!1,i=Kt,a=e.contextType;return typeof a=="object"&&a!==null?a=Ye(a):(i=Le(e)?hs:_e.current,n=e.contextTypes,a=(n=n!=null)?Gs(t,i):Kt),e=new e(s,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Si,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Sc(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&Si.enqueueReplaceState(e,e.state,null)}function Za(t,e,s,n){var i=t.stateNode;i.props=s,i.state=t.memoizedState,i.refs={},eo(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Ye(a):(a=Le(e)?hs:_e.current,i.context=Gs(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Xa(t,e,a,s),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Si.enqueueReplaceState(i,i.state,null),ii(t,s,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zs(t,e){try{var s="",n=e;do s+=Of(n),n=n.return;while(n);var i=s}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function la(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function el(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var a0=typeof WeakMap=="function"?WeakMap:Map;function Gd(t,e,s){s=jt(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){ui||(ui=!0,ul=n),el(t,e)},s}function Yd(t,e,s){s=jt(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;s.payload=function(){return n(i)},s.callback=function(){el(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){el(t,e),typeof n!="function"&&(Vt===null?Vt=new Set([this]):Vt.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),s}function Cc(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new a0;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(s)||(i.add(s),t=b0.bind(null,t,e,s),e.then(t,t))}function Ec(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Tc(t,e,s,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=jt(-1,1),e.tag=2,qt(s,e,1))),s.lanes|=1),t)}var l0=Et.ReactCurrentOwner,De=!1;function Ne(t,e,s,n){e.child=t===null?Nd(e,null,s,n):Js(e,t.child,s,n)}function Pc(t,e,s,n,i){s=s.render;var a=e.ref;return Hs(e,i),n=io(t,e,s,n,a,i),s=ao(),t!==null&&!De?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ct(t,e,i)):(se&&s&&Ql(e),e.flags|=1,Ne(t,e,n,i),e.child)}function Dc(t,e,s,n,i){if(t===null){var a=s.type;return typeof a=="function"&&!xo(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=a,Jd(t,e,a,n,i)):(t=qr(s.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var l=a.memoizedProps;if(s=s.compare,s=s!==null?s:Bn,s(l,n)&&t.ref===e.ref)return Ct(t,e,i)}return e.flags|=1,t=Ht(a,n),t.ref=e.ref,t.return=e,e.child=t}function Jd(t,e,s,n,i){if(t!==null){var a=t.memoizedProps;if(Bn(a,n)&&t.ref===e.ref)if(De=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(De=!0);else return e.lanes=t.lanes,Ct(t,e,i)}return tl(t,e,s,n,i)}function Xd(t,e,s){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Z(zs,Re),Re|=s;else{if(!(s&1073741824))return t=a!==null?a.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Z(zs,Re),Re|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:s,Z(zs,Re),Re|=n}else a!==null?(n=a.baseLanes|s,e.memoizedState=null):n=s,Z(zs,Re),Re|=n;return Ne(t,e,i,s),e.child}function Zd(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function tl(t,e,s,n,i){var a=Le(s)?hs:_e.current;return a=Gs(e,a),Hs(e,i),s=io(t,e,s,n,a,i),n=ao(),t!==null&&!De?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ct(t,e,i)):(se&&n&&Ql(e),e.flags|=1,Ne(t,e,s,i),e.child)}function Ic(t,e,s,n,i){if(Le(s)){var a=!0;ei(e)}else a=!1;if(Hs(e,i),e.stateNode===null)Mr(t,e),Kd(e,s,n),Za(e,s,n,i),n=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var c=l.context,u=s.contextType;typeof u=="object"&&u!==null?u=Ye(u):(u=Le(s)?hs:_e.current,u=Gs(e,u));var d=s.getDerivedStateFromProps,f=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==u)&&Sc(e,l,n,u),Ot=!1;var p=e.memoizedState;l.state=p,ii(e,n,l,i),c=e.memoizedState,o!==n||p!==c||Oe.current||Ot?(typeof d=="function"&&(Xa(e,s,d,n),c=e.memoizedState),(o=Ot||Nc(e,s,o,n,p,c,u))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),l.props=n,l.state=c,l.context=u,n=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{l=e.stateNode,Cd(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:tt(e.type,o),l.props=u,f=e.pendingProps,p=l.context,c=s.contextType,typeof c=="object"&&c!==null?c=Ye(c):(c=Le(s)?hs:_e.current,c=Gs(e,c));var b=s.getDerivedStateFromProps;(d=typeof b=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==f||p!==c)&&Sc(e,l,n,c),Ot=!1,p=e.memoizedState,l.state=p,ii(e,n,l,i);var g=e.memoizedState;o!==f||p!==g||Oe.current||Ot?(typeof b=="function"&&(Xa(e,s,b,n),g=e.memoizedState),(u=Ot||Nc(e,s,u,n,p,g,c)||!1)?(d||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,g,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,g,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),l.props=n,l.state=g,l.context=c,n=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return sl(t,e,s,n,a,i)}function sl(t,e,s,n,i,a){Zd(t,e);var l=(e.flags&128)!==0;if(!n&&!l)return i&&xc(e,s,!1),Ct(t,e,a);n=e.stateNode,l0.current=e;var o=l&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&l?(e.child=Js(e,t.child,null,a),e.child=Js(e,null,o,a)):Ne(t,e,o,a),e.memoizedState=n.state,i&&xc(e,s,!0),e.child}function eh(t){var e=t.stateNode;e.pendingContext?gc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gc(t,e.context,!1),to(t,e.containerInfo)}function Oc(t,e,s,n,i){return Ys(),Gl(i),e.flags|=256,Ne(t,e,s,n),e.child}var nl={dehydrated:null,treeContext:null,retryLane:0};function rl(t){return{baseLanes:t,cachePool:null,transitions:null}}function th(t,e,s){var n=e.pendingProps,i=ne.current,a=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Z(ne,i&1),t===null)return Ya(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=n.children,t=n.fallback,a?(n=e.mode,a=e.child,l={mode:"hidden",children:l},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Ti(l,n,0,null),t=ds(t,n,s,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=rl(s),e.memoizedState=nl,t):co(e,l));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return o0(t,e,l,n,o,i,s);if(a){a=n.fallback,l=e.mode,i=t.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Ht(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=Ht(o,a):(a=ds(a,l,s,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,l=t.child.memoizedState,l=l===null?rl(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~s,e.memoizedState=nl,n}return a=t.child,t=a.sibling,n=Ht(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function co(t,e){return e=Ti({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kr(t,e,s,n){return n!==null&&Gl(n),Js(e,t.child,null,s),t=co(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function o0(t,e,s,n,i,a,l){if(s)return e.flags&256?(e.flags&=-257,n=la(Error(A(422))),kr(t,e,l,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=Ti({mode:"visible",children:n.children},i,0,null),a=ds(a,i,l,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Js(e,t.child,null,l),e.child.memoizedState=rl(l),e.memoizedState=nl,a);if(!(e.mode&1))return kr(t,e,l,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(A(419)),n=la(a,n,void 0),kr(t,e,l,n)}if(o=(l&t.childLanes)!==0,De||o){if(n=ge,n!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,St(t,i),at(n,t,i,-1))}return go(),n=la(Error(A(421))),kr(t,e,l,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=w0.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,$e=Bt(i.nextSibling),Fe=e,se=!0,rt=null,t!==null&&(We[He++]=bt,We[He++]=wt,We[He++]=fs,bt=t.id,wt=t.overflow,fs=e),e=co(e,n.children),e.flags|=4096,e)}function Lc(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ja(t.return,e,s)}function oa(t,e,s,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=s,a.tailMode=i)}function sh(t,e,s){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(Ne(t,e,n.children,s),n=ne.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lc(t,s,e);else if(t.tag===19)Lc(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Z(ne,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(s=e.child,i=null;s!==null;)t=s.alternate,t!==null&&ai(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=e.child,e.child=null):(i=s.sibling,s.sibling=null),oa(e,!1,i,s,a);break;case"backwards":for(s=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ai(t)===null){e.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}oa(e,!0,s,null,a);break;case"together":oa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mr(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ct(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),ps|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(A(153));if(e.child!==null){for(t=e.child,s=Ht(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Ht(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function c0(t,e,s){switch(e.tag){case 3:eh(e),Ys();break;case 5:Ed(e);break;case 1:Le(e.type)&&ei(e);break;case 4:to(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Z(ni,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Z(ne,ne.current&1),e.flags|=128,null):s&e.child.childLanes?th(t,e,s):(Z(ne,ne.current&1),t=Ct(t,e,s),t!==null?t.sibling:null);Z(ne,ne.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return sh(t,e,s);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Z(ne,ne.current),n)break;return null;case 22:case 23:return e.lanes=0,Xd(t,e,s)}return Ct(t,e,s)}var nh,il,rh,ih;nh=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};il=function(){};rh=function(t,e,s,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,cs(mt.current);var a=null;switch(s){case"input":i=Ca(t,i),n=Ca(t,n),a=[];break;case"select":i=ie({},i,{value:void 0}),n=ie({},n,{value:void 0}),a=[];break;case"textarea":i=Pa(t,i),n=Pa(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Xr)}Ia(s,n);var l;s=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(l in o)o.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(An.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(s||(s={}),s[l]=c[l])}else s||(a||(a=[]),a.push(u,s)),s=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(An.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ee("scroll",t),a||o===c||(a=[])):(a=a||[]).push(u,c))}s&&(a=a||[]).push("style",s);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};ih=function(t,e,s,n){s!==n&&(e.flags|=4)};function pn(t,e){if(!se)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function we(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function u0(t,e,s){var n=e.pendingProps;switch(Kl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return we(e),null;case 1:return Le(e.type)&&Zr(),we(e),null;case 3:return n=e.stateNode,Xs(),te(Oe),te(_e),no(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(jr(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rt!==null&&(fl(rt),rt=null))),il(t,e),we(e),null;case 5:so(e);var i=cs(Qn.current);if(s=e.type,t!==null&&e.stateNode!=null)rh(t,e,s,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(A(166));return we(e),null}if(t=cs(mt.current),jr(e)){n=e.stateNode,s=e.type;var a=e.memoizedProps;switch(n[ht]=e,n[Wn]=a,t=(e.mode&1)!==0,s){case"dialog":ee("cancel",n),ee("close",n);break;case"iframe":case"object":case"embed":ee("load",n);break;case"video":case"audio":for(i=0;i<wn.length;i++)ee(wn[i],n);break;case"source":ee("error",n);break;case"img":case"image":case"link":ee("error",n),ee("load",n);break;case"details":ee("toggle",n);break;case"input":qo(n,a),ee("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},ee("invalid",n);break;case"textarea":Wo(n,a),ee("invalid",n)}Ia(s,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&wr(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&wr(n.textContent,o,t),i=["children",""+o]):An.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&ee("scroll",n)}switch(s){case"input":fr(n),Vo(n,a,!0);break;case"textarea":fr(n),Ho(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Xr)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ou(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=l.createElement(s,{is:n.is}):(t=l.createElement(s),s==="select"&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,s),t[ht]=e,t[Wn]=n,nh(t,e,!1,!1),e.stateNode=t;e:{switch(l=Oa(s,n),s){case"dialog":ee("cancel",t),ee("close",t),i=n;break;case"iframe":case"object":case"embed":ee("load",t),i=n;break;case"video":case"audio":for(i=0;i<wn.length;i++)ee(wn[i],t);i=n;break;case"source":ee("error",t),i=n;break;case"img":case"image":case"link":ee("error",t),ee("load",t),i=n;break;case"details":ee("toggle",t),i=n;break;case"input":qo(t,n),i=Ca(t,n),ee("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=ie({},n,{value:void 0}),ee("invalid",t);break;case"textarea":Wo(t,n),i=Pa(t,n),ee("invalid",t);break;default:i=n}Ia(s,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?Ru(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Lu(t,c)):a==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Rn(t,c):typeof c=="number"&&Rn(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(An.hasOwnProperty(a)?c!=null&&a==="onScroll"&&ee("scroll",t):c!=null&&Ol(t,a,c,l))}switch(s){case"input":fr(t),Vo(t,n,!1);break;case"textarea":fr(t),Ho(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Qt(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Bs(t,!!n.multiple,a,!1):n.defaultValue!=null&&Bs(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xr)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return we(e),null;case 6:if(t&&e.stateNode!=null)ih(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(A(166));if(s=cs(Qn.current),cs(mt.current),jr(e)){if(n=e.stateNode,s=e.memoizedProps,n[ht]=e,(a=n.nodeValue!==s)&&(t=Fe,t!==null))switch(t.tag){case 3:wr(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wr(n.nodeValue,s,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[ht]=e,e.stateNode=n}return we(e),null;case 13:if(te(ne),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(se&&$e!==null&&e.mode&1&&!(e.flags&128))_d(),Ys(),e.flags|=98560,a=!1;else if(a=jr(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(A(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(A(317));a[ht]=e}else Ys(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;we(e),a=!1}else rt!==null&&(fl(rt),rt=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ne.current&1?fe===0&&(fe=3):go())),e.updateQueue!==null&&(e.flags|=4),we(e),null);case 4:return Xs(),il(t,e),t===null&&qn(e.stateNode.containerInfo),we(e),null;case 10:return Xl(e.type._context),we(e),null;case 17:return Le(e.type)&&Zr(),we(e),null;case 19:if(te(ne),a=e.memoizedState,a===null)return we(e),null;if(n=(e.flags&128)!==0,l=a.rendering,l===null)if(n)pn(a,!1);else{if(fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=ai(t),l!==null){for(e.flags|=128,pn(a,!1),n=l.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)a=s,t=n,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Z(ne,ne.current&1|2),e.child}t=t.sibling}a.tail!==null&&oe()>en&&(e.flags|=128,n=!0,pn(a,!1),e.lanes=4194304)}else{if(!n)if(t=ai(l),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),pn(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!se)return we(e),null}else 2*oe()-a.renderingStartTime>en&&s!==1073741824&&(e.flags|=128,n=!0,pn(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(s=a.last,s!==null?s.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=oe(),e.sibling=null,s=ne.current,Z(ne,n?s&1|2:s&1),e):(we(e),null);case 22:case 23:return po(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Re&1073741824&&(we(e),e.subtreeFlags&6&&(e.flags|=8192)):we(e),null;case 24:return null;case 25:return null}throw Error(A(156,e.tag))}function d0(t,e){switch(Kl(e),e.tag){case 1:return Le(e.type)&&Zr(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xs(),te(Oe),te(_e),no(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return so(e),null;case 13:if(te(ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(A(340));Ys()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return te(ne),null;case 4:return Xs(),null;case 10:return Xl(e.type._context),null;case 22:case 23:return po(),null;case 24:return null;default:return null}}var Nr=!1,je=!1,h0=typeof WeakSet=="function"?WeakSet:Set,U=null;function Ms(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){ae(t,e,n)}else s.current=null}function al(t,e,s){try{s()}catch(n){ae(t,e,n)}}var Ac=!1;function f0(t,e){if(qa=Gr,t=ud(),Hl(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var l=0,o=-1,c=-1,u=0,d=0,f=t,p=null;t:for(;;){for(var b;f!==s||i!==0&&f.nodeType!==3||(o=l+i),f!==a||n!==0&&f.nodeType!==3||(c=l+n),f.nodeType===3&&(l+=f.nodeValue.length),(b=f.firstChild)!==null;)p=f,f=b;for(;;){if(f===t)break t;if(p===s&&++u===i&&(o=l),p===a&&++d===n&&(c=l),(b=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=b}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Va={focusedElem:t,selectionRange:s},Gr=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,N=g.memoizedState,x=e.stateNode,m=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:tt(e.type,v),N);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var h=e.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(j){ae(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return g=Ac,Ac=!1,g}function Tn(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&al(e,s,a)}i=i.next}while(i!==n)}}function Ci(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function ll(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function ah(t){var e=t.alternate;e!==null&&(t.alternate=null,ah(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ht],delete e[Wn],delete e[Qa],delete e[Gm],delete e[Ym])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lh(t){return t.tag===5||t.tag===3||t.tag===4}function Rc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ol(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Xr));else if(n!==4&&(t=t.child,t!==null))for(ol(t,e,s),t=t.sibling;t!==null;)ol(t,e,s),t=t.sibling}function cl(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(cl(t,e,s),t=t.sibling;t!==null;)cl(t,e,s),t=t.sibling}var xe=null,st=!1;function Tt(t,e,s){for(s=s.child;s!==null;)oh(t,e,s),s=s.sibling}function oh(t,e,s){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(yi,s)}catch{}switch(s.tag){case 5:je||Ms(s,e);case 6:var n=xe,i=st;xe=null,Tt(t,e,s),xe=n,st=i,xe!==null&&(st?(t=xe,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):xe.removeChild(s.stateNode));break;case 18:xe!==null&&(st?(t=xe,s=s.stateNode,t.nodeType===8?ta(t.parentNode,s):t.nodeType===1&&ta(t,s),Mn(t)):ta(xe,s.stateNode));break;case 4:n=xe,i=st,xe=s.stateNode.containerInfo,st=!0,Tt(t,e,s),xe=n,st=i;break;case 0:case 11:case 14:case 15:if(!je&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&al(s,e,l),i=i.next}while(i!==n)}Tt(t,e,s);break;case 1:if(!je&&(Ms(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(o){ae(s,e,o)}Tt(t,e,s);break;case 21:Tt(t,e,s);break;case 22:s.mode&1?(je=(n=je)||s.memoizedState!==null,Tt(t,e,s),je=n):Tt(t,e,s);break;default:Tt(t,e,s)}}function $c(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new h0),e.forEach(function(n){var i=j0.bind(null,t,n);s.has(n)||(s.add(n),n.then(i,i))})}}function Ze(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var i=s[n];try{var a=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:xe=o.stateNode,st=!1;break e;case 3:xe=o.stateNode.containerInfo,st=!0;break e;case 4:xe=o.stateNode.containerInfo,st=!0;break e}o=o.return}if(xe===null)throw Error(A(160));oh(a,l,i),xe=null,st=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){ae(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ch(e,t),e=e.sibling}function ch(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ze(e,t),ct(t),n&4){try{Tn(3,t,t.return),Ci(3,t)}catch(v){ae(t,t.return,v)}try{Tn(5,t,t.return)}catch(v){ae(t,t.return,v)}}break;case 1:Ze(e,t),ct(t),n&512&&s!==null&&Ms(s,s.return);break;case 5:if(Ze(e,t),ct(t),n&512&&s!==null&&Ms(s,s.return),t.flags&32){var i=t.stateNode;try{Rn(i,"")}catch(v){ae(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,l=s!==null?s.memoizedProps:a,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&Du(i,a),Oa(o,l);var u=Oa(o,a);for(l=0;l<c.length;l+=2){var d=c[l],f=c[l+1];d==="style"?Ru(i,f):d==="dangerouslySetInnerHTML"?Lu(i,f):d==="children"?Rn(i,f):Ol(i,d,f,u)}switch(o){case"input":Ea(i,a);break;case"textarea":Iu(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var b=a.value;b!=null?Bs(i,!!a.multiple,b,!1):p!==!!a.multiple&&(a.defaultValue!=null?Bs(i,!!a.multiple,a.defaultValue,!0):Bs(i,!!a.multiple,a.multiple?[]:"",!1))}i[Wn]=a}catch(v){ae(t,t.return,v)}}break;case 6:if(Ze(e,t),ct(t),n&4){if(t.stateNode===null)throw Error(A(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(v){ae(t,t.return,v)}}break;case 3:if(Ze(e,t),ct(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Mn(e.containerInfo)}catch(v){ae(t,t.return,v)}break;case 4:Ze(e,t),ct(t);break;case 13:Ze(e,t),ct(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(fo=oe())),n&4&&$c(t);break;case 22:if(d=s!==null&&s.memoizedState!==null,t.mode&1?(je=(u=je)||d,Ze(e,t),je=u):Ze(e,t),ct(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(U=t,d=t.child;d!==null;){for(f=U=d;U!==null;){switch(p=U,b=p.child,p.tag){case 0:case 11:case 14:case 15:Tn(4,p,p.return);break;case 1:Ms(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){n=p,s=p.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){ae(n,s,v)}}break;case 5:Ms(p,p.return);break;case 22:if(p.memoizedState!==null){Uc(f);continue}}b!==null?(b.return=p,U=b):Uc(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,c=f.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Au("display",l))}catch(v){ae(t,t.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){ae(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ze(e,t),ct(t),n&4&&$c(t);break;case 21:break;default:Ze(e,t),ct(t)}}function ct(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(lh(s)){var n=s;break e}s=s.return}throw Error(A(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Rn(i,""),n.flags&=-33);var a=Rc(t);cl(t,a,i);break;case 3:case 4:var l=n.stateNode.containerInfo,o=Rc(t);ol(t,o,l);break;default:throw Error(A(161))}}catch(c){ae(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function m0(t,e,s){U=t,uh(t)}function uh(t,e,s){for(var n=(t.mode&1)!==0;U!==null;){var i=U,a=i.child;if(i.tag===22&&n){var l=i.memoizedState!==null||Nr;if(!l){var o=i.alternate,c=o!==null&&o.memoizedState!==null||je;o=Nr;var u=je;if(Nr=l,(je=c)&&!u)for(U=i;U!==null;)l=U,c=l.child,l.tag===22&&l.memoizedState!==null?Mc(i):c!==null?(c.return=l,U=c):Mc(i);for(;a!==null;)U=a,uh(a),a=a.sibling;U=i,Nr=o,je=u}Fc(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,U=a):Fc(t)}}function Fc(t){for(;U!==null;){var e=U;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:je||Ci(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!je)if(s===null)n.componentDidMount();else{var i=e.elementType===e.type?s.memoizedProps:tt(e.type,s.memoizedProps);n.componentDidUpdate(i,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&jc(e,a,n);break;case 3:var l=e.updateQueue;if(l!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}jc(e,l,s)}break;case 5:var o=e.stateNode;if(s===null&&e.flags&4){s=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Mn(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}je||e.flags&512&&ll(e)}catch(p){ae(e,e.return,p)}}if(e===t){U=null;break}if(s=e.sibling,s!==null){s.return=e.return,U=s;break}U=e.return}}function Uc(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var s=e.sibling;if(s!==null){s.return=e.return,U=s;break}U=e.return}}function Mc(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Ci(4,e)}catch(c){ae(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){ae(e,i,c)}}var a=e.return;try{ll(e)}catch(c){ae(e,a,c)}break;case 5:var l=e.return;try{ll(e)}catch(c){ae(e,l,c)}}}catch(c){ae(e,e.return,c)}if(e===t){U=null;break}var o=e.sibling;if(o!==null){o.return=e.return,U=o;break}U=e.return}}var p0=Math.ceil,ci=Et.ReactCurrentDispatcher,uo=Et.ReactCurrentOwner,Ke=Et.ReactCurrentBatchConfig,G=0,ge=null,ce=null,ve=0,Re=0,zs=Jt(0),fe=0,Jn=null,ps=0,Ei=0,ho=0,Pn=null,Te=null,fo=0,en=1/0,xt=null,ui=!1,ul=null,Vt=null,Sr=!1,Ft=null,di=0,Dn=0,dl=null,zr=-1,Br=0;function Se(){return G&6?oe():zr!==-1?zr:zr=oe()}function Wt(t){return t.mode&1?G&2&&ve!==0?ve&-ve:Xm.transition!==null?(Br===0&&(Br=Ku()),Br):(t=Y,t!==0||(t=window.event,t=t===void 0?16:td(t.type)),t):1}function at(t,e,s,n){if(50<Dn)throw Dn=0,dl=null,Error(A(185));sr(t,s,n),(!(G&2)||t!==ge)&&(t===ge&&(!(G&2)&&(Ei|=s),fe===4&&At(t,ve)),Ae(t,n),s===1&&G===0&&!(e.mode&1)&&(en=oe()+500,ki&&Xt()))}function Ae(t,e){var s=t.callbackNode;Xf(t,e);var n=Kr(t,t===ge?ve:0);if(n===0)s!==null&&Go(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&Go(s),e===1)t.tag===0?Jm(zc.bind(null,t)):bd(zc.bind(null,t)),Qm(function(){!(G&6)&&Xt()}),s=null;else{switch(Gu(n)){case 1:s=Fl;break;case 4:s=Hu;break;case 16:s=Qr;break;case 536870912:s=Qu;break;default:s=Qr}s=vh(s,dh.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function dh(t,e){if(zr=-1,Br=0,G&6)throw Error(A(327));var s=t.callbackNode;if(Qs()&&t.callbackNode!==s)return null;var n=Kr(t,t===ge?ve:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=hi(t,n);else{e=n;var i=G;G|=2;var a=fh();(ge!==t||ve!==e)&&(xt=null,en=oe()+500,us(t,e));do try{v0();break}catch(o){hh(t,o)}while(!0);Jl(),ci.current=a,G=i,ce!==null?e=0:(ge=null,ve=0,e=fe)}if(e!==0){if(e===2&&(i=Fa(t),i!==0&&(n=i,e=hl(t,i))),e===1)throw s=Jn,us(t,0),At(t,n),Ae(t,oe()),s;if(e===6)At(t,n);else{if(i=t.current.alternate,!(n&30)&&!g0(i)&&(e=hi(t,n),e===2&&(a=Fa(t),a!==0&&(n=a,e=hl(t,a))),e===1))throw s=Jn,us(t,0),At(t,n),Ae(t,oe()),s;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(A(345));case 2:rs(t,Te,xt);break;case 3:if(At(t,n),(n&130023424)===n&&(e=fo+500-oe(),10<e)){if(Kr(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Se(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ha(rs.bind(null,t,Te,xt),e);break}rs(t,Te,xt);break;case 4:if(At(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var l=31-it(n);a=1<<l,l=e[l],l>i&&(i=l),n&=~a}if(n=i,n=oe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*p0(n/1960))-n,10<n){t.timeoutHandle=Ha(rs.bind(null,t,Te,xt),n);break}rs(t,Te,xt);break;case 5:rs(t,Te,xt);break;default:throw Error(A(329))}}}return Ae(t,oe()),t.callbackNode===s?dh.bind(null,t):null}function hl(t,e){var s=Pn;return t.current.memoizedState.isDehydrated&&(us(t,e).flags|=256),t=hi(t,e),t!==2&&(e=Te,Te=s,e!==null&&fl(e)),t}function fl(t){Te===null?Te=t:Te.push.apply(Te,t)}function g0(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var i=s[n],a=i.getSnapshot;i=i.value;try{if(!lt(a(),i))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function At(t,e){for(e&=~ho,e&=~Ei,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-it(e),n=1<<s;t[s]=-1,e&=~n}}function zc(t){if(G&6)throw Error(A(327));Qs();var e=Kr(t,0);if(!(e&1))return Ae(t,oe()),null;var s=hi(t,e);if(t.tag!==0&&s===2){var n=Fa(t);n!==0&&(e=n,s=hl(t,n))}if(s===1)throw s=Jn,us(t,0),At(t,e),Ae(t,oe()),s;if(s===6)throw Error(A(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rs(t,Te,xt),Ae(t,oe()),null}function mo(t,e){var s=G;G|=1;try{return t(e)}finally{G=s,G===0&&(en=oe()+500,ki&&Xt())}}function gs(t){Ft!==null&&Ft.tag===0&&!(G&6)&&Qs();var e=G;G|=1;var s=Ke.transition,n=Y;try{if(Ke.transition=null,Y=1,t)return t()}finally{Y=n,Ke.transition=s,G=e,!(G&6)&&Xt()}}function po(){Re=zs.current,te(zs)}function us(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,Hm(s)),ce!==null)for(s=ce.return;s!==null;){var n=s;switch(Kl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Zr();break;case 3:Xs(),te(Oe),te(_e),no();break;case 5:so(n);break;case 4:Xs();break;case 13:te(ne);break;case 19:te(ne);break;case 10:Xl(n.type._context);break;case 22:case 23:po()}s=s.return}if(ge=t,ce=t=Ht(t.current,null),ve=Re=e,fe=0,Jn=null,ho=Ei=ps=0,Te=Pn=null,os!==null){for(e=0;e<os.length;e++)if(s=os[e],n=s.interleaved,n!==null){s.interleaved=null;var i=n.next,a=s.pending;if(a!==null){var l=a.next;a.next=i,n.next=l}s.pending=n}os=null}return t}function hh(t,e){do{var s=ce;try{if(Jl(),Fr.current=oi,li){for(var n=re.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}li=!1}if(ms=0,pe=he=re=null,En=!1,Kn=0,uo.current=null,s===null||s.return===null){fe=1,Jn=e,ce=null;break}e:{var a=t,l=s.return,o=s,c=e;if(e=ve,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var b=Ec(l);if(b!==null){b.flags&=-257,Tc(b,l,o,a,e),b.mode&1&&Cc(a,u,e),e=b,c=u;var g=e.updateQueue;if(g===null){var v=new Set;v.add(c),e.updateQueue=v}else g.add(c);break e}else{if(!(e&1)){Cc(a,u,e),go();break e}c=Error(A(426))}}else if(se&&o.mode&1){var N=Ec(l);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Tc(N,l,o,a,e),Gl(Zs(c,o));break e}}a=c=Zs(c,o),fe!==4&&(fe=2),Pn===null?Pn=[a]:Pn.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var x=Gd(a,c,e);wc(a,x);break e;case 1:o=c;var m=a.type,h=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Vt===null||!Vt.has(h)))){a.flags|=65536,e&=-e,a.lanes|=e;var j=Yd(a,o,e);wc(a,j);break e}}a=a.return}while(a!==null)}ph(s)}catch(k){e=k,ce===s&&s!==null&&(ce=s=s.return);continue}break}while(!0)}function fh(){var t=ci.current;return ci.current=oi,t===null?oi:t}function go(){(fe===0||fe===3||fe===2)&&(fe=4),ge===null||!(ps&268435455)&&!(Ei&268435455)||At(ge,ve)}function hi(t,e){var s=G;G|=2;var n=fh();(ge!==t||ve!==e)&&(xt=null,us(t,e));do try{x0();break}catch(i){hh(t,i)}while(!0);if(Jl(),G=s,ci.current=n,ce!==null)throw Error(A(261));return ge=null,ve=0,fe}function x0(){for(;ce!==null;)mh(ce)}function v0(){for(;ce!==null&&!qf();)mh(ce)}function mh(t){var e=xh(t.alternate,t,Re);t.memoizedProps=t.pendingProps,e===null?ph(t):ce=e,uo.current=null}function ph(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=d0(s,e),s!==null){s.flags&=32767,ce=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{fe=6,ce=null;return}}else if(s=u0(s,e,Re),s!==null){ce=s;return}if(e=e.sibling,e!==null){ce=e;return}ce=e=t}while(e!==null);fe===0&&(fe=5)}function rs(t,e,s){var n=Y,i=Ke.transition;try{Ke.transition=null,Y=1,y0(t,e,s,n)}finally{Ke.transition=i,Y=n}return null}function y0(t,e,s,n){do Qs();while(Ft!==null);if(G&6)throw Error(A(327));s=t.finishedWork;var i=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(A(177));t.callbackNode=null,t.callbackPriority=0;var a=s.lanes|s.childLanes;if(Zf(t,a),t===ge&&(ce=ge=null,ve=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Sr||(Sr=!0,vh(Qr,function(){return Qs(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=Ke.transition,Ke.transition=null;var l=Y;Y=1;var o=G;G|=4,uo.current=null,f0(t,s),ch(s,t),Um(Va),Gr=!!qa,Va=qa=null,t.current=s,m0(s),Vf(),G=o,Y=l,Ke.transition=a}else t.current=s;if(Sr&&(Sr=!1,Ft=t,di=i),a=t.pendingLanes,a===0&&(Vt=null),Qf(s.stateNode),Ae(t,oe()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)i=e[s],n(i.value,{componentStack:i.stack,digest:i.digest});if(ui)throw ui=!1,t=ul,ul=null,t;return di&1&&t.tag!==0&&Qs(),a=t.pendingLanes,a&1?t===dl?Dn++:(Dn=0,dl=t):Dn=0,Xt(),null}function Qs(){if(Ft!==null){var t=Gu(di),e=Ke.transition,s=Y;try{if(Ke.transition=null,Y=16>t?16:t,Ft===null)var n=!1;else{if(t=Ft,Ft=null,di=0,G&6)throw Error(A(331));var i=G;for(G|=4,U=t.current;U!==null;){var a=U,l=a.child;if(U.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(U=u;U!==null;){var d=U;switch(d.tag){case 0:case 11:case 15:Tn(8,d,a)}var f=d.child;if(f!==null)f.return=d,U=f;else for(;U!==null;){d=U;var p=d.sibling,b=d.return;if(ah(d),d===u){U=null;break}if(p!==null){p.return=b,U=p;break}U=b}}}var g=a.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var N=v.sibling;v.sibling=null,v=N}while(v!==null)}}U=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,U=l;else e:for(;U!==null;){if(a=U,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Tn(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,U=x;break e}U=a.return}}var m=t.current;for(U=m;U!==null;){l=U;var h=l.child;if(l.subtreeFlags&2064&&h!==null)h.return=l,U=h;else e:for(l=m;U!==null;){if(o=U,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ci(9,o)}}catch(k){ae(o,o.return,k)}if(o===l){U=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,U=j;break e}U=o.return}}if(G=i,Xt(),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(yi,t)}catch{}n=!0}return n}finally{Y=s,Ke.transition=e}}return!1}function Bc(t,e,s){e=Zs(s,e),e=Gd(t,e,1),t=qt(t,e,1),e=Se(),t!==null&&(sr(t,1,e),Ae(t,e))}function ae(t,e,s){if(t.tag===3)Bc(t,t,s);else for(;e!==null;){if(e.tag===3){Bc(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Vt===null||!Vt.has(n))){t=Zs(s,t),t=Yd(e,t,1),e=qt(e,t,1),t=Se(),e!==null&&(sr(e,1,t),Ae(e,t));break}}e=e.return}}function b0(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=Se(),t.pingedLanes|=t.suspendedLanes&s,ge===t&&(ve&s)===s&&(fe===4||fe===3&&(ve&130023424)===ve&&500>oe()-fo?us(t,0):ho|=s),Ae(t,e)}function gh(t,e){e===0&&(t.mode&1?(e=gr,gr<<=1,!(gr&130023424)&&(gr=4194304)):e=1);var s=Se();t=St(t,e),t!==null&&(sr(t,e,s),Ae(t,s))}function w0(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),gh(t,s)}function j0(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(A(314))}n!==null&&n.delete(e),gh(t,s)}var xh;xh=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||Oe.current)De=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return De=!1,c0(t,e,s);De=!!(t.flags&131072)}else De=!1,se&&e.flags&1048576&&wd(e,si,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Mr(t,e),t=e.pendingProps;var i=Gs(e,_e.current);Hs(e,s),i=io(null,e,n,t,i,s);var a=ao();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Le(n)?(a=!0,ei(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,eo(e),i.updater=Si,e.stateNode=i,i._reactInternals=e,Za(e,n,t,s),e=sl(null,e,n,!0,a,s)):(e.tag=0,se&&a&&Ql(e),Ne(null,e,i,s),e=e.child),e;case 16:n=e.elementType;e:{switch(Mr(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=k0(n),t=tt(n,t),i){case 0:e=tl(null,e,n,t,s);break e;case 1:e=Ic(null,e,n,t,s);break e;case 11:e=Pc(null,e,n,t,s);break e;case 14:e=Dc(null,e,n,tt(n.type,t),s);break e}throw Error(A(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:tt(n,i),tl(t,e,n,i,s);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:tt(n,i),Ic(t,e,n,i,s);case 3:e:{if(eh(e),t===null)throw Error(A(387));n=e.pendingProps,a=e.memoizedState,i=a.element,Cd(t,e),ii(e,n,null,s);var l=e.memoizedState;if(n=l.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Zs(Error(A(423)),e),e=Oc(t,e,n,s,i);break e}else if(n!==i){i=Zs(Error(A(424)),e),e=Oc(t,e,n,s,i);break e}else for($e=Bt(e.stateNode.containerInfo.firstChild),Fe=e,se=!0,rt=null,s=Nd(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ys(),n===i){e=Ct(t,e,s);break e}Ne(t,e,n,s)}e=e.child}return e;case 5:return Ed(e),t===null&&Ya(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,l=i.children,Wa(n,i)?l=null:a!==null&&Wa(n,a)&&(e.flags|=32),Zd(t,e),Ne(t,e,l,s),e.child;case 6:return t===null&&Ya(e),null;case 13:return th(t,e,s);case 4:return to(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Js(e,null,n,s):Ne(t,e,n,s),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:tt(n,i),Pc(t,e,n,i,s);case 7:return Ne(t,e,e.pendingProps,s),e.child;case 8:return Ne(t,e,e.pendingProps.children,s),e.child;case 12:return Ne(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,l=i.value,Z(ni,n._currentValue),n._currentValue=l,a!==null)if(lt(a.value,l)){if(a.children===i.children&&!Oe.current){e=Ct(t,e,s);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=jt(-1,s&-s),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=s,c=a.alternate,c!==null&&(c.lanes|=s),Ja(a.return,s,e),o.lanes|=s;break}c=c.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(A(341));l.lanes|=s,o=l.alternate,o!==null&&(o.lanes|=s),Ja(l,s,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}Ne(t,e,i.children,s),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Hs(e,s),i=Ye(i),n=n(i),e.flags|=1,Ne(t,e,n,s),e.child;case 14:return n=e.type,i=tt(n,e.pendingProps),i=tt(n.type,i),Dc(t,e,n,i,s);case 15:return Jd(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:tt(n,i),Mr(t,e),e.tag=1,Le(n)?(t=!0,ei(e)):t=!1,Hs(e,s),Kd(e,n,i),Za(e,n,i,s),sl(null,e,n,!0,t,s);case 19:return sh(t,e,s);case 22:return Xd(t,e,s)}throw Error(A(156,e.tag))};function vh(t,e){return Wu(t,e)}function _0(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qe(t,e,s,n){return new _0(t,e,s,n)}function xo(t){return t=t.prototype,!(!t||!t.isReactComponent)}function k0(t){if(typeof t=="function")return xo(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Al)return 11;if(t===Rl)return 14}return 2}function Ht(t,e){var s=t.alternate;return s===null?(s=Qe(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function qr(t,e,s,n,i,a){var l=2;if(n=t,typeof t=="function")xo(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Ds:return ds(s.children,i,a,e);case Ll:l=8,i|=8;break;case _a:return t=Qe(12,s,e,i|2),t.elementType=_a,t.lanes=a,t;case ka:return t=Qe(13,s,e,i),t.elementType=ka,t.lanes=a,t;case Na:return t=Qe(19,s,e,i),t.elementType=Na,t.lanes=a,t;case Eu:return Ti(s,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Su:l=10;break e;case Cu:l=9;break e;case Al:l=11;break e;case Rl:l=14;break e;case It:l=16,n=null;break e}throw Error(A(130,t==null?t:typeof t,""))}return e=Qe(l,s,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function ds(t,e,s,n){return t=Qe(7,t,n,e),t.lanes=s,t}function Ti(t,e,s,n){return t=Qe(22,t,n,e),t.elementType=Eu,t.lanes=s,t.stateNode={isHidden:!1},t}function ca(t,e,s){return t=Qe(6,t,null,e),t.lanes=s,t}function ua(t,e,s){return e=Qe(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function N0(t,e,s,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vi(0),this.expirationTimes=Vi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vi(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function vo(t,e,s,n,i,a,l,o,c){return t=new N0(t,e,s,o,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Qe(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},eo(a),t}function S0(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ps,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function yh(t){if(!t)return Kt;t=t._reactInternals;e:{if(vs(t)!==t||t.tag!==1)throw Error(A(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Le(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(A(171))}if(t.tag===1){var s=t.type;if(Le(s))return yd(t,s,e)}return e}function bh(t,e,s,n,i,a,l,o,c){return t=vo(s,n,!0,t,i,a,l,o,c),t.context=yh(null),s=t.current,n=Se(),i=Wt(s),a=jt(n,i),a.callback=e??null,qt(s,a,i),t.current.lanes=i,sr(t,i,n),Ae(t,n),t}function Pi(t,e,s,n){var i=e.current,a=Se(),l=Wt(i);return s=yh(s),e.context===null?e.context=s:e.pendingContext=s,e=jt(a,l),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=qt(i,e,l),t!==null&&(at(t,i,l,a),$r(t,i,l)),l}function fi(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qc(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function yo(t,e){qc(t,e),(t=t.alternate)&&qc(t,e)}function C0(){return null}var wh=typeof reportError=="function"?reportError:function(t){console.error(t)};function bo(t){this._internalRoot=t}Di.prototype.render=bo.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(A(409));Pi(t,e,null,null)};Di.prototype.unmount=bo.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gs(function(){Pi(null,t,null,null)}),e[Nt]=null}};function Di(t){this._internalRoot=t}Di.prototype.unstable_scheduleHydration=function(t){if(t){var e=Xu();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Lt.length&&e!==0&&e<Lt[s].priority;s++);Lt.splice(s,0,t),s===0&&ed(t)}};function wo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ii(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vc(){}function E0(t,e,s,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=fi(l);a.call(u)}}var l=bh(e,n,t,0,null,!1,!1,"",Vc);return t._reactRootContainer=l,t[Nt]=l.current,qn(t.nodeType===8?t.parentNode:t),gs(),l}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=fi(c);o.call(u)}}var c=vo(t,0,!1,null,null,!1,!1,"",Vc);return t._reactRootContainer=c,t[Nt]=c.current,qn(t.nodeType===8?t.parentNode:t),gs(function(){Pi(e,c,s,n)}),c}function Oi(t,e,s,n,i){var a=s._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var o=i;i=function(){var c=fi(l);o.call(c)}}Pi(e,l,t,i)}else l=E0(s,e,t,i,n);return fi(l)}Yu=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=bn(e.pendingLanes);s!==0&&(Ul(e,s|1),Ae(e,oe()),!(G&6)&&(en=oe()+500,Xt()))}break;case 13:gs(function(){var n=St(t,1);if(n!==null){var i=Se();at(n,t,1,i)}}),yo(t,1)}};Ml=function(t){if(t.tag===13){var e=St(t,134217728);if(e!==null){var s=Se();at(e,t,134217728,s)}yo(t,134217728)}};Ju=function(t){if(t.tag===13){var e=Wt(t),s=St(t,e);if(s!==null){var n=Se();at(s,t,e,n)}yo(t,e)}};Xu=function(){return Y};Zu=function(t,e){var s=Y;try{return Y=t,e()}finally{Y=s}};Aa=function(t,e,s){switch(e){case"input":if(Ea(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var i=_i(n);if(!i)throw Error(A(90));Pu(n),Ea(n,i)}}}break;case"textarea":Iu(t,s);break;case"select":e=s.value,e!=null&&Bs(t,!!s.multiple,e,!1)}};Uu=mo;Mu=gs;var T0={usingClientEntryPoint:!1,Events:[rr,As,_i,$u,Fu,mo]},gn={findFiberByHostInstance:ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},P0={bundleType:gn.bundleType,version:gn.version,rendererPackageName:gn.rendererPackageName,rendererConfig:gn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Et.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qu(t),t===null?null:t.stateNode},findFiberByHostInstance:gn.findFiberByHostInstance||C0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cr.isDisabled&&Cr.supportsFiber)try{yi=Cr.inject(P0),ft=Cr}catch{}}Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T0;Be.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wo(e))throw Error(A(200));return S0(t,e,null,s)};Be.createRoot=function(t,e){if(!wo(t))throw Error(A(299));var s=!1,n="",i=wh;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=vo(t,1,!1,null,null,s,!1,n,i),t[Nt]=e.current,qn(t.nodeType===8?t.parentNode:t),new bo(e)};Be.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(A(188)):(t=Object.keys(t).join(","),Error(A(268,t)));return t=qu(e),t=t===null?null:t.stateNode,t};Be.flushSync=function(t){return gs(t)};Be.hydrate=function(t,e,s){if(!Ii(e))throw Error(A(200));return Oi(null,t,e,!0,s)};Be.hydrateRoot=function(t,e,s){if(!wo(t))throw Error(A(405));var n=s!=null&&s.hydratedSources||null,i=!1,a="",l=wh;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),e=bh(e,null,t,1,s??null,i,!1,a,l),t[Nt]=e.current,qn(t),n)for(t=0;t<n.length;t++)s=n[t],i=s._getVersion,i=i(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,i]:e.mutableSourceEagerHydrationData.push(s,i);return new Di(e)};Be.render=function(t,e,s){if(!Ii(e))throw Error(A(200));return Oi(null,t,e,!1,s)};Be.unmountComponentAtNode=function(t){if(!Ii(t))throw Error(A(40));return t._reactRootContainer?(gs(function(){Oi(null,null,t,!1,function(){t._reactRootContainer=null,t[Nt]=null})}),!0):!1};Be.unstable_batchedUpdates=mo;Be.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!Ii(s))throw Error(A(200));if(t==null||t._reactInternals===void 0)throw Error(A(38));return Oi(t,e,s,!1,n)};Be.version="18.3.1-next-f1338f8080-20240426";function jh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jh)}catch(t){console.error(t)}}jh(),ju.exports=Be;var D0=ju.exports,_h,Wc=D0;_h=Wc.createRoot,Wc.hydrateRoot;const I0="modulepreload",O0=function(t){return"/"+t},Hc={},ar=function(e,s,n){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(s.map(c=>{if(c=O0(c),c in Hc)return;Hc[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":I0,u||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((p,b)=>{f.addEventListener("load",p),f.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return i.then(l=>{for(const o of l||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})},L0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ar(async()=>{const{default:n}=await Promise.resolve().then(()=>ln);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class jo extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class A0 extends jo{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Qc extends jo{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Kc extends jo{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ml;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ml||(ml={}));var R0=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(f){l(f)}}function c(d){try{u(n.throw(d))}catch(f){l(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};class $0{constructor(e,{headers:s={},customFetch:n,region:i=ml.Any}={}){this.url=e,this.headers=s,this.region=i,this.fetch=L0(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return R0(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:l}=s;let o={},{region:c}=s;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(o["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=l):typeof l=="string"?(o["Content-Type"]="text/plain",d=l):typeof FormData<"u"&&l instanceof FormData?d=l:(o["Content-Type"]="application/json",d=JSON.stringify(l)));const f=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:d}).catch(v=>{throw new A0(v)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new Qc(f);if(!f.ok)throw new Kc(f);let b=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return b==="application/json"?g=yield f.json():b==="application/octet-stream"?g=yield f.blob():b==="text/event-stream"?g=f:b==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null,response:f}}catch(i){return{data:null,error:i,response:i instanceof Kc||i instanceof Qc?i.context:void 0}}})}}var Pe={},_o={},Li={},lr={},Ai={},Ri={},F0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},tn=F0();const U0=tn.fetch,kh=tn.fetch.bind(tn),Nh=tn.Headers,M0=tn.Request,z0=tn.Response,ln=Object.freeze(Object.defineProperty({__proto__:null,Headers:Nh,Request:M0,Response:z0,default:kh,fetch:U0},Symbol.toStringTag,{value:"Module"})),B0=rf(ln);var $i={};Object.defineProperty($i,"__esModule",{value:!0});let q0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};$i.default=q0;var Sh=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ri,"__esModule",{value:!0});const V0=Sh(B0),W0=Sh($i);let H0=class{constructor(e){var s,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(s=e.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=V0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=new Headers(this.headers),this.headers.set(e,s),this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var l,o,c,u;let d=null,f=null,p=null,b=a.status,g=a.statusText;if(a.ok){if(this.method!=="HEAD"){const m=await a.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?f=m:f=JSON.parse(m))}const N=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");N&&x&&x.length>1&&(p=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,b=406,g="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const N=await a.text();try{d=JSON.parse(N),Array.isArray(d)&&a.status===404&&(f=[],d=null,b=200,g="OK")}catch{a.status===404&&N===""?(b=204,g="No Content"):d={message:N}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,b=200,g="OK"),d&&this.shouldThrowOnError)throw new W0.default(d)}return{error:d,data:f,count:p,status:b,statusText:g}});return this.shouldThrowOnError||(i=i.catch(a=>{var l,o,c;return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(o=a==null?void 0:a.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,s)}returns(){return this}overrideTypes(){return this}};Ri.default=H0;var Q0=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ai,"__esModule",{value:!0});const K0=Q0(Ri);let G0=class extends K0.default{select(e){let s=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!s?"":(i==='"'&&(s=!s),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const l=a?`${a}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(l,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:l="text"}={}){var o;const c=[e?"analyze":null,s?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${u}"; options=${c};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ai.default=G0;var Y0=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lr,"__esModule",{value:!0});const J0=Y0(Ai);let X0=class extends J0.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${l}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};lr.default=X0;var Z0=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Li,"__esModule",{value:!0});const xn=Z0(lr);let ep=class{constructor(e,{headers:s={},schema:n,fetch:i}){this.url=e,this.headers=new Headers(s),this.schema=n,this.fetch=i}select(e,{head:s=!1,count:n}={}){const i=s?"HEAD":"GET";let a=!1;const l=(e??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",l),n&&this.headers.append("Prefer",`count=${n}`),new xn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:s,defaultToNull:n=!0}={}){var i;const a="POST";if(s&&this.headers.append("Prefer",`count=${s}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new xn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){var l;const o="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new xn.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(e,{count:s}={}){var n;const i="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new xn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var s;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new xn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};Li.default=ep;var Ch=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_o,"__esModule",{value:!0});const tp=Ch(Li),sp=Ch(lr);let np=class Eh{constructor(e,{headers:s={},schema:n,fetch:i}={}){this.url=e,this.headers=new Headers(s),this.schemaName=n,this.fetch=i}from(e){const s=new URL(`${this.url}/${e}`);return new tp.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Eh(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:i=!1,count:a}={}){var l;let o;const c=new URL(`${this.url}/rpc/${e}`);let u;n||i?(o=n?"HEAD":"GET",Object.entries(s).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{c.searchParams.append(f,p)})):(o="POST",u=s);const d=new Headers(this.headers);return a&&d.set("Prefer",`count=${a}`),new sp.default({method:o,url:c,headers:d,schema:this.schemaName,body:u,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};_o.default=np;var on=Ge&&Ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.PostgrestError=Pe.PostgrestBuilder=Pe.PostgrestTransformBuilder=Pe.PostgrestFilterBuilder=Pe.PostgrestQueryBuilder=Pe.PostgrestClient=void 0;const Th=on(_o);Pe.PostgrestClient=Th.default;const Ph=on(Li);Pe.PostgrestQueryBuilder=Ph.default;const Dh=on(lr);Pe.PostgrestFilterBuilder=Dh.default;const Ih=on(Ai);Pe.PostgrestTransformBuilder=Ih.default;const Oh=on(Ri);Pe.PostgrestBuilder=Oh.default;const Lh=on($i);Pe.PostgrestError=Lh.default;var rp=Pe.default={PostgrestClient:Th.default,PostgrestQueryBuilder:Ph.default,PostgrestFilterBuilder:Dh.default,PostgrestTransformBuilder:Ih.default,PostgrestBuilder:Oh.default,PostgrestError:Lh.default};const{PostgrestClient:ip,PostgrestQueryBuilder:Yx,PostgrestFilterBuilder:Jx,PostgrestTransformBuilder:Xx,PostgrestBuilder:Zx,PostgrestError:ev}=rp;class ap{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const n=s.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const n=this.getWebSocketConstructor();return new n(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const lp="2.15.5",op=`realtime-js/${lp}`,cp="1.0.0",pl=1e4,up=1e3,dp=100;var In;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(In||(In={}));var ue;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ue||(ue={}));var nt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(nt||(nt={}));var gl;(function(t){t.websocket="websocket"})(gl||(gl={}));var as;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(as||(as={}));class hp{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const i=s.getUint8(1),a=s.getUint8(2);let l=this.HEADER_LENGTH+2;const o=n.decode(e.slice(l,l+i));l=l+i;const c=n.decode(e.slice(l,l+a));l=l+a;const u=JSON.parse(n.decode(e.slice(l,e.byteLength)));return{ref:null,topic:o,event:c,payload:u}}}class Ah{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var X;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(X||(X={}));const Gc=(t,e,s={})=>{var n;const i=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,l)=>(a[l]=fp(l,t,e,i),a),{})},fp=(t,e,s,n)=>{const i=e.find(o=>o.name===t),a=i==null?void 0:i.type,l=s[t];return a&&!n.includes(a)?Rh(a,l):xl(l)},Rh=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return xp(e,s)}switch(t){case X.bool:return mp(e);case X.float4:case X.float8:case X.int2:case X.int4:case X.int8:case X.numeric:case X.oid:return pp(e);case X.json:case X.jsonb:return gp(e);case X.timestamp:return vp(e);case X.abstime:case X.date:case X.daterange:case X.int4range:case X.int8range:case X.money:case X.reltime:case X.text:case X.time:case X.timestamptz:case X.timetz:case X.tsrange:case X.tstzrange:return xl(e);default:return xl(e)}},xl=t=>t,mp=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},pp=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},gp=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},xp=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let a;const l=t.slice(1,s);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(o=>Rh(e,o))}return t},vp=t=>typeof t=="string"?t.replace(" ","T"):t,$h=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class da{constructor(e,s,n={},i=pl){this.channel=e,this.event=s,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Yc;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Yc||(Yc={}));class On{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=On.syncState(this.state,i,a,l),this.pendingDiffs.forEach(c=>{this.state=On.syncDiff(this.state,c,a,l)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=On.syncDiff(this.state,i,a,l),o())}),this.onJoin((i,a,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:l})}),this.onLeave((i,a,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,i){const a=this.cloneDeep(e),l=this.transformState(s),o={},c={};return this.map(a,(u,d)=>{l[u]||(c[u]=d)}),this.map(l,(u,d)=>{const f=a[u];if(f){const p=d.map(N=>N.presence_ref),b=f.map(N=>N.presence_ref),g=d.filter(N=>b.indexOf(N.presence_ref)<0),v=f.filter(N=>p.indexOf(N.presence_ref)<0);g.length>0&&(o[u]=g),v.length>0&&(c[u]=v)}else o[u]=d}),this.syncDiff(a,{joins:o,leaves:c},n,i)}static syncDiff(e,s,n,i){const{joins:a,leaves:l}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(o,c)=>{var u;const d=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(c),d.length>0){const f=e[o].map(b=>b.presence_ref),p=d.filter(b=>f.indexOf(b.presence_ref)<0);e[o].unshift(...p)}n(o,d,c)}),this.map(l,(o,c)=>{let u=e[o];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[o]=u,i(o,u,c),u.length===0&&delete e[o]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const i=e[n];return"metas"in i?s[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):s[n]=i,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Jc;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Jc||(Jc={}));var Ln;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ln||(Ln={}));var vt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(vt||(vt={}));class ko{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=ue.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new da(this,nt.join,this.params,this.timeout),this.rejoinTimer=new Ah(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ue.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ue.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ue.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ue.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ue.errored,this.rejoinTimer.scheduleTimeout())}),this._on(nt.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new On(this),this.broadcastEndpointURL=$h(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ue.closed){const{config:{broadcast:l,presence:o,private:c}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(b=>b.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[Ln.PRESENCE]&&this.bindings[Ln.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},p={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(b=>e==null?void 0:e(vt.CHANNEL_ERROR,b)),this._onClose(()=>e==null?void 0:e(vt.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:b})=>{var g;if(this.socket.setAuth(),b===void 0){e==null||e(vt.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,N=(g=v==null?void 0:v.length)!==null&&g!==void 0?g:0,x=[];for(let m=0;m<N;m++){const h=v[m],{filter:{event:j,schema:k,table:y,filter:C}}=h,T=b&&b[m];if(T&&T.event===j&&T.schema===k&&T.table===y&&T.filter===C)x.push(Object.assign(Object.assign({},h),{id:T.id}));else{this.unsubscribe(),this.state=ue.errored,e==null||e(vt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(vt.SUBSCRIBED);return}}).receive("error",b=>{this.state=ue.errored,e==null||e(vt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(vt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this.state===ue.joined&&e===Ln.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,s,n)}async send(e,s={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:l}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,o,c;const u=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ue.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(nt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new da(this,nt.leave,{},e),n.receive("ok",()=>{s(),i("ok")}).receive("timeout",()=>{s(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ue.closed,this.bindings={}}async _fetchWithTimeout(e,s,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),l=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(a),l}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new da(this,e,s,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>dp){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var i,a;const l=e.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=nt;if(n&&[o,c,u,d].indexOf(l)>=0&&n!==this._joinRef())return;let p=this._onMessage(l,s,n);if(s&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var g,v,N;return((g=b.filter)===null||g===void 0?void 0:g.event)==="*"||((N=(v=b.filter)===null||v===void 0?void 0:v.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===l}).map(b=>b.callback(p,n)):(a=this.bindings[l])===null||a===void 0||a.filter(b=>{var g,v,N,x,m,h;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const j=b.id,k=(g=b.filter)===null||g===void 0?void 0:g.event;return j&&((v=s.ids)===null||v===void 0?void 0:v.includes(j))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((N=s.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const j=(m=(x=b==null?void 0:b.filter)===null||x===void 0?void 0:x.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return j==="*"||j===((h=s==null?void 0:s.event)===null||h===void 0?void 0:h.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof p=="object"&&"ids"in p){const g=p.data,{schema:v,table:N,commit_timestamp:x,type:m,errors:h}=g;p=Object.assign(Object.assign({},{schema:v,table:N,commit_timestamp:x,eventType:m,new:{},old:{},errors:h}),this._getPayloadRecords(g))}b.callback(p,n)})}_isClosed(){return this.state===ue.closed}_isJoined(){return this.state===ue.joined}_isJoining(){return this.state===ue.joining}_isLeaving(){return this.state===ue.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const i=e.toLocaleLowerCase(),a={type:i,filter:s,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&ko.isEqual(i.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(nt.close,{},e)}_onError(e){this._on(nt.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ue.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Gc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Gc(e.columns,e.old_record)),s}}const ha=()=>{},Er={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},yp=[1e3,2e3,5e3,1e4],bp=1e4,wp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class jp{constructor(e,s){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pl,this.transport=null,this.heartbeatIntervalMs=Er.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ha,this.ref=0,this.reconnectTimer=null,this.logger=ha,this.conn=null,this.sendBuffer=[],this.serializer=new hp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>ar(async()=>{const{default:o}=await Promise.resolve().then(()=>ln);return{default:o}},void 0).then(({default:o})=>o(...l)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...l)=>a(...l)},!(!((n=s==null?void 0:s.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${gl.websocket}`,this.httpEndpoint=$h(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ap.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:cp}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case In.connecting:return as.Connecting;case In.open:return as.Open;case In.closing:return as.Closing;default:return as.Closed}}isConnected(){return this.connectionState()===as.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new ko(`realtime:${e}`,s,this);return this.channels.push(a),a}}push(e){const{topic:s,event:n,payload:i,ref:a}=e,l=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${s} ${n} (${a})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(up,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Er.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:l}=s,o=l?`(${l})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${i} ${o}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,a,l)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(nt.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${e}${n}${i}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([wp],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s;e?s=e:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const i={access_token:s,version:op};s&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(nt.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(s)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Ah(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Er.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,n,i,a,l,o,c,u,d;if(this.transport=(s=e==null?void 0:e.transport)!==null&&s!==void 0?s:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:pl,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Er.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:ha,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:f=>yp[f-1]||bp,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(f,p)=>p(JSON.stringify(f)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class No extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function de(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class _p extends No{constructor(e,s,n){super(e),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vl extends No{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var kp=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(f){l(f)}}function c(d){try{u(n.throw(d))}catch(f){l(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const Fh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ar(async()=>{const{default:n}=await Promise.resolve().then(()=>ln);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Np=()=>kp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ar(()=>Promise.resolve().then(()=>ln),void 0)).Response:Response}),yl=t=>{if(Array.isArray(t))return t.map(s=>yl(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const i=s.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=yl(n)}),e},Sp=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var ys=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(f){l(f)}}function c(d){try{u(n.throw(d))}catch(f){l(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const fa=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Cp=(t,e,s)=>ys(void 0,void 0,void 0,function*(){const n=yield Np();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(i=>{const a=t.status||500,l=(i==null?void 0:i.statusCode)||a+"";e(new _p(fa(i),a,l))}).catch(i=>{e(new vl(fa(i),i))}):e(new vl(fa(t),t))}),Ep=(t,e,s,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(Sp(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),s))};function or(t,e,s,n,i,a){return ys(this,void 0,void 0,function*(){return new Promise((l,o)=>{t(s,Ep(e,n,i,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>Cp(c,o,n))})})}function mi(t,e,s,n){return ys(this,void 0,void 0,function*(){return or(t,"GET",e,s,n)})}function dt(t,e,s,n,i){return ys(this,void 0,void 0,function*(){return or(t,"POST",e,n,i,s)})}function bl(t,e,s,n,i){return ys(this,void 0,void 0,function*(){return or(t,"PUT",e,n,i,s)})}function Tp(t,e,s,n){return ys(this,void 0,void 0,function*(){return or(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function Uh(t,e,s,n,i){return ys(this,void 0,void 0,function*(){return or(t,"DELETE",e,n,i,s)})}var ke=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(f){l(f)}}function c(d){try{u(n.throw(d))}catch(f){l(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const Pp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Xc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Dp{constructor(e,s={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=s,this.bucketId=n,this.fetch=Fh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,s,n,i){return ke(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},Xc),i);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(o=Object.assign(Object.assign({},o),i.headers));const u=this._removeEmptyFolders(s),d=this._getFinalPath(u),f=yield(e=="PUT"?bl:dt)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(de(a))return{data:null,error:a};throw a}})}upload(e,s,n){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,i){return ke(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",s);try{let c;const u=Object.assign({upsert:Xc.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield bl(this.fetch,o.toString(),c,{headers:d});return{data:{path:a,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(de(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return ke(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);s!=null&&s.upsert&&(i["x-upsert"]="true");const a=yield dt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),l=new URL(this.url+a.url),o=l.searchParams.get("token");if(!o)throw new No("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(de(n))return{data:null,error:n};throw n}})}update(e,s,n){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return ke(this,void 0,void 0,function*(){try{return{data:yield dt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(de(i))return{data:null,error:i};throw i}})}copy(e,s,n){return ke(this,void 0,void 0,function*(){try{return{data:{path:(yield dt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(de(i))return{data:null,error:i};throw i}})}createSignedUrl(e,s,n){return ke(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield dt(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(de(i))return{data:null,error:i};throw i}})}createSignedUrls(e,s,n){return ke(this,void 0,void 0,function*(){try{const i=yield dt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(de(i))return{data:null,error:i};throw i}})}download(e,s){return ke(this,void 0,void 0,function*(){const i=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),l=a?`?${a}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield mi(this.fetch,`${this.url}/${i}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(de(o))return{data:null,error:o};throw o}})}info(e){return ke(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield mi(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:yl(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(de(n))return{data:null,error:n};throw n}})}exists(e){return ke(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield Tp(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(de(n)&&n instanceof vl){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),i=[],a=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";a!==""&&i.push(a);const o=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(e){return ke(this,void 0,void 0,function*(){try{return{data:yield Uh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(de(s))return{data:null,error:s};throw s}})}list(e,s,n){return ke(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Pp),s),{prefix:e||""});return{data:yield dt(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(de(i))return{data:null,error:i};throw i}})}listV2(e,s){return ke(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield dt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(de(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const Ip="2.12.1",Op={"X-Client-Info":`storage-js/${Ip}`};var _s=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(f){l(f)}}function c(d){try{u(n.throw(d))}catch(f){l(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};class Lp{constructor(e,s={},n,i){this.shouldThrowOnError=!1;const a=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},Op),s),this.fetch=Fh(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return _s(this,void 0,void 0,function*(){try{return{data:yield mi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(de(e))return{data:null,error:e};throw e}})}getBucket(e){return _s(this,void 0,void 0,function*(){try{return{data:yield mi(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(de(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return _s(this,void 0,void 0,function*(){try{return{data:yield dt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(de(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return _s(this,void 0,void 0,function*(){try{return{data:yield bl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(de(n))return{data:null,error:n};throw n}})}emptyBucket(e){return _s(this,void 0,void 0,function*(){try{return{data:yield dt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(de(s))return{data:null,error:s};throw s}})}deleteBucket(e){return _s(this,void 0,void 0,function*(){try{return{data:yield Uh(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(de(s))return{data:null,error:s};throw s}})}}class Ap extends Lp{constructor(e,s={},n,i){super(e,s,n,i)}from(e){return new Dp(this.url,this.headers,e,this.fetch)}}const Rp="2.57.4";let jn="";typeof Deno<"u"?jn="deno":typeof document<"u"?jn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?jn="react-native":jn="node";const $p={"X-Client-Info":`supabase-js-${jn}/${Rp}`},Fp={headers:$p},Up={schema:"public"},Mp={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zp={};var Bp=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(f){l(f)}}function c(d){try{u(n.throw(d))}catch(f){l(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};const qp=t=>{let e;return t?e=t:typeof fetch>"u"?e=kh:e=fetch,(...s)=>e(...s)},Vp=()=>typeof Headers>"u"?Nh:Headers,Wp=(t,e,s)=>{const n=qp(s),i=Vp();return(a,l)=>Bp(void 0,void 0,void 0,function*(){var o;const c=(o=yield e())!==null&&o!==void 0?o:t;let u=new i(l==null?void 0:l.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},l),{headers:u}))})};var Hp=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(f){l(f)}}function c(d){try{u(n.throw(d))}catch(f){l(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};function Qp(t){return t.endsWith("/")?t:t+"/"}function Kp(t,e){var s,n;const{db:i,auth:a,realtime:l,global:o}=t,{db:c,auth:u,realtime:d,global:f}=e,p={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),l),storage:{},global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(s=f==null?void 0:f.headers)!==null&&s!==void 0?s:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Hp(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function Gp(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Qp(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Mh="2.71.1",Es=30*1e3,wl=3,ma=wl*Es,Yp="http://localhost:9999",Jp="supabase.auth.token",Xp={"X-Client-Info":`gotrue-js/${Mh}`},jl="X-Supabase-Api-Version",zh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Zp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,eg=10*60*1e3;class So extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function V(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class tg extends So{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function sg(t){return V(t)&&t.name==="AuthApiError"}class Bh extends So{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Zt extends So{constructor(e,s,n,i){super(e,n,i),this.name=s,this.status=n}}class Dt extends Zt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ng(t){return V(t)&&t.name==="AuthSessionMissingError"}class Tr extends Zt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Pr extends Zt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Dr extends Zt{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function rg(t){return V(t)&&t.name==="AuthImplicitGrantRedirectError"}class Zc extends Zt{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _l extends Zt{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function pa(t){return V(t)&&t.name==="AuthRetryableFetchError"}class eu extends Zt{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class kl extends Zt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tu=` 	
\r=`.split(""),ig=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<tu.length;e+=1)t[tu[e].charCodeAt(0)]=-2;for(let e=0;e<pi.length;e+=1)t[pi[e].charCodeAt(0)]=e;return t})();function su(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(pi[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(pi[n]),e.queuedBits-=6}}function qh(t,e,s){const n=ig[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function nu(t){const e=[],s=l=>{e.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=l=>{og(l,n,s)};for(let l=0;l<t.length;l+=1)qh(t.charCodeAt(l),i,a);return e.join("")}function ag(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function lg(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}ag(n,e)}}function og(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function cg(t){const e=[],s={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)qh(t.charCodeAt(i),s,n);return new Uint8Array(e)}function ug(t){const e=[];return lg(t,s=>e.push(s)),new Uint8Array(e)}function dg(t){const e=[],s={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>su(i,s,n)),su(null,s,n),e.join("")}function hg(t){return Math.round(Date.now()/1e3)+t}function fg(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const et=()=>typeof window<"u"&&typeof document<"u",ts={tested:!1,writable:!1},Vh=()=>{if(!et())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ts.tested)return ts.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ts.tested=!0,ts.writable=!0}catch{ts.tested=!0,ts.writable=!1}return ts.writable};function mg(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return s.searchParams.forEach((n,i)=>{e[i]=n}),e}const Wh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ar(async()=>{const{default:n}=await Promise.resolve().then(()=>ln);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},pg=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ts=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},ss=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Pt=async(t,e)=>{await t.removeItem(e)};class Fi{constructor(){this.promise=new Fi.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Fi.promiseConstructor=Promise;function ga(t){const e=t.split(".");if(e.length!==3)throw new kl("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Zp.test(e[n]))throw new kl("JWT not in base64url format");return{header:JSON.parse(nu(e[0])),payload:JSON.parse(nu(e[1])),signature:cg(e[2]),raw:{header:e[0],payload:e[1]}}}async function gg(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function xg(t,e){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){n(l);return}}catch(l){if(!e(a,l)){i(l);return}}})()})}function vg(t){return("0"+t.toString(16)).substr(-2)}function yg(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let i="";for(let a=0;a<56;a++)i+=s.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,vg).join("")}async function bg(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function wg(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await bg(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ks(t,e,s=!1){const n=yg();let i=n;s&&(i+="/PASSWORD_RECOVERY"),await Ts(t,`${e}-code-verifier`,i);const a=await wg(n);return[a,n===a?"plain":"s256"]}const jg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _g(t){const e=t.headers.get(jl);if(!e||!e.match(jg))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function kg(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Ng(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Sg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ns(t){if(!Sg.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xa(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ru(t){return JSON.parse(JSON.stringify(t))}var Cg=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s};const is=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Eg=[502,503,504];async function iu(t){var e;if(!pg(t))throw new _l(is(t),0);if(Eg.includes(t.status))throw new _l(is(t),t.status);let s;try{s=await t.json()}catch(a){throw new Bh(is(a),a)}let n;const i=_g(t);if(i&&i.getTime()>=zh["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new eu(is(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Dt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new eu(is(s),t.status,s.weak_password.reasons);throw new tg(is(s),t.status||500,n)}const Tg=(t,e,s,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),s))};async function Q(t,e,s,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[jl]||(a[jl]=zh["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const l=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await Pg(t,e,s+o,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Pg(t,e,s,n,i,a){const l=Tg(e,n,i,a);let o;try{o=await t(s,Object.assign({},l))}catch(c){throw console.error(c),new _l(is(c),0)}if(o.ok||await iu(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await iu(c)}}function gt(t){var e;let s=null;Lg(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=hg(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function au(t){const e=gt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Rt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Dg(t){return{data:t,error:null}}function Ig(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:i,verification_type:a}=t,l=Cg(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:s,hashed_token:n,redirect_to:i,verification_type:a},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function Og(t){return t}function Lg(t){return t.access_token&&t.refresh_token&&t.expires_in}const va=["global","local","others"];var Ag=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s};class Rg{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=Wh(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=va[0]){if(va.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${va.join(", ")}`);try{return await Q(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(V(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await Q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Rt})}catch(n){if(V(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=Ag(e,["options"]),i=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await Q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Ig,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(V(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await Q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Rt})}catch(s){if(V(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,i,a,l,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Og});if(d.error)throw d.error;const f=await d.json(),p=(l=d.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return b.length>0&&(b.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(g.split(";")[1].split("=")[1]);u[`${N}Page`]=v}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(V(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Ns(e);try{return await Q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Rt})}catch(s){if(V(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Ns(e);try{return await Q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Rt})}catch(n){if(V(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){Ns(e);try{return await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Rt})}catch(n){if(V(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ns(e.userId);try{const{data:s,error:n}=await Q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:n}}catch(s){if(V(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Ns(e.userId),Ns(e.id);try{return{data:await Q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(V(s))return{data:null,error:s};throw s}}}function lu(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function $g(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ss={debug:!!(globalThis&&Vh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Hh extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Fg extends Hh{}async function Ug(t,e,s){Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await s()}finally{Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Fg(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ss.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}$g();const Mg={url:Yp,storageKey:Jp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Xp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ou(t,e,s){return await s()}const Cs={};class Xn{constructor(e){var s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Xn.nextInstanceID,Xn.nextInstanceID+=1,this.instanceID>0&&et()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Mg),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Rg({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Wh(i.fetch),this.lock=i.lock||ou,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:et()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Ug:this.lock=ou,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Vh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lu(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=lu(this.memoryStorage)),et()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,s;return(s=(e=Cs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Cs[this.storageKey]=Object.assign(Object.assign({},Cs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Cs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Cs[this.storageKey]=Object.assign(Object.assign({},Cs[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Mh}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=mg(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),et()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(s,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),rg(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return V(s)?{error:s}:{error:new Bh("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,i;try{const a=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:gt}),{data:l,error:o}=a;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(V(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var s,n,i;try{let a;if("email"in e){const{email:d,password:f,options:p}=e;let b=null,g=null;this.flowType==="pkce"&&([b,g]=await ks(this.storage,this.storageKey)),a=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:f,data:(s=p==null?void 0:p.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:b,code_challenge_method:g},xform:gt})}else if("phone"in e){const{phone:d,password:f,options:p}=e;a=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:gt})}else throw new Pr("You must provide either an email or phone number and a password");const{data:l,error:o}=a;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(V(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let s;if("email"in e){const{email:a,password:l,options:o}=e;s=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:au})}else if("phone"in e){const{phone:a,password:l,options:o}=e;s=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:au})}else throw new Pr("You must provide either an email or phone number and a password");const{data:n,error:i}=s;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Tr}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(s){if(V(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,i,a,l,o,c,u,d,f,p,b;let g,v;if("message"in e)g=e.message,v=e.signature;else{const{chain:N,wallet:x,statement:m,options:h}=e;let j;if(et())if(typeof x=="object")j=x;else{const y=window;if("solana"in y&&typeof y.solana=="object"&&("signIn"in y.solana&&typeof y.solana.signIn=="function"||"signMessage"in y.solana&&typeof y.solana.signMessage=="function"))j=y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(h!=null&&h.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const k=new URL((s=h==null?void 0:h.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in j&&j.signIn){const y=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},h==null?void 0:h.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),m?{statement:m}:null));let C;if(Array.isArray(y)&&y[0]&&typeof y[0]=="object")C=y[0];else if(y&&typeof y=="object"&&"signedMessage"in y&&"signature"in y)C=y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)g=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),v=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${k.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(i=(n=h==null?void 0:h.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=h==null?void 0:h.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${h.signInWithSolana.notBefore}`]:[],...!((l=h==null?void 0:h.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${h.signInWithSolana.expirationTime}`]:[],...!((o=h==null?void 0:h.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${h.signInWithSolana.chainId}`]:[],...!((c=h==null?void 0:h.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${h.signInWithSolana.nonce}`]:[],...!((u=h==null?void 0:h.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${h.signInWithSolana.requestId}`]:[],...!((f=(d=h==null?void 0:h.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...h.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const y=await j.signMessage(new TextEncoder().encode(g),"utf8");if(!y||!(y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=y}}try{const{data:N,error:x}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:dg(v)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:gt});if(x)throw x;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new Tr}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:x})}catch(N){if(V(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(e){const s=await ss(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(s??"").split("/");try{const{data:a,error:l}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:gt});if(await Pt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Tr}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:l})}catch(a){if(V(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:s,provider:n,token:i,access_token:a,nonce:l}=e,o=await Q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:gt}),{data:c,error:u}=o;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Tr}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(s){if(V(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,i,a,l;try{if("email"in e){const{email:o,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ks(this.storage,this.storageKey));const{error:f}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:o,options:c}=e,{data:u,error:d}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Pr("You must provide either an email or phone number.")}catch(o){if(V(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var s,n;try{let i,a;"options"in e&&(i=(s=e.options)===null||s===void 0?void 0:s.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:o}=await Q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:gt});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,u=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(V(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var s,n,i;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await ks(this.storage,this.storageKey)),await Q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Dg})}catch(a){if(V(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new Dt;const{error:i}=await Q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(V(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:a}=e,{error:l}=await Q(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:n,type:i,options:a}=e,{data:l,error:o}=await Q(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new Pr("You must provide either an email or phone number and a type")}catch(s){if(V(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await ss(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<ma:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const l=await ss(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=xa()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!l&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Rt}):await this._useSession(async s=>{var n,i,a;const{data:l,error:o}=s;if(o)throw o;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Dt}:await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Rt})})}catch(s){if(V(s))return ng(s)&&(await this._removeSession(),await Pt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new Dt;const l=i.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await ks(this.storage,this.storageKey));const{data:u,error:d}=await Q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:Rt});if(d)throw d;return l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(V(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Dt;const s=Date.now()/1e3;let n=s,i=!0,a=null;const{payload:l}=ga(e.access_token);if(l.exp&&(n=l.exp,i=n<=s),i){const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(s){if(V(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:l,error:o}=s;if(o)throw o;e=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Dt;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(V(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!et())throw new Dr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Dr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Zc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Dr("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Zc("No code detected.");const{data:m,error:h}=await this._exchangeCodeForSession(e.code);if(h)throw h;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:l,expires_in:o,expires_at:c,token_type:u}=e;if(!a||!o||!l||!u)throw new Dr("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let p=d+f;c&&(p=parseInt(c));const b=p-d;b*1e3<=Es&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${f}s`);const g=p-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,p,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,p,d);const{data:v,error:N}=await this._getUser(a);if(N)throw N;const x={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:f,expires_at:p,refresh_token:l,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(n){if(V(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await ss(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:i,error:a}=s;if(a)return{error:a};const l=(n=i.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:o}=await this.admin.signOut(l,e);if(o&&!(sg(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Pt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=fg(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,i;try{const{data:{session:a},error:l}=s;if(l)throw l;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,s={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await ks(this.storage,this.storageKey,!0));try{return await Q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(a){if(V(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(V(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:i}=await this._useSession(async a=>{var l,o,c,u,d;const{data:f,error:p}=a;if(p)throw p;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Q(this.fetch,"GET",b,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return et()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(V(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,i;const{data:a,error:l}=s;if(l)throw l;return await Q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(V(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await xg(async i=>(i>0&&await gg(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await Q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:gt})),(i,a)=>{const l=200*Math.pow(2,i);return a&&pa(a)&&Date.now()+l-n<Es})}catch(n){if(this._debug(s,"error",n),V(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),et()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await ss(this.storage,this.storageKey);if(i&&this.userStorage){let l=await ss(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await Ts(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:xa()}else if(i&&!i.user&&!i.user){const l=await ss(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(i.user=l.user,await Pt(this.storage,this.storageKey+"-user"),await Ts(this.storage,this.storageKey,i)):i.user=xa()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((s=i.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<ma;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${ma}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),pa(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(i.access_token);!o&&(l!=null&&l.user)?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new Dt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Fi;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new Dt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={session:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(i,"error",a),V(a)){const l={session:null,error:a};return pa(a)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,s,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,s)}catch(c){a.push(c)}});if(await Promise.all(l),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await Ts(this.userStorage,this.storageKey+"-user",{user:s.user});const i=Object.assign({},s);delete i.user;const a=ru(i);await Ts(this.storage,this.storageKey,a)}else{const i=ru(s);await Ts(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Pt(this.storage,this.storageKey),await Pt(this.storage,this.storageKey+"-code-verifier"),await Pt(this.storage,this.storageKey+"-user"),this.userStorage&&await Pt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&et()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Es);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Es);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Es}ms, refresh threshold is ${wl} ticks`),i<=wl&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Hh)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!et()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const i=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,l]=await ks(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(o.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:i,error:a}=s;return a?{data:null,error:a}:await Q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(V(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,i;const{data:a,error:l}=s;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await Q(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(V(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:a}=s;if(a)return{data:null,error:a};const{data:l,error:o}=await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(s){if(V(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:a}=s;return a?{data:null,error:a}:await Q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(V(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],i=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=ga(i.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((n=(s=i.user.factors)===null||s===void 0?void 0:s.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(o=>o.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+eg>i)return n;const{data:a,error:l}=await Q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(o=>o.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:b,error:g}=await this.getSession();if(g||!b.session)return{data:null,error:g};n=b.session.access_token}const{header:i,payload:a,signature:l,raw:{header:o,payload:c}}=ga(n);s!=null&&s.allowExpired||kg(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!u){const{error:b}=await this.getUser(n);if(b)throw b;return{data:{claims:a,header:i,signature:l},error:null}}const d=Ng(i.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,l,ug(`${o}.${c}`)))throw new kl("Invalid JWT signature");return{data:{claims:a,header:i,signature:l},error:null}}catch(n){if(V(n))return{data:null,error:n};throw n}}}Xn.nextInstanceID=0;const zg=Xn;class Bg extends zg{constructor(e){super(e)}}var qg=function(t,e,s,n){function i(a){return a instanceof s?a:new s(function(l){l(a)})}return new(s||(s=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(f){l(f)}}function c(d){try{u(n.throw(d))}catch(f){l(f)}}function u(d){d.done?a(d.value):i(d.value).then(o,c)}u((n=n.apply(t,e||[])).next())})};class Vg{constructor(e,s,n){var i,a,l;this.supabaseUrl=e,this.supabaseKey=s;const o=Gp(e);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:Up,realtime:zp,auth:Object.assign(Object.assign({},Mp),{storageKey:c}),global:Fp},d=Kp(n??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=d.auth)!==null&&l!==void 0?l:{},this.headers,d.global.fetch),this.fetch=Wp(s,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new ip(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Ap(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new $0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return qg(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:l,flowType:o,lock:c,debug:u},d,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Bg({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:l,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:i,userStorage:a,flowType:o,lock:c,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new jp(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Wg=(t,e,s)=>new Vg(t,e,s);function Hg(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Hg()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Qg="https://hzthgncecuquuqtafpxu.supabase.co",Kg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh6dGhnbmNlY3VxdXVxdGFmcHh1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYzMjY4NTgsImV4cCI6MjA4MTkwMjg1OH0.7FHRXyY9RDHBhK8JdmsOD5Njwe0r90OtIK6jtdYxEhc",M=Wg(Qg,Kg),Qh=S.createContext(void 0);function Gg({children:t}){const[e,s]=S.useState(null),[n,i]=S.useState(!0);S.useEffect(()=>{M.auth.getSession().then(({data:{session:u}})=>{s((u==null?void 0:u.user)??null),i(!1)});const{data:{subscription:c}}=M.auth.onAuthStateChange((u,d)=>{(async()=>{if(s((d==null?void 0:d.user)??null),d!=null&&d.user){const{data:f}=await M.from("profiles").select("*").eq("id",d.user.id).maybeSingle();f||await M.from("profiles").insert({id:d.user.id})}})()});return()=>c.unsubscribe()},[]);const a=async(c,u)=>{const{error:d}=await M.auth.signUp({email:c,password:u});if(d)throw d},l=async(c,u)=>{const{error:d}=await M.auth.signInWithPassword({email:c,password:u});if(d)throw d},o=async()=>{const{error:c}=await M.auth.signOut();if(c)throw c};return r.jsx(Qh.Provider,{value:{user:e,loading:n,signUp:a,signIn:l,signOut:o},children:t})}function pt(){const t=S.useContext(Qh);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),q=(t,e)=>{const s=S.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:o="",children:c,...u},d)=>S.createElement("svg",{ref:d,...Yg,width:i,height:i,stroke:n,strokeWidth:l?Number(a)*24/Number(i):a,className:["lucide",`lucide-${Jg(t)}`,o].join(" "),...u},[...e.map(([f,p])=>S.createElement(f,p)),...Array.isArray(c)?c:[c]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=q("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=q("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=q("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=q("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=q("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=q("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=q("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=q("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=q("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=q("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=q("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=q("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=q("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=q("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=q("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=q("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=q("Files",[["path",{d:"M20 7h-3a2 2 0 0 1-2-2V2",key:"x099mo"}],["path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z",key:"18t6ie"}],["path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8",key:"1nja0z"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=q("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=q("Grid2x2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=q("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=q("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=q("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=q("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=q("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=q("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=q("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=q("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=q("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=q("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=q("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=q("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=q("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=q("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=q("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=q("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=q("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=q("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=q("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=q("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=q("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function vx(){const[t,e]=S.useState(!1),[s,n]=S.useState(""),[i,a]=S.useState(""),[l,o]=S.useState(""),[c,u]=S.useState(!1),{signIn:d,signUp:f}=pt(),p=async b=>{b.preventDefault(),o(""),u(!0);try{t?await f(s,i):await d(s,i)}catch(g){o(g.message||"An error occurred")}finally{u(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-500 rounded-2xl mb-4",children:r.jsx(To,{className:"w-8 h-8 text-white"})}),r.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Brand Deal OS"}),r.jsx("p",{className:"text-slate-400",children:"Pricing, pitching, and tracking in one system"})]}),r.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-2xl p-8 shadow-2xl",children:[r.jsxs("form",{onSubmit:p,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-200 mb-2",children:"Email"}),r.jsx("input",{id:"email",type:"email",value:s,onChange:b=>n(b.target.value),className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"you@example.com",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-200 mb-2",children:"Password"}),r.jsx("input",{id:"password",type:"password",value:i,onChange:b=>a(b.target.value),className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"",required:!0,minLength:6})]}),l&&r.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/50 rounded-lg text-red-400 text-sm",children:l}),r.jsx("button",{type:"submit",disabled:c,className:"w-full py-3 px-4 bg-blue-500 hover:bg-blue-600 disabled:bg-slate-600 text-white font-medium rounded-lg transition-colors duration-200",children:c?"Loading...":t?"Sign Up":"Sign In"})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("button",{type:"button",onClick:()=>{e(!t),o("")},className:"text-sm text-slate-400 hover:text-slate-200 transition-colors",children:t?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})})}const Zh={conservative:10,standard:20,premium:30,specialized:40},yx={Awareness:{default:1,low:1,high:1.1},Repurposing:{default:1.15,low:1.1,high:1.3},Conversion:{default:1.1,low:1.05,high:1.25}},bx={mention:1,adSpot:1.15,dedicated:1.75},wx={30:{low:.1,high:.2},60:{low:.2,high:.35},180:{low:.45,high:.75}},jx={30:{low:.15,high:.25},60:{low:.25,high:.4},180:{low:.5,high:.9}},_x={loose:{low:.1,high:.15},tight:{low:.15,high:.25}},kx={Standard:{low:.25,high:.5},Extreme:{low:.75,high:1.5}};function Nx(t,e,s,n){const i=t/1e3*20;let a=1;return(e.includes("Reel")||e.includes("Video"))&&(a*=1.5),e.includes("Story")&&(a*=.5),e.includes("YouTube")&&(a*=2),(n==null?void 0:n.urgency)==="rush"&&(a*=1.25),n!=null&&n.exclusivity&&(a*=1.3),(n==null?void 0:n.usageRights)==="paid"&&(a*=1.5),Math.round(i*a)}function ef(t){const{profile:e,shortFormPosts:s,longFormPosts:n,longFormFactor:i,objective:a,paidUsageDays:l,whitelistingDays:o,exclusivityType:c,exclusivityMonths:u,rushLevel:d}=t,f=s.youtube*e.youtube_shorts_avg_views+s.tiktok*e.tiktok_avg_views+s.instagram*e.instagram_avg_views,p=e.include_youtube_longform??!0?n*e.youtube_avg_views*bx[i]:0,b=f+p,g=C=>e.cpm_tier==="custom"&&e.cpm_custom?e.cpm_custom:Zh[C],v=yx[a],N=b/1e3*g("conservative")*v.low,x=b/1e3*g("standard")*v.default,m=b/1e3*g("premium")*v.high,h={paidUsage:{low:0,high:0},whitelisting:{low:0,high:0},exclusivity:{low:0,high:0},rush:{low:0,high:0}};if(l&&l>0){const C=[30,60,180].reduce((w,P)=>Math.abs(P-l)<Math.abs(w-l)?P:w),T=wx[C];h.paidUsage.low=N*T.low,h.paidUsage.high=m*T.high}if(o&&o>0){const C=[30,60,180].reduce((w,P)=>Math.abs(P-o)<Math.abs(w-o)?P:w),T=jx[C];h.whitelisting.low=N*T.low,h.whitelisting.high=m*T.high}if(c&&u&&u>0){const C=_x[c];h.exclusivity.low=N*C.low*u,h.exclusivity.high=m*C.high*u}if(d&&d!=="None"){const C=kx[d];h.rush.low=N*C.low,h.rush.high=m*C.high}const j=N+h.paidUsage.low+h.whitelisting.low+h.exclusivity.low+h.rush.low,k=x+(h.paidUsage.low+h.paidUsage.high)/2+(h.whitelisting.low+h.whitelisting.high)/2+(h.exclusivity.low+h.exclusivity.high)/2+(h.rush.low+h.rush.high)/2,y=m+h.paidUsage.high+h.whitelisting.high+h.exclusivity.high+h.rush.high;return{low:Math.round(j),standard:Math.round(k),stretch:Math.round(y),breakdown:{expectedViews:Math.round(b),baseFee:{low:Math.round(N),standard:Math.round(x),stretch:Math.round(m)},addOns:h}}}function Sx({onComplete:t}){const{user:e}=pt(),[s,n]=S.useState(1),[i,a]=S.useState(!1),[l,o]=S.useState(!1),[c,u]=S.useState({youtube_avg_views:0,tiktok_avg_views:0,instagram_avg_views:0,youtube_shorts_avg_views:0,cpm_tier:"conservative",cpm_custom:null}),d=async()=>{if(e){a(!0);try{await M.from("profiles").update({...c,onboarding_completed:!0}).eq("id",e.id),t()}catch(p){console.error("Error completing onboarding:",p)}finally{a(!1)}}},f=c.youtube_avg_views>0||c.tiktok_avg_views>0||c.instagram_avg_views>0||c.youtube_shorts_avg_views>0;return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-3xl",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Welcome to Brand Deal OS"}),r.jsx("p",{className:"text-slate-400",children:"Let's set up your pricing system in 4 quick steps"})]}),r.jsx("div",{className:"flex items-center justify-center gap-2 mb-8",children:[1,2,3,4].map(p=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold transition-all ${p===s?"bg-blue-500 text-white scale-110":p<s?"bg-green-500 text-white":"bg-slate-700 text-slate-400"}`,children:p<s?r.jsx(Me,{className:"w-5 h-5"}):p}),p<4&&r.jsx("div",{className:`w-12 h-1 rounded ${p<s?"bg-green-500":"bg-slate-700"}`})]},p))}),r.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-2xl p-8",children:[s===1&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-500/20 rounded-lg",children:r.jsx(Ie,{className:"w-6 h-6 text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Before We Start"}),r.jsx("p",{className:"text-slate-400 text-sm",children:"Quick prep to get accurate pricing"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-5 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:[r.jsxs("p",{className:"text-slate-200 leading-relaxed",children:["To calculate accurate pricing, please ",r.jsx("span",{className:"font-semibold text-white",children:"find the number of views for the last 10 videos"})," from:"]}),r.jsxs("ul",{className:"mt-3 space-y-2 text-slate-300",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full"}),"Instagram Reels"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full"}),"YouTube Shorts"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full"}),"YouTube Long-Form"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full"}),"TikTok"]})]}),r.jsx("p",{className:"mt-4 text-slate-200",children:"Once you have those numbers, come back here and enter the details so we can help you get your deal started!"})]}),r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-slate-900/50 border border-slate-600 rounded-lg",children:[r.jsx("input",{type:"checkbox",id:"step1_ready",checked:l,onChange:p=>o(p.target.checked),className:"mt-1 w-5 h-5 rounded bg-slate-900/50 border-slate-600 text-blue-500 focus:ring-2 focus:ring-blue-500"}),r.jsx("label",{htmlFor:"step1_ready",className:"text-slate-300 cursor-pointer",children:"I have gathered my view counts and I'm ready to continue"})]})]})]}),s===2&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-500/20 rounded-lg",children:r.jsx(Ie,{className:"w-6 h-6 text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Performance Averages"}),r.jsx("p",{className:"text-slate-400 text-sm",children:"Enter at least one platform to get started"})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"YouTube Long-Form Average Views"}),r.jsx("input",{type:"number",value:c.youtube_avg_views,onChange:p=>u({...c,youtube_avg_views:parseInt(p.target.value)||0}),className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Average from last 16 videos"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Used for pricing long-form content"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"YouTube Shorts Average Views"}),r.jsx("input",{type:"number",value:c.youtube_shorts_avg_views,onChange:p=>u({...c,youtube_shorts_avg_views:parseInt(p.target.value)||0}),className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Average from last 10 shorts"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"TikTok Average Views"}),r.jsx("input",{type:"number",value:c.tiktok_avg_views,onChange:p=>u({...c,tiktok_avg_views:parseInt(p.target.value)||0}),className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Average from last 10 posts"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Instagram Reels Average Views"}),r.jsx("input",{type:"number",value:c.instagram_avg_views,onChange:p=>u({...c,instagram_avg_views:parseInt(p.target.value)||0}),className:"w-full px-4 py-3 bg-slate-900/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Average from last 10 reels"})]})]})]}),s===3&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-500/20 rounded-lg",children:r.jsx(bs,{className:"w-6 h-6 text-blue-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Choose Your CPM Tier"}),r.jsx("p",{className:"text-slate-400 text-sm",children:"Start with Conservative and move up as you grow"})]})]}),r.jsx("div",{className:"space-y-3",children:["conservative","standard","premium","specialized"].map(p=>r.jsxs("button",{onClick:()=>u({...c,cpm_tier:p,cpm_custom:null}),className:`w-full p-4 rounded-lg border-2 text-left transition-all ${c.cpm_tier===p?"border-blue-500 bg-blue-500/10":"border-slate-600 bg-slate-900/50 hover:border-slate-500"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-semibold text-white capitalize text-lg",children:p}),r.jsxs("span",{className:"text-blue-400 font-bold text-xl",children:["$",Zh[p]," CPM"]})]}),r.jsxs("div",{className:"text-sm text-slate-400",children:[p==="conservative"&&"Best for new creators building their first rate card",p==="standard"&&"For established creators with consistent engagement",p==="premium"&&"For creators with highly engaged, loyal audiences",p==="specialized"&&"For niche experts with premium, targeted audiences"]})]},p))})]}),s===4&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-green-500/20 rounded-lg",children:r.jsx(Me,{className:"w-6 h-6 text-green-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"You're All Set!"}),r.jsx("p",{className:"text-slate-400 text-sm",children:"Here's how to use Brand Deal OS"})]})]}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsx("div",{className:"p-4 bg-slate-900/50 rounded-lg border border-slate-600",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-500/20 text-blue-400 rounded-lg font-bold flex-shrink-0",children:"1"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold mb-1",children:"Create a Deal Intake"}),r.jsx("p",{className:"text-slate-400 text-sm",children:"Capture brand details, objectives, deliverables, and rights before quoting"})]})]})}),r.jsx("div",{className:"p-4 bg-slate-900/50 rounded-lg border border-slate-600",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-500/20 text-blue-400 rounded-lg font-bold flex-shrink-0",children:"2"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold mb-1",children:"Calculate Your Quote"}),r.jsx("p",{className:"text-slate-400 text-sm",children:"Enter deliverables and the system calculates Low, Standard, and Stretch pricing automatically"})]})]})}),r.jsx("div",{className:"p-4 bg-slate-900/50 rounded-lg border border-slate-600",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-500/20 text-blue-400 rounded-lg font-bold flex-shrink-0",children:"3"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold mb-1",children:"Use the Copy Bank"}),r.jsx("p",{className:"text-slate-400 text-sm",children:"Pre-written scripts for budget asks, quotes, boundaries, and follow-ups"})]})]})}),r.jsx("div",{className:"p-4 bg-slate-900/50 rounded-lg border border-slate-600",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-500/20 text-blue-400 rounded-lg font-bold flex-shrink-0",children:"4"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold mb-1",children:"Track Your Pipeline"}),r.jsx("p",{className:"text-slate-400 text-sm",children:"Monitor deals from Intake through Closed with payment tracking and follow-up reminders"})]})]})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"p-4 bg-blue-500/10 border border-blue-500/50 rounded-lg",children:r.jsxs("p",{className:"text-blue-300 text-sm",children:[r.jsx("strong",{children:"Pro tip:"})," Update your averages monthly in Settings to keep your pricing accurate as your channel grows."]})}),r.jsx("div",{className:"p-4 bg-slate-900/50 border border-slate-600 rounded-lg",children:r.jsxs("p",{className:"text-slate-300 text-sm",children:[r.jsx("strong",{children:"Coming soon:"})," Connect your Instagram, TikTok, and YouTube accounts directly through API integrations to automatically sync your view counts."]})})]})]}),r.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-slate-700",children:[r.jsxs("button",{onClick:()=>n(s-1),disabled:s===1,className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[r.jsx(Po,{className:"w-5 h-5"}),"Back"]}),s<4?r.jsxs("button",{onClick:()=>n(s+1),disabled:s===1&&!l||s===2&&!f,className:"px-6 py-3 bg-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:["Next",r.jsx(Do,{className:"w-5 h-5"})]}):r.jsxs("button",{onClick:d,disabled:i,className:"px-6 py-3 bg-green-500 hover:bg-green-600 disabled:bg-slate-600 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[r.jsx(Me,{className:"w-5 h-5"}),i?"Completing...":"Start Using Brand Deal OS"]})]})]})]})})}const ba={Starter:{shortFormYoutube:1,shortFormTiktok:1,shortFormInstagram:1,longFormPosts:0,longFormFactor:"mention",paidUsage:!1,paidUsageDuration:0,whitelisting:!1,whitelistingDuration:0,exclusivity:!1,exclusivityCategory:"",exclusivityMonths:0,rushLevel:"None"},Core:{shortFormYoutube:1,shortFormTiktok:2,shortFormInstagram:1,longFormPosts:1,longFormFactor:"mention",paidUsage:!1,paidUsageDuration:0,whitelisting:!1,whitelistingDuration:0,exclusivity:!1,exclusivityCategory:"",exclusivityMonths:0,rushLevel:"None"},Premium:{shortFormYoutube:2,shortFormTiktok:3,shortFormInstagram:2,longFormPosts:1,longFormFactor:"adSpot",paidUsage:!0,paidUsageDuration:30,whitelisting:!1,whitelistingDuration:0,exclusivity:!1,exclusivityCategory:"",exclusivityMonths:0,rushLevel:"None"},Platinum:{shortFormYoutube:3,shortFormTiktok:4,shortFormInstagram:3,longFormPosts:2,longFormFactor:"dedicated",paidUsage:!0,paidUsageDuration:60,whitelisting:!0,whitelistingDuration:30,exclusivity:!1,exclusivityCategory:"",exclusivityMonths:0,rushLevel:"None"}};function uu({dealId:t,template:e,onSave:s}){const{user:n}=pt(),[i,a]=S.useState(1),[l,o]=S.useState(!1),[c,u]=S.useState(null),[d,f]=S.useState(""),[p,b]=S.useState(""),[g,v]=S.useState({brand:"",contact_name:"",contact_email:"",product:"",category:"",source:"",objective:(e==null?void 0:e.objective)||"Awareness",outcome_wanted:"",requested_deliverables:"",recommended_package:(e==null?void 0:e.recommended_package)||"",paid_usage:(e==null?void 0:e.paid_usage)||!1,paid_usage_duration:(e==null?void 0:e.paid_usage_duration)||0,whitelisting:(e==null?void 0:e.whitelisting)||!1,whitelisting_duration:(e==null?void 0:e.whitelisting_duration)||0,exclusivity:(e==null?void 0:e.exclusivity)||!1,exclusivity_category:(e==null?void 0:e.exclusivity_category)||"",exclusivity_months:(e==null?void 0:e.exclusivity_months)||0,rush_level:(e==null?void 0:e.rush_level)||"None",budget_shared:!1,budget_range:"",red_flags:"",quote_low:0,quote_standard:0,quote_stretch:0,stage:"Intake",follow_up_count:0,notes:""}),[N,x]=S.useState({shortFormYoutube:(e==null?void 0:e.short_form_youtube)||0,shortFormTiktok:(e==null?void 0:e.short_form_tiktok)||0,shortFormInstagram:(e==null?void 0:e.short_form_instagram)||0,longFormPosts:(e==null?void 0:e.long_form_posts)||0,longFormFactor:(e==null?void 0:e.long_form_factor)||"mention"}),m=[{number:1,title:"Basic Info"},{number:2,title:"Objectives"},{number:3,title:"Add-Ons"},{number:4,title:"Pricing"},{number:5,title:"Review"}];S.useEffect(()=>{n&&(h(),t&&j())},[n,t]),S.useEffect(()=>{if(g.recommended_package&&ba[g.recommended_package]){const w=ba[g.recommended_package];x({shortFormYoutube:w.shortFormYoutube,shortFormTiktok:w.shortFormTiktok,shortFormInstagram:w.shortFormInstagram,longFormPosts:w.longFormPosts,longFormFactor:w.longFormFactor}),v(P=>({...P,paid_usage:w.paidUsage,paid_usage_duration:w.paidUsageDuration,whitelisting:w.whitelisting,whitelisting_duration:w.whitelistingDuration,exclusivity:w.exclusivity,exclusivity_category:w.exclusivityCategory,exclusivity_months:w.exclusivityMonths,rush_level:w.rushLevel}))}},[g.recommended_package]);const h=async()=>{if(!n)return;const{data:w}=await M.from("profiles").select("*").eq("id",n.id).maybeSingle();w&&u(w)},j=async()=>{if(!t)return;const{data:w}=await M.from("deals").select("*").eq("id",t).maybeSingle();w&&v(w)},k=()=>{if(!c){f("Profile not loaded");return}if(!g.objective||g.objective===""){f("Please select an objective");return}const w=ef({profile:c,shortFormPosts:{youtube:N.shortFormYoutube,tiktok:N.shortFormTiktok,instagram:N.shortFormInstagram},longFormPosts:N.longFormPosts,longFormFactor:N.longFormFactor,objective:g.objective,paidUsageDays:g.paid_usage?g.paid_usage_duration:void 0,whitelistingDays:g.whitelisting?g.whitelisting_duration:void 0,exclusivityType:g.exclusivity?g.exclusivity_category.toLowerCase().includes("tight")?"tight":"loose":void 0,exclusivityMonths:g.exclusivity?g.exclusivity_months:void 0,rushLevel:g.rush_level});v({...g,quote_low:w.low,quote_standard:w.standard,quote_stretch:w.stretch}),b(`Calculated: Low $${w.low.toLocaleString()} | Standard $${w.standard.toLocaleString()} | Stretch $${w.stretch.toLocaleString()}`),setTimeout(()=>b(""),5e3)},y=async()=>{if(n){o(!0),f(""),b("");try{if(t){const{error:w}=await M.from("deals").update(g).eq("id",t);if(w)throw w}else{const{error:w}=await M.from("deals").insert({...g,user_id:n.id});if(w)throw w}b("Deal saved successfully!"),setTimeout(()=>b(""),3e3),s&&s()}catch(w){f(w.message)}finally{o(!1)}}},C=()=>{i<m.length&&(a(i+1),window.scrollTo({top:0,behavior:"smooth"}))},T=()=>{i>1&&(a(i-1),window.scrollTo({top:0,behavior:"smooth"}))};return r.jsxs("div",{className:"max-w-5xl mx-auto space-y-6 sm:space-y-8 pb-24 sm:pb-8",children:[e&&r.jsxs("div",{className:"p-3 sm:p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-blue-300 text-xs sm:text-sm",children:"Using template:"}),r.jsx("span",{className:"text-white font-medium text-sm sm:text-base",children:e.name})]}),e.description&&r.jsx("p",{className:"text-blue-300 text-xs sm:text-sm mt-1",children:e.description})]}),r.jsx("div",{className:"mb-6 sm:mb-8",children:r.jsx("div",{className:"flex items-center justify-between mb-4 sm:mb-6 overflow-x-auto pb-2",children:m.map((w,P)=>r.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[r.jsxs("div",{className:"flex flex-col items-center flex-1",children:[r.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center font-semibold text-xs sm:text-sm transition-colors ${w.number===i?"bg-blue-500 text-white":w.number<i?"bg-green-500 text-white":"bg-slate-700 text-slate-400"}`,children:w.number}),r.jsxs("div",{className:`mt-1 sm:mt-2 text-[10px] sm:text-xs font-medium text-center ${w.number===i?"text-blue-400":"text-slate-400"}`,children:[r.jsx("span",{className:"hidden sm:inline",children:w.title}),r.jsx("span",{className:"sm:hidden",children:w.title.split(" ")[0]})]})]}),P<m.length-1&&r.jsx("div",{className:`h-0.5 flex-1 mx-1 sm:mx-2 ${w.number<i?"bg-green-500":"bg-slate-700"}`})]},w.number))})}),r.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-xl p-4 sm:p-6",children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-4 sm:mb-6",children:m[i-1].title}),d&&r.jsxs("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/50 rounded-lg text-red-400 text-sm flex items-start gap-2",children:[r.jsx(Zn,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:d})]}),p&&r.jsx("div",{className:"mb-4 p-3 bg-green-500/10 border border-green-500/50 rounded-lg text-green-400 text-sm",children:p}),i===1&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-200 mb-2",children:"Brand"}),r.jsx("input",{type:"text",value:g.brand,onChange:w=>v({...g,brand:w.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 bg-slate-900/50 border border-slate-600 rounded-lg text-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-200 mb-2",children:"Contact Name"}),r.jsx("input",{type:"text",value:g.contact_name,onChange:w=>v({...g,contact_name:w.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 bg-slate-900/50 border border-slate-600 rounded-lg text-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-200 mb-2",children:"Contact Email"}),r.jsx("input",{type:"email",value:g.contact_email,onChange:w=>v({...g,contact_email:w.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 bg-slate-900/50 border border-slate-600 rounded-lg text-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-200 mb-2",children:"Product"}),r.jsx("input",{type:"text",value:g.product,onChange:w=>v({...g,product:w.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 bg-slate-900/50 border border-slate-600 rounded-lg text-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-200 mb-2",children:"Category"}),r.jsx("input",{type:"text",value:g.category,onChange:w=>v({...g,category:w.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 bg-slate-900/50 border border-slate-600 rounded-lg text-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-200 mb-2",children:"Source"}),r.jsx("input",{type:"text",value:g.source,onChange:w=>v({...g,source:w.target.value}),placeholder:"Where they found you",className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 bg-slate-900/50 border border-slate-600 rounded-lg text-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i===2&&r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-200 mb-2",children:"Objective"}),r.jsxs("select",{value:g.objective,onChange:w=>v({...g,objective:w.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 bg-slate-900/50 border border-slate-600 rounded-lg text-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select objective"}),r.jsx("option",{value:"Awareness",children:"Awareness"}),r.jsx("option",{value:"Repurposing",children:"Repurposing"}),r.jsx("option",{value:"Conversion",children:"Conversion"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-200 mb-2",children:"Recommended Package"}),r.jsxs("select",{value:g.recommended_package,onChange:w=>v({...g,recommended_package:w.target.value}),className:"w-full px-3 sm:px-4 py-2 sm:py-2.5 bg-slate-900/50 border border-slate-600 rounded-lg text-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select package"}),r.jsx("option",{value:"Starter",children:"Starter"}),r.jsx("option",{value:"Core",children:"Core"}),r.jsx("option",{value:"Premium",children:"Premium"}),r.jsx("option",{value:"Platinum",children:"Platinum"}),r.jsx("option",{value:"Custom",children:"Custom"})]})]})]}),g.recommended_package&&ba[g.recommended_package]&&r.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg text-xs sm:text-sm text-blue-300",children:["Smart defaults applied for ",g.recommended_package," package. You can adjust values in the next steps."]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-200 mb-2",children:"Outcome Wanted (Plain English)"}),r.jsx("textarea",{value:g.outcome_wanted,onChange:w=>v({...g,outcome_wanted:w.target.value}),rows:3,className:"w-full px-3 sm:px-4 py-2 bg-slate-900/50 border border-slate-600 rounded-lg text-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-200 mb-2",children:"Requested Deliverables"}),r.jsx("textarea",{value:g.requested_deliverables,onChange:w=>v({...g,requested_deliverables:w.target.value}),rows:4,className:"w-full px-3 sm:px-4 py-2 bg-slate-900/50 border border-slate-600 rounded-lg text-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i===3&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"paid_usage",checked:g.paid_usage,onChange:w=>v({...g,paid_usage:w.target.checked}),className:"w-5 h-5 rounded bg-slate-900/50 border-slate-600 text-blue-500 focus:ring-2 focus:ring-blue-500"}),r.jsx("label",{htmlFor:"paid_usage",className:"text-sm font-medium text-slate-200",children:"Paid Usage"}),g.paid_usage&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",value:g.paid_usage_duration,onChange:w=>v({...g,paid_usage_duration:parseInt(w.target.value)||0}),placeholder:"30",className:"w-20 px-2 py-1 bg-slate-900/50 border border-slate-600 rounded text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-slate-400",children:"days"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"whitelisting",checked:g.whitelisting,onChange:w=>v({...g,whitelisting:w.target.checked}),className:"w-5 h-5 rounded bg-slate-900/50 border-slate-600 text-blue-500 focus:ring-2 focus:ring-blue-500"}),r.jsx("label",{htmlFor:"whitelisting",className:"text-sm font-medium text-slate-200",children:"Whitelisting"}),g.whitelisting&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",value:g.whitelisting_duration,onChange:w=>v({...g,whitelisting_duration:parseInt(w.target.value)||0}),placeholder:"30",className:"w-20 px-2 py-1 bg-slate-900/50 border border-slate-600 rounded text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-slate-400",children:"days"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"exclusivity",checked:g.exclusivity,onChange:w=>v({...g,exclusivity:w.target.checked}),className:"w-5 h-5 rounded bg-slate-900/50 border-slate-600 text-blue-500 focus:ring-2 focus:ring-blue-500"}),r.jsx("label",{htmlFor:"exclusivity",className:"text-sm font-medium text-slate-200",children:"Exclusivity"}),g.exclusivity&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",value:g.exclusivity_months,onChange:w=>v({...g,exclusivity_months:parseInt(w.target.value)||0}),placeholder:"3",className:"w-20 px-2 py-1 bg-slate-900/50 border border-slate-600 rounded text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-slate-400",children:"months"})]})]})]}),g.exclusivity&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Exclusivity Category"}),r.jsx("input",{type:"text",value:g.exclusivity_category,onChange:w=>v({...g,exclusivity_category:w.target.value}),placeholder:"e.g., 'Tight - no health supplements' or 'Loose - no protein powder'",className:"w-full px-4 py-2 bg-slate-900/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Rush Level"}),r.jsxs("select",{value:g.rush_level,onChange:w=>v({...g,rush_level:w.target.value}),className:"w-full px-4 py-2 bg-slate-900/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"None",children:"None"}),r.jsx("option",{value:"Standard",children:"Standard Rush (+25-50%)"}),r.jsx("option",{value:"Extreme",children:"Extreme Rush (+75-150%)"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 pt-7",children:[r.jsx("input",{type:"checkbox",id:"budget_shared",checked:g.budget_shared,onChange:w=>v({...g,budget_shared:w.target.checked}),className:"w-5 h-5 rounded bg-slate-900/50 border-slate-600 text-blue-500 focus:ring-2 focus:ring-blue-500"}),r.jsx("label",{htmlFor:"budget_shared",className:"text-sm font-medium text-slate-200",children:"Budget Shared?"}),g.budget_shared&&r.jsx("input",{type:"text",value:g.budget_range,onChange:w=>v({...g,budget_range:w.target.value}),placeholder:"e.g., $2,000-$5,000",className:"flex-1 px-2 py-1 bg-slate-900/50 border border-slate-600 rounded text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Red Flags"}),r.jsx("textarea",{value:g.red_flags,onChange:w=>v({...g,red_flags:w.target.value}),rows:3,placeholder:"List any red flags or concerns...",className:"w-full px-4 py-2 bg-slate-900/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i===4&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"mb-4 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-300",children:["Enter the ",r.jsx("span",{className:"font-semibold",children:"number of videos requested for deal"}),". Pricing is calculated based on your average views per post (set in Settings)."]})}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-200 mb-2",children:"YT Shorts"}),r.jsx("input",{type:"number",value:N.shortFormYoutube,onChange:w=>x({...N,shortFormYoutube:parseInt(w.target.value)||0}),className:"w-full px-2 sm:px-3 py-2 bg-slate-900/50 border border-slate-600 rounded-lg text-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-200 mb-2",children:"TikToks"}),r.jsx("input",{type:"number",value:N.shortFormTiktok,onChange:w=>x({...N,shortFormTiktok:parseInt(w.target.value)||0}),className:"w-full px-2 sm:px-3 py-2 bg-slate-900/50 border border-slate-600 rounded-lg text-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-200 mb-2",children:"IG Reels"}),r.jsx("input",{type:"number",value:N.shortFormInstagram,onChange:w=>x({...N,shortFormInstagram:parseInt(w.target.value)||0}),className:"w-full px-2 sm:px-3 py-2 bg-slate-900/50 border border-slate-600 rounded-lg text-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-200 mb-2",children:"Long-Form"}),r.jsx("input",{type:"number",value:N.longFormPosts,onChange:w=>x({...N,longFormPosts:parseInt(w.target.value)||0}),className:"w-full px-2 sm:px-3 py-2 bg-slate-900/50 border border-slate-600 rounded-lg text-white text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-200 mb-2",children:"LF Type"}),r.jsxs("select",{value:N.longFormFactor,onChange:w=>x({...N,longFormFactor:w.target.value}),className:"w-full px-2 sm:px-3 py-2 bg-slate-900/50 border border-slate-600 rounded-lg text-white text-xs sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"mention",children:"Mention"}),r.jsx("option",{value:"adSpot",children:"Ad Spot"}),r.jsx("option",{value:"dedicated",children:"Dedicated"})]})]})]}),r.jsxs("button",{onClick:k,className:"w-full sm:w-auto px-5 sm:px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2 touch-manipulation",children:[r.jsx(sn,{className:"w-5 h-5"}),r.jsx("span",{children:"Calculate Quotes"})]}),g.quote_low>0&&r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-4",children:[r.jsxs("div",{className:"p-4 bg-slate-900/50 border border-slate-600 rounded-lg",children:[r.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Low"}),r.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",g.quote_low.toLocaleString()]})]}),r.jsxs("div",{className:"p-4 bg-slate-900/50 border border-blue-500 rounded-lg",children:[r.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Standard"}),r.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",g.quote_standard.toLocaleString()]})]}),r.jsxs("div",{className:"p-4 bg-slate-900/50 border border-slate-600 rounded-lg",children:[r.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Stretch"}),r.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",g.quote_stretch.toLocaleString()]})]})]})]}),i===5&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-slate-900/50 border border-slate-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-white mb-3",children:"Deal Summary"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Brand:"}),r.jsx("span",{className:"text-white ml-2",children:g.brand||"Not set"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Contact:"}),r.jsx("span",{className:"text-white ml-2",children:g.contact_name||"Not set"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Objective:"}),r.jsx("span",{className:"text-white ml-2",children:g.objective||"Not set"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Package:"}),r.jsx("span",{className:"text-white ml-2",children:g.recommended_package||"Not set"})]})]})]}),g.quote_low>0&&r.jsxs("div",{className:"bg-slate-900/50 border border-slate-600 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-white mb-3",children:"Quote Tiers"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Low"}),r.jsxs("div",{className:"text-xl font-bold text-white",children:["$",g.quote_low.toLocaleString()]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Standard"}),r.jsxs("div",{className:"text-xl font-bold text-blue-400",children:["$",g.quote_standard.toLocaleString()]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Stretch"}),r.jsxs("div",{className:"text-xl font-bold text-white",children:["$",g.quote_stretch.toLocaleString()]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Notes"}),r.jsx("textarea",{value:g.notes,onChange:w=>v({...g,notes:w.target.value}),rows:4,placeholder:"Add any additional notes about this deal...",className:"w-full px-4 py-2 bg-slate-900/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),r.jsxs("div",{className:"fixed bottom-0 left-0 right-0 sm:relative sm:bottom-auto bg-slate-900/95 sm:bg-transparent backdrop-blur-sm sm:backdrop-blur-none border-t border-slate-700 sm:border-0 p-4 sm:p-0 flex justify-between gap-3 z-50",children:[r.jsxs("button",{onClick:T,disabled:i===1,className:"px-4 sm:px-6 py-2.5 sm:py-3 bg-slate-700 hover:bg-slate-600 disabled:bg-slate-800 disabled:text-slate-600 text-white font-medium rounded-lg transition-colors flex items-center gap-2 touch-manipulation text-sm sm:text-base",children:[r.jsx(Po,{className:"w-4 h-4 sm:w-5 sm:h-5"}),r.jsx("span",{className:"hidden sm:inline",children:"Previous"}),r.jsx("span",{className:"sm:hidden",children:"Prev"})]}),i<m.length?r.jsxs("button",{onClick:C,className:"px-4 sm:px-6 py-2.5 sm:py-3 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-lg transition-colors flex items-center gap-2 touch-manipulation text-sm sm:text-base",children:[r.jsx("span",{children:"Next"}),r.jsx(Do,{className:"w-4 h-4 sm:w-5 sm:h-5"})]}):r.jsxs("button",{onClick:y,disabled:l,className:"px-4 sm:px-6 py-2.5 sm:py-3 bg-green-500 hover:bg-green-600 disabled:bg-slate-600 text-white font-medium rounded-lg transition-colors flex items-center gap-2 touch-manipulation text-sm sm:text-base",children:[r.jsx(Io,{className:"w-4 h-4 sm:w-5 sm:h-5"}),r.jsx("span",{children:l?"Saving...":"Save Deal"})]})]})]})}function Cx({message:t,type:e,onClose:s,duration:n=3e3}){S.useEffect(()=>{const c=setTimeout(s,n);return()=>clearTimeout(c)},[n,s]);const i={success:Me,error:Xh,info:rx},a={success:"bg-emerald-50 border-emerald-200 text-emerald-900",error:"bg-red-50 border-red-200 text-red-900",info:"bg-blue-50 border-blue-200 text-blue-900"},l={success:"text-emerald-500",error:"text-red-500",info:"text-blue-500"},o=i[e];return r.jsxs("div",{className:`fixed bottom-4 right-4 flex items-center gap-3 px-4 py-3 rounded-lg border shadow-lg backdrop-blur-sm animate-slide-up ${a[e]} z-50 max-w-md`,children:[r.jsx(o,{className:`h-5 w-5 flex-shrink-0 ${l[e]}`}),r.jsx("p",{className:"flex-1 text-sm font-medium",children:t}),r.jsx("button",{onClick:s,className:"flex-shrink-0 hover:opacity-70 transition-opacity",children:r.jsx(_t,{className:"h-4 w-4"})})]})}function tf({toasts:t,onRemove:e}){return r.jsx(r.Fragment,{children:t.map((s,n)=>r.jsx("div",{style:{bottom:`${16+n*72}px`},className:"fixed right-4",children:r.jsx(Cx,{message:s.message,type:s.type,onClose:()=>e(s.id)})},s.id))})}function sf(){const[t,e]=S.useState([]);return{toasts:t,showToast:(i,a="info")=>{const l=Math.random().toString(36).substring(7);e(o=>[...o,{id:l,message:i,type:a}])},removeToast:i=>{e(a=>a.filter(l=>l.id!==i))}}}function Ex({onNewDeal:t,onEditDeal:e}){const{user:s}=pt(),[n,i]=S.useState([]),[a,l]=S.useState(!0),[o,c]=S.useState("all"),{toasts:u,showToast:d,removeToast:f}=sf();S.useEffect(()=>{s&&p()},[s]);const p=async()=>{l(!0);const{data:_,error:E}=await M.from("deals").select("*").eq("user_id",s==null?void 0:s.id).order("created_at",{ascending:!1});!E&&_&&i(_),l(!1)},b=async _=>{if(!confirm("Are you sure you want to delete this deal?"))return;const{error:E}=await M.from("deals").delete().eq("id",_);E?d("Failed to delete deal","error"):(d("Deal deleted successfully","success"),p())},g=async _=>{const{id:E,created_at:$,...L}=_,z={...L,brand:`${_.brand} (Copy)`,stage:"Intake",payment_status:"Not Started",follow_up_count:0,next_followup:null},{error:B}=await M.from("deals").insert([z]);B?d("Failed to duplicate deal","error"):(d("Deal duplicated successfully","success"),p())},v=async _=>{const E=_.follow_up_count+1,$=new Date;$.setDate($.getDate()+3);const{error:L}=await M.from("deals").update({follow_up_count:E,next_followup:$.toISOString().split("T")[0]}).eq("id",_.id);L||(d("Follow-up tracked, reminder set for 3 days","success"),p())},N=async _=>{const{error:E}=await M.from("deals").update({stage:"Closed",next_followup:null,notes:_.notes+`

[${new Date().toLocaleDateString()}] Closed due to no response after ${_.follow_up_count+1} follow-ups.`}).eq("id",_.id);E||(d("Deal closed due to no response","info"),p())},x=async _=>{const E=_.stage==="Quoted"?"Negotiating":"Contracted",{error:$}=await M.from("deals").update({stage:E,follow_up_count:_.follow_up_count+1,next_followup:null}).eq("id",_.id);$||(d(`Deal moved to ${E}`,"success"),p())},m=_=>_.follow_up_count===0?{title:"First Follow-Up",message:"Send a friendly check-in asking if they had a chance to review your proposal.",color:"blue"}:_.follow_up_count===1?{title:"Second Follow-Up",message:"Offer additional value or ask if they need any clarification on your proposal.",color:"yellow"}:{title:"Decision Point",message:"Time to decide: archive this deal or move it forward if you've heard back.",color:"red"},h=async(_,E)=>{const{error:$}=await M.from("deals").update({payment_status:E}).eq("id",_);$||(d(`Payment status updated to ${E}`,"success"),p())},j=async(_,E)=>{const{error:$}=await M.from("deals").update({stage:E}).eq("id",_);$||(d(`Deal stage updated to ${E}`,"success"),p())},k=_=>{const E=`Hi ${_.contact_name||"there"},

Based on expected views from my recent performance, here are three package options for ${_.brand}:

 Low: $${_.quote_low.toLocaleString()}
 Standard: $${_.quote_standard.toLocaleString()}
 Stretch: $${_.quote_stretch.toLocaleString()}

Same deliverables, different rights and production tiers. If you share your budget range, I can recommend the best fit and lock in a timeline.

Looking forward to working together!`;navigator.clipboard.writeText(E),d("Quote email copied to clipboard!","success")},y=o==="all"?n:n.filter(_=>_.stage===o),C=_=>({Intake:"bg-slate-500/20 text-slate-200 border-slate-500/30",Quoted:"bg-sky-500/20 text-sky-200 border-sky-500/30",Negotiating:"bg-amber-500/20 text-amber-200 border-amber-500/30",Contracted:"bg-emerald-500/20 text-emerald-200 border-emerald-500/30","In Production":"bg-orange-500/20 text-orange-200 border-orange-500/30",Delivered:"bg-teal-500/20 text-teal-200 border-teal-500/30",Closed:"bg-gray-500/20 text-gray-300 border-gray-500/30"})[_]||"bg-slate-500/20 text-slate-300 border-slate-500/30",T=_=>({Intake:"bg-slate-500",Quoted:"bg-sky-500",Negotiating:"bg-amber-500",Contracted:"bg-emerald-500","In Production":"bg-orange-500",Delivered:"bg-teal-500",Closed:"bg-gray-500"})[_]||"bg-slate-500",w=_=>({"Not Started":"bg-slate-500/20 text-slate-200 border-slate-500/30","Deposit Paid":"bg-amber-500/20 text-amber-200 border-amber-500/30","Fully Paid":"bg-emerald-500/20 text-emerald-200 border-emerald-500/30",Overdue:"bg-red-500/20 text-red-200 border-red-500/30"})[_]||"bg-slate-500/20 text-slate-300 border-slate-500/30",P=["all","Intake","Quoted","Negotiating","Contracted","In Production","Delivered","Closed"],O=n.filter(_=>_.final_amount>0).reduce((_,E)=>_+E.final_amount,0),D=n.filter(_=>_.payment_status==="Fully Paid").length,F=O>0?Math.round(O/n.filter(_=>_.final_amount>0).length):0,I=n.filter(_=>["Intake","Quoted","Negotiating","Contracted","In Production"].includes(_.stage)).reduce((_,E)=>_+(E.final_amount>0?E.final_amount:E.quote_standard),0);return r.jsxs(r.Fragment,{children:[r.jsx(tf,{toasts:u,onRemove:f}),r.jsxs("div",{className:"max-w-7xl mx-auto animate-fade-in",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-2",children:"Deal Pipeline"}),r.jsx("p",{className:"text-slate-400 text-sm",children:"Track and manage your brand partnerships"})]}),r.jsxs("button",{onClick:t,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold rounded-lg transition-all-smooth shadow-lg shadow-blue-500/25 hover:shadow-blue-500/40 hover:scale-105 flex items-center justify-center gap-2 touch-manipulation focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-slate-900",children:[r.jsx(er,{className:"w-5 h-5"}),r.jsx("span",{children:"New Deal"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-slate-800/80 to-slate-800/40 backdrop-blur-sm border border-slate-700/50 rounded-xl p-5 hover:border-sky-500/30 transition-all-smooth shadow-lg hover:shadow-sky-500/10 group",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"p-2 bg-sky-500/10 rounded-lg group-hover:bg-sky-500/20 transition-colors",children:r.jsx(xi,{className:"w-4 h-4 text-sky-400"})}),r.jsx("span",{className:"text-xs sm:text-sm text-slate-400 font-medium",children:"Pipeline Value"})]}),r.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-white",children:["$",I.toLocaleString()]}),r.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-slate-500",children:[r.jsx(Ie,{className:"w-3 h-3"}),r.jsx("span",{children:"Active deals"})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-slate-800/80 to-slate-800/40 backdrop-blur-sm border border-slate-700/50 rounded-xl p-5 hover:border-emerald-500/30 transition-all-smooth shadow-lg hover:shadow-emerald-500/10 group",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-lg group-hover:bg-emerald-500/20 transition-colors",children:r.jsx(bs,{className:"w-4 h-4 text-emerald-400"})}),r.jsx("span",{className:"text-xs sm:text-sm text-slate-400 font-medium",children:"Total Revenue"})]}),r.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-white",children:["$",O.toLocaleString()]}),r.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-slate-500",children:[r.jsx(Ie,{className:"w-3 h-3"}),r.jsx("span",{children:"Closed deals"})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-slate-800/80 to-slate-800/40 backdrop-blur-sm border border-slate-700/50 rounded-xl p-5 hover:border-amber-500/30 transition-all-smooth shadow-lg hover:shadow-amber-500/10 group",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"p-2 bg-amber-500/10 rounded-lg group-hover:bg-amber-500/20 transition-colors",children:r.jsx(hx,{className:"w-4 h-4 text-amber-400"})}),r.jsx("span",{className:"text-xs sm:text-sm text-slate-400 font-medium",children:"Avg Deal Size"})]}),r.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-white",children:["$",F.toLocaleString()]}),r.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-slate-500",children:[r.jsx(Ie,{className:"w-3 h-3"}),r.jsx("span",{children:"Per partnership"})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-slate-800/80 to-slate-800/40 backdrop-blur-sm border border-slate-700/50 rounded-xl p-5 hover:border-teal-500/30 transition-all-smooth shadow-lg hover:shadow-teal-500/10 group",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"p-2 bg-teal-500/10 rounded-lg group-hover:bg-teal-500/20 transition-colors",children:r.jsx(Me,{className:"w-4 h-4 text-teal-400"})}),r.jsx("span",{className:"text-xs sm:text-sm text-slate-400 font-medium",children:"Paid Deals"})]}),r.jsx("div",{className:"text-xl sm:text-2xl font-bold text-white",children:D}),r.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-slate-500",children:[r.jsx(Ie,{className:"w-3 h-3"}),r.jsx("span",{children:"Fully completed"})]})]})]})]}),r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-thin",children:P.map(_=>{const E=_==="all"?n.length:n.filter(L=>L.stage===_).length,$=o===_;return r.jsxs("button",{onClick:()=>c(_),className:`px-4 py-2.5 rounded-lg font-medium text-sm whitespace-nowrap transition-all-smooth touch-manipulation focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-900 ${$?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/30 scale-105":"bg-slate-800/50 text-slate-300 hover:bg-slate-700/70 hover:text-white border border-slate-700/50 hover:border-slate-600 focus:ring-slate-500"}`,children:[_==="all"?"All Deals":_,r.jsx("span",{className:`ml-2 text-xs px-2 py-0.5 rounded-full ${$?"bg-white/20":"bg-slate-700"}`,children:E})]},_)})})}),a?r.jsx("div",{className:"text-center py-20 animate-fade-in",children:r.jsx("div",{className:"inline-block p-4 bg-slate-800/50 rounded-xl border border-slate-700 shadow-lg",children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"}),r.jsx("p",{className:"text-slate-300 font-medium",children:"Loading deals..."})]})})}):y.length===0?r.jsx("div",{className:"text-center py-20 animate-scale-in",children:r.jsxs("div",{className:"max-w-md mx-auto bg-gradient-to-br from-slate-800/80 to-slate-800/40 backdrop-blur-sm border border-slate-700/50 rounded-2xl p-10 shadow-xl",children:[r.jsx("div",{className:"mb-6 inline-block p-4 bg-blue-500/10 rounded-full",children:r.jsx(er,{className:"w-12 h-12 text-blue-400"})}),r.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:o==="all"?"No deals yet":`No ${o} deals`}),r.jsx("p",{className:"text-slate-400 mb-6",children:o==="all"?"Start tracking your brand partnerships and manage your pipeline":`You don't have any deals in ${o} stage`}),o==="all"?r.jsx("button",{onClick:t,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold rounded-lg transition-all-smooth shadow-lg shadow-blue-500/25 hover:shadow-blue-500/40 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-slate-900",children:"Create Your First Deal"}):r.jsx("button",{onClick:()=>c("all"),className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white font-semibold rounded-lg transition-all-smooth focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 focus:ring-offset-slate-900",children:"View All Deals"})]})}):r.jsx("div",{className:"grid grid-cols-1 gap-6",children:y.map(_=>r.jsxs("div",{className:"bg-gradient-to-br from-slate-800/80 to-slate-800/40 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6 sm:p-8 hover:border-slate-600 hover:shadow-2xl hover:shadow-slate-900/50 transition-all-smooth group animate-scale-in",children:[r.jsxs("div",{className:"flex items-start justify-between mb-6",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white truncate",children:_.brand||"Untitled Deal"}),r.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ${C(_.stage)}`,children:_.stage})]}),_.product&&r.jsx("p",{className:"text-slate-400 text-sm truncate",children:_.product})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-4",children:[r.jsx("button",{onClick:()=>g(_),className:"p-2.5 hover:bg-slate-700 rounded-lg text-slate-400 hover:text-white transition-all-smooth hover:scale-110 touch-manipulation focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 focus:ring-offset-slate-900",title:"Duplicate deal",children:r.jsx(tx,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>e(_.id),className:"p-2.5 hover:bg-blue-500/20 rounded-lg text-slate-400 hover:text-blue-400 transition-all-smooth hover:scale-110 touch-manipulation focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-slate-900",title:"Edit deal",children:r.jsx(Lo,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>b(_.id),className:"p-2.5 hover:bg-red-500/20 rounded-lg text-slate-400 hover:text-red-400 transition-all-smooth hover:scale-110 touch-manipulation focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-slate-900",title:"Delete deal",children:r.jsx(Ao,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"text-xs font-medium text-slate-400 mb-3 flex items-center justify-between",children:[r.jsx("span",{children:"Deal Progress"}),r.jsx("span",{className:"text-slate-500",children:"Click to change stage"})]}),r.jsx("div",{className:"flex items-center gap-1.5",children:["Intake","Quoted","Negotiating","Contracted","In Production","Delivered","Closed"].map((E,$)=>{const L=_.stage===E,B=["Intake","Quoted","Negotiating","Contracted","In Production","Delivered","Closed"].indexOf(_.stage)>$,J=T(E);return r.jsxs("div",{className:"flex items-center flex-1 group/stage relative",children:[r.jsx("button",{onClick:()=>j(_.id,E),className:`h-3 w-full rounded-full transition-all-smooth hover:scale-105 hover:shadow-lg touch-manipulation focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 ${L?`${J} shadow-lg ring-2 ring-white/20`:B?"bg-emerald-500 opacity-60":"bg-slate-700 hover:bg-slate-600"}`,title:`Set stage to ${E}`}),r.jsx("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 px-2 py-1 bg-slate-900 text-white text-xs rounded shadow-lg opacity-0 group-hover/stage:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-10",children:E})]},E)})}),r.jsxs("div",{className:"flex justify-between mt-2",children:[r.jsx("span",{className:"text-xs text-slate-500",children:"Start"}),r.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded ${_.stage==="Closed"?"bg-gray-500/20 text-gray-300":`${T(_.stage)} text-white bg-opacity-20`}`,children:_.stage}),r.jsx("span",{className:"text-xs text-slate-500",children:"Complete"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-medium text-slate-500 mb-2",children:"Payment Status"}),r.jsx("span",{className:`inline-flex items-center px-3 py-1.5 rounded-lg text-xs font-semibold border ${w(_.payment_status)}`,children:_.payment_status})]}),_.recommended_package&&r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-medium text-slate-500 mb-2",children:"Package"}),r.jsx("div",{className:"text-white font-semibold text-sm truncate",children:_.recommended_package})]}),_.objective&&r.jsxs("div",{className:"col-span-2",children:[r.jsx("div",{className:"text-xs font-medium text-slate-500 mb-2",children:"Objective"}),r.jsx("div",{className:"text-white font-semibold text-sm truncate",children:_.objective})]})]}),(_.quote_low>0||_.final_amount>0)&&r.jsx("div",{className:"border-t border-slate-700/50 pt-6 mb-6",children:r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[_.quote_low>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-4 border border-slate-600/30",children:[r.jsx("div",{className:"text-xs font-medium text-slate-400 mb-2",children:"Low Package"}),r.jsxs("div",{className:"text-white font-bold text-lg",children:["$",_.quote_low.toLocaleString()]})]}),r.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-4 border border-sky-500/30",children:[r.jsx("div",{className:"text-xs font-medium text-slate-400 mb-2",children:"Standard Package"}),r.jsxs("div",{className:"text-sky-300 font-bold text-lg",children:["$",_.quote_standard.toLocaleString()]})]}),r.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-4 border border-slate-600/30",children:[r.jsx("div",{className:"text-xs font-medium text-slate-400 mb-2",children:"Stretch Package"}),r.jsxs("div",{className:"text-white font-bold text-lg",children:["$",_.quote_stretch.toLocaleString()]})]})]}),_.final_amount>0&&r.jsxs("div",{className:"bg-emerald-500/10 rounded-lg p-4 border border-emerald-500/30",children:[r.jsx("div",{className:"text-xs font-medium text-emerald-400 mb-2",children:"Final Amount"}),r.jsxs("div",{className:"text-emerald-300 font-bold text-xl",children:["$",_.final_amount.toLocaleString()]})]})]})}),r.jsx("div",{className:"border-t border-slate-700/50 pt-6 mb-6",children:r.jsxs("div",{className:"flex flex-wrap gap-3",children:[_.stage==="Intake"&&_.quote_low===0&&r.jsxs("button",{onClick:()=>e(_.id),className:"px-5 py-2.5 bg-sky-500/20 hover:bg-sky-500/30 border border-sky-500/50 text-sky-200 rounded-lg transition-all-smooth hover:scale-105 hover:shadow-lg hover:shadow-sky-500/20 flex items-center gap-2 text-sm font-semibold touch-manipulation focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 focus:ring-offset-slate-900",children:[r.jsx(sn,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Calculate Quote"}),r.jsx("span",{className:"sm:hidden",children:"Quote"})]}),_.stage==="Quoted"&&_.quote_low>0&&r.jsxs("button",{onClick:()=>k(_),className:"px-5 py-2.5 bg-sky-500/20 hover:bg-sky-500/30 border border-sky-500/50 text-sky-200 rounded-lg transition-all-smooth hover:scale-105 hover:shadow-lg hover:shadow-sky-500/20 flex items-center gap-2 text-sm font-semibold touch-manipulation focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 focus:ring-offset-slate-900",children:[r.jsx(Gt,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Copy Quote Email"}),r.jsx("span",{className:"sm:hidden",children:"Copy"})]}),_.stage==="Contracted"&&_.payment_status==="Not Started"&&r.jsxs("button",{onClick:()=>h(_.id,"Deposit Paid"),className:"px-5 py-2.5 bg-amber-500/20 hover:bg-amber-500/30 border border-amber-500/50 text-amber-200 rounded-lg transition-all-smooth hover:scale-105 hover:shadow-lg hover:shadow-amber-500/20 flex items-center gap-2 text-sm font-semibold touch-manipulation focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 focus:ring-offset-slate-900",children:[r.jsx(Zg,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Mark Deposit Paid"}),r.jsx("span",{className:"sm:hidden",children:"Deposit"})]}),_.stage==="Delivered"&&_.payment_status!=="Fully Paid"&&r.jsxs("button",{onClick:()=>h(_.id,"Fully Paid"),className:"px-5 py-2.5 bg-emerald-500/20 hover:bg-emerald-500/30 border border-emerald-500/50 text-emerald-200 rounded-lg transition-all-smooth hover:scale-105 hover:shadow-lg hover:shadow-emerald-500/20 flex items-center gap-2 text-sm font-semibold touch-manipulation focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 focus:ring-offset-slate-900",children:[r.jsx(Me,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Mark Fully Paid"}),r.jsx("span",{className:"sm:hidden",children:"Paid"})]})]})}),(_.stage==="Quoted"||_.stage==="Negotiating")&&_.next_followup&&r.jsx("div",{className:"border-t border-slate-700 pt-4 mb-4",children:(()=>{const E=m(_),$=new Date().toISOString().split("T")[0],L=_.next_followup<=$,z={blue:"border-blue-500/30 bg-blue-500/5",yellow:"border-yellow-500/30 bg-yellow-500/5",red:"border-red-500/30 bg-red-500/5"};return r.jsx("div",{className:`border rounded-lg p-4 ${z[E.color]}`,children:r.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[r.jsx(Kh,{className:`w-5 h-5 flex-shrink-0 mt-0.5 ${L?"text-red-400":"text-slate-400"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:"font-semibold text-white text-sm",children:E.title}),r.jsxs("span",{className:"text-xs px-2 py-0.5 bg-slate-700 text-slate-300 rounded-full",children:["Follow-up #",_.follow_up_count+1]}),L&&r.jsx("span",{className:"text-xs px-2 py-0.5 bg-red-500/20 text-red-300 rounded-full",children:"Overdue"})]}),r.jsx("p",{className:"text-xs text-slate-400 mb-3",children:E.message}),_.follow_up_count<2?r.jsxs("button",{onClick:()=>v(_),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white text-xs sm:text-sm font-medium rounded-lg transition-colors flex items-center gap-2 touch-manipulation w-full sm:w-auto justify-center",children:[r.jsx(Me,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Mark as Followed Up (Set reminder for 3 days)"}),r.jsx("span",{className:"sm:hidden",children:"Followed Up (3 days)"})]}):r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[r.jsxs("button",{onClick:()=>N(_),className:"px-3 sm:px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs sm:text-sm font-medium rounded-lg transition-colors flex items-center justify-center gap-2 touch-manipulation",children:[r.jsx(Xh,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"No Response - Close Deal"}),r.jsx("span",{className:"sm:hidden",children:"Close Deal"})]}),r.jsxs("button",{onClick:()=>x(_),className:"px-3 sm:px-4 py-2 bg-green-500 hover:bg-green-600 text-white text-xs sm:text-sm font-medium rounded-lg transition-colors flex items-center justify-center gap-2 touch-manipulation",children:[r.jsx(Eo,{className:"w-4 h-4"}),r.jsxs("span",{className:"hidden sm:inline",children:["Move to ",_.stage==="Quoted"?"Negotiating":"Contracted"]}),r.jsx("span",{className:"sm:hidden",children:"Move Forward"})]})]})]})]})})})()}),r.jsxs("div",{className:"flex flex-wrap gap-3 sm:gap-4 text-xs sm:text-sm",children:[_.contact_name&&r.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[r.jsx("span",{children:"Contact:"}),r.jsx("span",{className:"text-white truncate max-w-[150px]",children:_.contact_name})]}),_.next_followup&&r.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[r.jsx(Ue,{className:"w-3 h-3 sm:w-4 sm:h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Follow-up:"}),r.jsx("span",{className:"text-white",children:new Date(_.next_followup).toLocaleDateString()})]}),_.publish_date&&r.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[r.jsx(Ue,{className:"w-3 h-3 sm:w-4 sm:h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Publish:"}),r.jsx("span",{className:"text-white",children:new Date(_.publish_date).toLocaleDateString()})]})]}),_.notes&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700",children:[r.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Notes"}),r.jsx("div",{className:"text-slate-300 text-xs sm:text-sm line-clamp-3",children:_.notes})]})]},_.id))})]})]})}const Tx=()=>{const[t,e]=S.useState(!1),[s,n]=S.useState({brandName:"",deliverables:"",draftDate:"",liveDate:"",usageDuration:"30 Days",usageType:"Organic Only",exclusivity:"None"}),i=()=>`Hi ${s.brandName||"[Name]"},

Thanks for the chat! To keep things clean and ensure we hit your timeline, here is the scope recap based on our discussion:

DELIVERABLES (The Work)
 ${s.deliverables||"[List Deliverables Here]"}

TIMELINE (The Schedule)
 First Draft: ${s.draftDate||"[Date]"}
 Feedback Due: Within 48 hours of receipt
 Target Go-Live: ${s.liveDate||"[Date]"}

LICENSING (The Usage)
 Usage: ${s.usageType}
 Term: ${s.usageDuration}
 Exclusivity: ${s.exclusivity}

Please reply with "Approved" if this matches your understanding, and I'll send over the agreement/invoice so we can lock this in.

(Note: Any requests outside this scopelike extra edits, raw footage, or whitelistingwill be treated as a new line item.)`,a=()=>{navigator.clipboard.writeText(i()),e(!0),setTimeout(()=>e(!1),2e3)};return r.jsxs("div",{className:"card-soft p-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-8 pb-6 border-b border-slate-100",children:[r.jsx("div",{className:"icon-container-sky w-12 h-12 rounded-2xl flex items-center justify-center",children:r.jsx(Me,{className:"w-6 h-6 text-sky-700"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Scope Lock Generator"}),r.jsx("p",{className:"text-sm text-slate-600 mt-1 font-medium",children:"Prevent scope creep before you start"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-900 uppercase mb-2 tracking-wide",children:"Brand Name"}),r.jsx("input",{type:"text",className:"input-soft w-full px-4 py-3 text-slate-900",placeholder:"e.g. Nike",value:s.brandName,onChange:l=>n({...s,brandName:l.target.value})})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-900 uppercase mb-2 tracking-wide",children:"Deliverables"}),r.jsx("input",{type:"text",className:"input-soft w-full px-4 py-3 text-slate-900",placeholder:"e.g. 1x IG Reel, 3x Stories",value:s.deliverables,onChange:l=>n({...s,deliverables:l.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-900 uppercase mb-2 tracking-wide",children:"Usage Rights"}),r.jsxs("select",{className:"input-soft w-full px-4 py-3 text-slate-900",value:s.usageType,onChange:l=>n({...s,usageType:l.target.value}),children:[r.jsx("option",{children:"Organic Posting Only"}),r.jsx("option",{children:"Paid Ads (Whitelisting)"}),r.jsx("option",{children:"Digital Rights (Website + Social)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-900 uppercase mb-2 tracking-wide",children:"Usage Duration"}),r.jsx("input",{type:"text",className:"input-soft w-full px-4 py-3 text-slate-900",placeholder:"e.g. 30 Days",value:s.usageDuration,onChange:l=>n({...s,usageDuration:l.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-900 uppercase mb-2 tracking-wide",children:"Draft Due Date"}),r.jsx("input",{type:"date",className:"input-soft w-full px-4 py-3 text-slate-900",value:s.draftDate,onChange:l=>n({...s,draftDate:l.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-900 uppercase mb-2 tracking-wide",children:"Live Date"}),r.jsx("input",{type:"date",className:"input-soft w-full px-4 py-3 text-slate-900",value:s.liveDate,onChange:l=>n({...s,liveDate:l.target.value})})]})]}),r.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border-2 border-slate-200 relative group",children:[r.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm text-slate-700 leading-relaxed pr-24",children:i()}),r.jsxs("button",{onClick:a,className:"btn-soft absolute top-4 right-4 flex items-center gap-2 bg-sky-600 text-white hover:bg-sky-700 text-sm",children:[t?r.jsx(Me,{className:"w-4 h-4"}):r.jsx(Gt,{className:"w-4 h-4"}),t?"Copied!":"Copy Email"]})]}),r.jsxs("div",{className:"mt-6 flex items-start gap-3 bg-amber-50 border-2 border-amber-200 p-4 rounded-2xl",children:[r.jsx("div",{className:"icon-container-amber w-8 h-8 rounded-xl flex items-center justify-center flex-shrink-0",children:r.jsx(Co,{className:"w-4 h-4 text-amber-700"})}),r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"font-bold text-amber-900 mb-1",children:"Pro Tip"}),r.jsxs("p",{className:"text-amber-800",children:[`"If it's not in the scope, it's a new line item." Send this email`," ",r.jsx("span",{className:"font-semibold",children:"before"})," you sign the contract or film anything."]})]})]})]})},wa=[{title:"Budget Ask",items:[{label:"Soft",text:"Before I recommend a package, can you share the budget range you're working with for this campaign?"},{label:"Direct",text:"What budget have you allocated for creator content on this initiative?"},{label:"Firm",text:"To make sure I'm proposing the right scope, I need your budget range. Once I have it, I'll send 2 to 3 package options."},{label:"DM",text:"Quick one: what budget range are you working with for this?"}]},{title:"Quote Delivery",items:[{label:"Default",text:"Based on expected views from my last 16 long-form videos and last 10 short posts, here are three options: Low, Standard, Stretch. Same deliverables, different rights and production tiers."},{label:"Short",text:"Quoting off expected views, here are Low, Standard, Stretch options. If you tell me the budget range, I'll recommend the best fit."},{label:"If questioned",text:"Totally fair question. This quote is based on expected views from recent performance, plus the rights requested. If you want, I can adjust the package to match a specific budget."}]},{title:"Product-to-Paid Reply",items:[{label:"Version A",text:"Thanks for reaching out. I'm into the product and I can see it resonating with my audience. If you're open to a structured partnership, I'd recommend 1 short plus a 20 to 30 second mention in long-form with organic usage only. Do you have budget to support a paid package like that?"},{label:"Version B",text:"Appreciate you reaching out. If you'd like a guaranteed post, I do that through a paid package with deliverables, timeline, and rights spelled out. If you're only offering product, I can accept it with no posting guarantee, and if it's a great fit we can discuss a paid feature."},{label:"Version C",text:"Thanks for thinking of me. If there's budget behind this, I can propose a package that includes short-form plus a long-form placement. What budget range are you working with?"},{label:"DM",text:"Thanks for reaching out. Is there paid budget behind this, or is it product-only?"}]},{title:"Follow-Ups",items:[{label:"Follow-Up 1 (2-3 days)",text:"Quick follow-up. Did you get a chance to review the package options I sent? If you share your budget range, I'll recommend the best fit and lock a timeline."},{label:"Follow-Up 2 (6-8 days)",text:"Checking back before I close the loop on my side. Are you moving forward on creator partnerships for this campaign? If timing has shifted, no problem. I can hold a slot once I know the budget range and target dates."},{label:"Close Loop (10-14 days)",text:"Last note from me so I don't keep pinging you. Should I close this out for now, or would you like me to revise the package based on your budget range?"}]},{title:"Usage Rights",items:[{label:"Clarify",text:"Happy to include usage. Can you confirm where you want to use the content and for how long? Organic reposting is included, paid usage is priced separately."},{label:"Direct",text:"Paid ads usage changes the licensing, so it's a separate line item. Share the platforms and duration and I'll quote it."},{label:"Boundary",text:"I'm good with paid usage if it's time-bound and clearly defined. I can't grant unlimited paid usage."}]},{title:"Whitelisting",items:[{label:"Simple",text:"If you want to run this through my handle (whitelisting or Spark Ads), that's a separate fee from paid usage. It adds risk and value, so I price it independently."},{label:"Clarify",text:"Are you planning to whitelist through my account? If yes, what duration are you expecting? I'll include the correct term."},{label:"Boundary",text:"I'm open to whitelisting if it's time-bound, with approved copy, and usage begins once payment clears."}]},{title:"Exclusivity",items:[{label:"Clarify",text:"Exclusivity is doable as long as it's time-bound and category-specific. Once you confirm the category and months, I'll include the exclusivity fee."},{label:"Direct",text:"Exclusivity removes other paid opportunities in that category, so it's priced per month. What exact category and duration are you requesting?"},{label:"Boundary",text:`I can't agree to broad exclusivity like "no competitors" without a defined category and compensation.`}]},{title:"Rush and Revisions",items:[{label:"Rush",text:"My standard timeline is 10 days for short-form and 2 weeks for long-form. If you need it faster, I can do it with a rush fee based on how tight the turnaround is."},{label:"Revisions Policy",text:"This package includes 1 round of revisions. A revision round means one consolidated list of changes in one message. Additional rounds are billed."},{label:"Reshoot Boundary",text:"If messaging changes after approval and requires a reshoot, that's treated as new scope and billed separately."}]},{title:"Payment Terms",items:[{label:"Default",text:"My standard terms are 50% to start, 50% on delivery, Net 15. Usage rights begin once payment clears."},{label:"Net 30",text:"Net 30 works if we do 50% upfront and 50% Net 30 from delivery. Usage begins once payment clears."},{label:"Late Payment",text:"If payment is delayed, publishing can be paused and usage is not granted until payment clears."}]},{title:"Polite Decline",items:[{label:"Budget Mismatch",text:"Thanks for the details. Based on the scope and rights requested, I'm not able to do this within that budget. If budget opens up later, I'd be happy to revisit."},{label:"Bad Fit",text:"Appreciate the opportunity. I don't think this is the right fit for my audience right now, so I'm going to pass. If something changes on your end, feel free to reach back out."},{label:"Product-Only",text:"Thanks for offering product. I'm focusing on paid partnerships right now, so I'm going to pass. If you have paid budget in the future, I'd love to talk."}]},{title:"Renewal Prompt",items:[{label:"Simple",text:"Thanks again for the partnership. If you'd like to keep momentum, I can recommend a follow-up package for the next 30 days based on what performed best. Want me to send options?"},{label:"Direct",text:"If you're planning another push this quarter, I'd love to lock in a second flight. Should I propose a Core or Premium package based on your next objective?"}]}];function Px(){const{user:t}=pt(),[e,s]=S.useState(null),[n,i]=S.useState([]),[a,l]=S.useState(new Set),[o,c]=S.useState(""),[u,d]=S.useState(!1),[f,p]=S.useState(!1),[b,g]=S.useState(null),[v,N]=S.useState(!1),[x,m]=S.useState(""),[h,j]=S.useState({}),[k,y]=S.useState(new Set),{toasts:C,showToast:T,removeToast:w}=sf(),[P,O]=S.useState({category:"Budget Ask",label:"",text:""});S.useEffect(()=>{t&&(D(),F())},[t]),S.useEffect(()=>{if(o||u){const R=[...new Set([...wa.map(W=>W.title),...n.map(W=>W.category)])];y(new Set(R))}},[o,u,n]);const D=async()=>{const{data:R,error:W}=await M.from("copy_snippets").select("*").eq("user_id",t==null?void 0:t.id).order("created_at",{ascending:!1});!W&&R&&i(R)},F=async()=>{const{data:R,error:W}=await M.from("default_snippet_favorites").select("snippet_key").eq("user_id",t==null?void 0:t.id);!W&&R&&l(new Set(R.map(H=>H.snippet_key)))},I=async()=>{if(!P.label||!P.text)return;const{error:R}=await M.from("copy_snippets").insert({user_id:t==null?void 0:t.id,category:P.category,label:P.label,text:P.text,is_favorite:!1});R?T("Failed to create snippet","error"):(T("Snippet created successfully!","success"),D(),O({category:"Budget Ask",label:"",text:""}),p(!1))},_=async()=>{if(!b)return;const{error:R}=await M.from("copy_snippets").update({category:b.category,label:b.label,text:b.text,updated_at:new Date().toISOString()}).eq("id",b.id);R?T("Failed to update snippet","error"):(T("Snippet updated successfully!","success"),D(),g(null))},E=async R=>{if(!confirm("Are you sure you want to delete this snippet?"))return;const{error:W}=await M.from("copy_snippets").delete().eq("id",R);W?T("Failed to delete snippet","error"):(T("Snippet deleted successfully!","success"),D())},$=async(R,W)=>{const{error:H}=await M.from("copy_snippets").update({is_favorite:!W}).eq("id",R);H||D()},L=async R=>{if(a.has(R)){const{error:H}=await M.from("default_snippet_favorites").delete().eq("user_id",t==null?void 0:t.id).eq("snippet_key",R);H||F()}else{const{error:H}=await M.from("default_snippet_favorites").insert({user_id:t==null?void 0:t.id,snippet_key:R});H||F()}},z=R=>{const W=new Set(k);W.has(R)?W.delete(R):W.add(R),y(W)},B=R=>{const W=R.match(/\{([^}]+)\}/g);return W?W.map(H=>H.slice(1,-1)):[]},J=(R,W)=>{let H=R;return Object.entries(W).forEach(([Ve,me])=>{H=H.replace(new RegExp(`\\{${Ve}\\}`,"g"),me)}),H},le=(R,W)=>{const H=B(R);if(H.length>0){m(R),j(H.reduce((Ve,me)=>({...Ve,[me]:""}),{})),N(!0);return}navigator.clipboard.writeText(R),T("Copied to clipboard!","success"),s(W),setTimeout(()=>s(null),2e3)},ws=()=>{const R=J(x,h);navigator.clipboard.writeText(R),T("Copied to clipboard with variables!","success"),N(!1),m(""),j({}),s("variable-copy"),setTimeout(()=>s(null),2e3)},Xe=[...new Set([...wa.map(R=>R.title),...n.map(R=>R.category)])],ot=Xe.map(R=>{const W=wa.find(me=>me.title===R),H=((W==null?void 0:W.items)||[]).map(me=>{const ur=`${R}-${me.label}`;return{...me,snippetKey:ur,isFavorite:a.has(ur)}}),Ve=n.filter(me=>me.category===R).map(me=>({label:me.label,text:me.text,isCustom:!0,id:me.id,isFavorite:me.is_favorite}));return{title:R,items:[...H,...Ve]}}).map(R=>({...R,items:R.items.filter(W=>{const H=o===""||W.label.toLowerCase().includes(o.toLowerCase())||W.text.toLowerCase().includes(o.toLowerCase())||R.title.toLowerCase().includes(o.toLowerCase()),Ve=!u||W.isFavorite;return H&&Ve})})).filter(R=>R.items.length>0);return r.jsxs(r.Fragment,{children:[r.jsx(tf,{toasts:C,onRemove:w}),r.jsxs("div",{className:"max-w-6xl mx-auto animate-fade-in",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-slate-900 mb-2",children:"Copy Bank"}),r.jsx("p",{className:"text-slate-600",children:"Click any copy block to copy it to your clipboard"})]}),r.jsxs("button",{onClick:()=>p(!0),className:"btn-soft px-6 py-3 bg-sky-600 hover:bg-sky-700 text-white font-semibold rounded-xl transition-all flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-sky-300",children:[r.jsx(er,{className:"w-5 h-5"}),"Add Custom Copy"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Oo,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Search copy snippets...",value:o,onChange:R=>c(R.target.value),className:"input-soft w-full pl-12 pr-4 py-3 bg-white border border-slate-200 rounded-xl text-slate-900 placeholder-slate-400 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200 transition-all"})]}),r.jsxs("button",{onClick:()=>d(!u),className:`px-5 py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-offset-2 ${u?"bg-amber-100 border border-amber-200 text-amber-700 hover:bg-amber-200 focus:ring-amber-300":"card-soft text-slate-700 hover:bg-slate-50 focus:ring-slate-300"}`,children:[r.jsx(cu,{className:`w-5 h-5 ${u?"fill-amber-600":""}`}),"Favorites"]})]})]}),ot.length===0?r.jsx("div",{className:"text-center py-12 card-soft",children:r.jsx("p",{className:"text-slate-600",children:"No snippets found matching your search."})}):r.jsx("div",{className:"space-y-4",children:ot.map(R=>{const W=k.has(R.title);return r.jsxs("div",{className:"card-soft overflow-hidden",children:[r.jsxs("button",{onClick:()=>z(R.title),className:"w-full flex items-center justify-between p-6 hover:bg-slate-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:R.title}),r.jsx("span",{className:"text-sm font-semibold text-slate-500 bg-slate-100 px-3 py-1 rounded-full",children:R.items.length})]}),r.jsx(Xg,{className:`w-6 h-6 text-slate-400 transition-transform duration-200 ${W?"transform rotate-180":""}`})]}),W&&r.jsx("div",{className:"px-6 pb-6 space-y-3 border-t border-slate-100 pt-4",children:R.items.map(H=>{const Ve=H.id||`${R.title}-${H.label}`,me=e===Ve,ur=B(H.text).length>0;return r.jsx("div",{className:"group relative bg-slate-50 border border-slate-200 hover:border-sky-300 rounded-xl p-4 transition-all cursor-pointer hover:shadow-sm",onClick:()=>le(H.text,Ve),children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"text-sm font-semibold text-sky-700",children:H.label}),H.isCustom&&r.jsx("span",{className:"text-xs px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded-full font-medium",children:"Custom"}),ur&&r.jsx("span",{className:"text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full font-medium",children:"Variables"})]}),r.jsx("div",{className:"text-slate-700 text-sm leading-relaxed",children:H.text})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"p-2 rounded-xl bg-white text-slate-500 hover:text-amber-600 transition-colors",onClick:es=>{es.stopPropagation(),H.isCustom?$(H.id,H.isFavorite||!1):L(H.snippetKey)},children:r.jsx(cu,{className:`w-4 h-4 ${H.isFavorite?"fill-amber-500 text-amber-500":""}`})}),H.isCustom&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"p-2 rounded-xl bg-white text-slate-500 hover:text-sky-600 transition-colors",onClick:es=>{es.stopPropagation();const Ro=n.find(nf=>nf.id===H.id);Ro&&g(Ro)},children:r.jsx(Lo,{className:"w-4 h-4"})}),r.jsx("button",{className:"p-2 rounded-xl bg-white text-slate-500 hover:text-rose-600 transition-colors",onClick:es=>{es.stopPropagation(),E(H.id)},children:r.jsx(Ao,{className:"w-4 h-4"})})]}),r.jsx("button",{className:`flex-shrink-0 p-2 rounded-xl transition-colors ${me?"bg-emerald-100 text-emerald-600":"bg-white text-slate-500 group-hover:bg-sky-100 group-hover:text-sky-600"}`,onClick:es=>{es.stopPropagation(),le(H.text,Ve)},children:me?r.jsx(gi,{className:"w-5 h-5"}):r.jsx(Gt,{className:"w-5 h-5"})})]})]})},Ve)})})]},R.title)})}),r.jsx("div",{className:"mt-8",children:r.jsx(Tx,{})}),f&&r.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"card-soft p-6 max-w-2xl w-full",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Add Custom Copy Snippet"}),r.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-slate-100 rounded-xl text-slate-600 hover:text-slate-900 transition-colors",children:r.jsx(_t,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Category"}),r.jsxs("select",{value:P.category,onChange:R=>O({...P,category:R.target.value}),className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200",children:[Xe.map(R=>r.jsx("option",{value:R,children:R},R)),r.jsx("option",{value:"Custom",children:"Custom (New Category)"})]}),P.category==="Custom"&&r.jsx("input",{type:"text",placeholder:"Enter new category name...",onChange:R=>O({...P,category:R.target.value}),className:"input-soft mt-2 w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 placeholder-slate-400 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Label"}),r.jsx("input",{type:"text",value:P.label,onChange:R=>O({...P,label:R.target.value}),placeholder:"e.g., Friendly Follow-Up",className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 placeholder-slate-400 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["Copy Text",r.jsxs("span",{className:"text-xs text-slate-500 ml-2 font-normal",children:["Use ","{brand_name}",", ","{amount}",", or any ","{custom_variable}"," for dynamic content"]})]}),r.jsx("textarea",{value:P.text,onChange:R=>O({...P,text:R.target.value}),placeholder:"Enter your copy text here...",rows:6,className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 placeholder-slate-400 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:I,disabled:!P.label||!P.text,className:"btn-soft flex-1 px-4 py-2 bg-sky-600 hover:bg-sky-700 disabled:bg-slate-300 disabled:text-slate-500 text-white font-semibold rounded-xl transition-colors",children:"Add Snippet"}),r.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold rounded-xl transition-colors",children:"Cancel"})]})]})]})}),b&&r.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"card-soft p-6 max-w-2xl w-full",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Edit Copy Snippet"}),r.jsx("button",{onClick:()=>g(null),className:"p-2 hover:bg-slate-100 rounded-xl text-slate-600 hover:text-slate-900 transition-colors",children:r.jsx(_t,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Category"}),r.jsx("select",{value:b.category,onChange:R=>g({...b,category:R.target.value}),className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200",children:Xe.map(R=>r.jsx("option",{value:R,children:R},R))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Label"}),r.jsx("input",{type:"text",value:b.label,onChange:R=>g({...b,label:R.target.value}),className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Copy Text"}),r.jsx("textarea",{value:b.text,onChange:R=>g({...b,text:R.target.value}),rows:6,className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:_,className:"btn-soft flex-1 px-4 py-2 bg-sky-600 hover:bg-sky-700 text-white font-semibold rounded-xl transition-colors",children:"Save Changes"}),r.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold rounded-xl transition-colors",children:"Cancel"})]})]})]})}),v&&r.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"card-soft p-6 max-w-xl w-full",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Fill in Variables"}),r.jsx("button",{onClick:()=>N(!1),className:"p-2 hover:bg-slate-100 rounded-xl text-slate-600 hover:text-slate-900 transition-colors",children:r.jsx(_t,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"mb-4 p-4 bg-slate-50 rounded-xl border border-slate-200",children:[r.jsx("div",{className:"text-sm text-slate-600 mb-2 font-medium",children:"Preview:"}),r.jsx("div",{className:"text-slate-900",children:J(x,h)})]}),r.jsx("div",{className:"space-y-4 mb-6",children:Object.keys(h).map(R=>r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:R}),r.jsx("input",{type:"text",value:h[R],onChange:W=>j({...h,[R]:W.target.value}),placeholder:`Enter ${R}...`,className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 placeholder-slate-400 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"})]},R))}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:ws,className:"btn-soft flex-1 px-4 py-2 bg-sky-600 hover:bg-sky-700 text-white font-semibold rounded-xl transition-colors flex items-center justify-center gap-2",children:[r.jsx(Gt,{className:"w-4 h-4"}),"Copy to Clipboard"]}),r.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold rounded-xl transition-colors",children:"Cancel"})]})]})})]})]})}function Dx(){const{user:t}=pt(),[e,s]=S.useState(!1),[n,i]=S.useState(""),[a,l]=S.useState(""),[o,c]=S.useState({cpm_tier:"conservative",cpm_custom:null,youtube_avg_views:0,tiktok_avg_views:0,instagram_avg_views:0,youtube_shorts_avg_views:0,include_youtube_longform:!0,revision_rounds_included:1,extra_revision_fee:150,payment_terms:"50% upfront, 50% on delivery, Net 15"});S.useEffect(()=>{t&&u()},[t]);const u=async()=>{if(!t)return;const{data:f}=await M.from("profiles").select("*").eq("id",t.id).maybeSingle();f&&c(f)},d=async()=>{if(t){s(!0),i(""),l("");try{const{error:f}=await M.from("profiles").update(o).eq("id",t.id);if(f)throw f;l("Settings saved successfully!"),setTimeout(()=>l(""),3e3)}catch(f){i(f.message)}finally{s(!1)}}};return r.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Settings"}),r.jsx("p",{className:"text-slate-600",children:"Configure your pricing defaults and performance averages"})]}),n&&r.jsxs("div",{className:"p-3 bg-rose-50 border border-rose-200 rounded-xl text-rose-700 text-sm flex items-start gap-2",children:[r.jsx(Zn,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:n})]}),a&&r.jsx("div",{className:"p-3 bg-emerald-50 border border-emerald-200 rounded-xl text-emerald-700 text-sm",children:a}),r.jsxs("div",{className:"card-soft p-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2",children:[r.jsx(bs,{className:"w-5 h-5"}),"CPM Tier"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Select Your Tier"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:["conservative","standard","premium","specialized"].map(f=>r.jsxs("button",{onClick:()=>c({...o,cpm_tier:f,cpm_custom:null}),className:`p-4 rounded-xl border-2 text-left transition-all ${o.cpm_tier===f?"border-sky-300 bg-sky-50":"border-slate-200 bg-white hover:border-slate-300"}`,children:[r.jsx("div",{className:"mb-2",children:r.jsx("span",{className:"font-semibold text-slate-900 capitalize",children:f})}),r.jsxs("div",{className:"text-xs text-slate-600",children:[f==="conservative"&&"Default starting tier, safe for newer creators",f==="standard"&&"For established creators with consistent views",f==="premium"&&"For creators with highly engaged audiences",f==="specialized"&&"For niche experts with premium audiences"]})]},f))})]}),r.jsx("div",{className:"pt-4 border-t border-slate-200",children:r.jsxs("button",{onClick:()=>c({...o,cpm_tier:"custom"}),className:`w-full p-4 rounded-xl border-2 text-left transition-all ${o.cpm_tier==="custom"?"border-sky-300 bg-sky-50":"border-slate-200 bg-white hover:border-slate-300"}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-semibold text-slate-900",children:"Custom CPM"}),o.cpm_tier==="custom"&&r.jsx("input",{type:"number",value:o.cpm_custom||"",onChange:f=>c({...o,cpm_custom:parseFloat(f.target.value)||null}),placeholder:"Enter CPM",className:"input-soft w-32 px-3 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200",onClick:f=>f.stopPropagation()})]}),r.jsx("div",{className:"text-xs text-slate-600 mt-2",children:"Set your own CPM rate"})]})})]})]}),r.jsxs("div",{className:"card-soft p-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2",children:[r.jsx(Ie,{className:"w-5 h-5"}),"Performance Averages"]}),r.jsx("p",{className:"text-slate-600 text-sm mb-6",children:"Update these monthly from your last 16 long-form videos and last 10 short posts per platform"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700",children:"YouTube Long-Form Avg Views"}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:o.include_youtube_longform??!0,onChange:f=>c({...o,include_youtube_longform:f.target.checked}),className:"w-4 h-4 text-sky-600 bg-white border-slate-300 rounded focus:ring-sky-500 focus:ring-2"}),r.jsx("span",{className:"text-xs text-slate-600",children:"Include"})]})]}),r.jsx("input",{type:"number",value:o.youtube_avg_views,onChange:f=>c({...o,youtube_avg_views:parseInt(f.target.value)||0}),disabled:!o.include_youtube_longform,className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200 disabled:bg-slate-50 disabled:text-slate-400"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Last 16 videos"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"YouTube Shorts Avg Views"}),r.jsx("input",{type:"number",value:o.youtube_shorts_avg_views,onChange:f=>c({...o,youtube_shorts_avg_views:parseInt(f.target.value)||0}),className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Last 10 shorts"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"TikTok Avg Views"}),r.jsx("input",{type:"number",value:o.tiktok_avg_views,onChange:f=>c({...o,tiktok_avg_views:parseInt(f.target.value)||0}),className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Last 10 posts"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Instagram Reels Avg Views"}),r.jsx("input",{type:"number",value:o.instagram_avg_views,onChange:f=>c({...o,instagram_avg_views:parseInt(f.target.value)||0}),className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Last 10 reels"})]})]})]}),r.jsxs("div",{className:"card-soft p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-6",children:"Default Terms"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Revision Rounds Included"}),r.jsx("input",{type:"number",value:o.revision_rounds_included,onChange:f=>c({...o,revision_rounds_included:parseInt(f.target.value)||1}),min:"1",max:"5",className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Extra Revision Fee"}),r.jsx("input",{type:"number",value:o.extra_revision_fee,onChange:f=>c({...o,extra_revision_fee:parseFloat(f.target.value)||0}),className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Payment Terms"}),r.jsx("input",{type:"text",value:o.payment_terms,onChange:f=>c({...o,payment_terms:f.target.value}),className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"})]})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:d,disabled:e,className:"btn-soft px-6 py-3 bg-sky-600 hover:bg-sky-700 disabled:bg-slate-300 disabled:text-slate-500 text-white font-semibold rounded-xl transition-colors flex items-center gap-2",children:[r.jsx(Io,{className:"w-5 h-5"}),e?"Saving...":"Save Settings"]})})]})}function Ix(){const{user:t}=pt(),[e,s]=S.useState(null),[n,i]=S.useState([]),[a,l]=S.useState(!1),[o,c]=S.useState(""),[u,d]=S.useState(""),[f,p]=S.useState("Awareness"),[b,g]=S.useState({shortFormYoutube:0,shortFormTiktok:0,shortFormInstagram:0,longFormPosts:0,longFormFactor:"mention"}),[v,N]=S.useState({paidUsage:!1,paidUsageDuration:30,whitelisting:!1,whitelistingDuration:30,exclusivity:!1,exclusivityCategory:"",exclusivityMonths:3,rushLevel:"None"}),[x,m]=S.useState(null),[h,j]=S.useState("none"),[k,y]=S.useState(""),[C,T]=S.useState("");S.useEffect(()=>{t&&(w(),P())},[t]);const w=async()=>{if(!t)return;const{data:E}=await M.from("profiles").select("*").eq("id",t.id).maybeSingle();E&&s(E)},P=async()=>{if(!t)return;const{data:E}=await M.from("deals").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});E&&i(E)},O=()=>{if(!e){c("Profile not loaded");return}if(!f){c("Please select an objective");return}const E=ef({profile:e,shortFormPosts:{youtube:b.shortFormYoutube,tiktok:b.shortFormTiktok,instagram:b.shortFormInstagram},longFormPosts:b.longFormPosts,longFormFactor:b.longFormFactor,objective:f,paidUsageDays:v.paidUsage?v.paidUsageDuration:void 0,whitelistingDays:v.whitelisting?v.whitelistingDuration:void 0,exclusivityType:v.exclusivity?v.exclusivityCategory.toLowerCase().includes("tight")?"tight":"loose":void 0,exclusivityMonths:v.exclusivity?v.exclusivityMonths:void 0,rushLevel:v.rushLevel});m({low:E.low,standard:E.standard,stretch:E.stretch}),c(""),d("Quote calculated successfully!"),setTimeout(()=>d(""),3e3)},D=async()=>{if(!t||!x||!C){c("Please provide a brand name");return}l(!0),c("");try{const E={user_id:t.id,brand:C,objective:f,quote_low:x.low,quote_standard:x.standard,quote_stretch:x.stretch,paid_usage:v.paidUsage,paid_usage_duration:v.paidUsageDuration,whitelisting:v.whitelisting,whitelisting_duration:v.whitelistingDuration,exclusivity:v.exclusivity,exclusivity_category:v.exclusivityCategory,exclusivity_months:v.exclusivityMonths,rush_level:v.rushLevel,stage:"Quoted"},{error:$}=await M.from("deals").insert(E);if($)throw $;d("Quote saved to new deal!"),m(null),j("none"),T(""),I(),P()}catch(E){c(E.message)}finally{l(!1)}},F=async()=>{if(!t||!x||!k){c("Please select a deal");return}l(!0),c("");try{const{error:E}=await M.from("deals").update({objective:f,quote_low:x.low,quote_standard:x.standard,quote_stretch:x.stretch,paid_usage:v.paidUsage,paid_usage_duration:v.paidUsageDuration,whitelisting:v.whitelisting,whitelisting_duration:v.whitelistingDuration,exclusivity:v.exclusivity,exclusivity_category:v.exclusivityCategory,exclusivity_months:v.exclusivityMonths,rush_level:v.rushLevel,stage:"Quoted"}).eq("id",k);if(E)throw E;d("Quote assigned to existing deal!"),m(null),j("none"),y(""),I(),P()}catch(E){c(E.message)}finally{l(!1)}},I=()=>{g({shortFormYoutube:0,shortFormTiktok:0,shortFormInstagram:0,longFormPosts:0,longFormFactor:"mention"}),N({paidUsage:!1,paidUsageDuration:30,whitelisting:!1,whitelistingDuration:30,exclusivity:!1,exclusivityCategory:"",exclusivityMonths:3,rushLevel:"None"}),p("Awareness")},_=()=>{j("none"),y(""),T(""),c("")};return r.jsxs("div",{className:"max-w-5xl mx-auto space-y-8",children:[r.jsxs("div",{className:"card-soft p-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"icon-container-sky w-12 h-12 rounded-2xl flex items-center justify-center",children:r.jsx(sn,{className:"w-6 h-6 text-sky-700"})}),r.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Quick Quote Calculator"})]}),r.jsx("p",{className:"text-slate-600 mb-8 font-medium",children:"Calculate pricing without creating a deal. Optionally assign the quote to a new or existing deal."}),o&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border-2 border-red-200 rounded-2xl text-red-800 text-sm flex items-start gap-3 font-medium",children:[r.jsx(_t,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:o})]}),u&&r.jsxs("div",{className:"mb-6 p-4 bg-emerald-50 border-2 border-emerald-200 rounded-2xl text-emerald-800 text-sm flex items-start gap-3 font-medium",children:[r.jsx(gi,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:u})]}),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-900 mb-3",children:"Objective"}),r.jsxs("select",{value:f,onChange:E=>p(E.target.value),className:"input-soft w-full px-4 py-3 text-slate-900",children:[r.jsx("option",{value:"Awareness",children:"Awareness"}),r.jsx("option",{value:"Repurposing",children:"Repurposing"}),r.jsx("option",{value:"Conversion",children:"Conversion"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-4",children:"Deliverables"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-900 mb-2",children:"YT Shorts"}),r.jsx("input",{type:"number",value:b.shortFormYoutube,onChange:E=>g({...b,shortFormYoutube:parseInt(E.target.value)||0}),className:"input-soft w-full px-3 py-3 text-slate-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-900 mb-2",children:"TikToks"}),r.jsx("input",{type:"number",value:b.shortFormTiktok,onChange:E=>g({...b,shortFormTiktok:parseInt(E.target.value)||0}),className:"input-soft w-full px-3 py-3 text-slate-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-900 mb-2",children:"IG Reels"}),r.jsx("input",{type:"number",value:b.shortFormInstagram,onChange:E=>g({...b,shortFormInstagram:parseInt(E.target.value)||0}),className:"input-soft w-full px-3 py-3 text-slate-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-900 mb-2",children:"Long-Form"}),r.jsx("input",{type:"number",value:b.longFormPosts,onChange:E=>g({...b,longFormPosts:parseInt(E.target.value)||0}),className:"input-soft w-full px-3 py-3 text-slate-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-900 mb-2",children:"LF Type"}),r.jsxs("select",{value:b.longFormFactor,onChange:E=>g({...b,longFormFactor:E.target.value}),className:"input-soft w-full px-3 py-3 text-slate-900",children:[r.jsx("option",{value:"mention",children:"Mention"}),r.jsx("option",{value:"adSpot",children:"Ad Spot"}),r.jsx("option",{value:"dedicated",children:"Dedicated"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-4",children:"Add-Ons"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl",children:[r.jsx("input",{type:"checkbox",id:"quick_paid_usage",checked:v.paidUsage,onChange:E=>N({...v,paidUsage:E.target.checked}),className:"w-5 h-5 rounded bg-white border-slate-300 text-sky-600 focus:ring-2 focus:ring-sky-200"}),r.jsx("label",{htmlFor:"quick_paid_usage",className:"text-sm font-semibold text-slate-900",children:"Paid Usage"}),v.paidUsage&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",value:v.paidUsageDuration,onChange:E=>N({...v,paidUsageDuration:parseInt(E.target.value)||0}),placeholder:"30",className:"input-soft w-20 px-2 py-1 text-slate-900 text-sm"}),r.jsx("span",{className:"text-sm text-slate-600 font-medium",children:"days"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl",children:[r.jsx("input",{type:"checkbox",id:"quick_whitelisting",checked:v.whitelisting,onChange:E=>N({...v,whitelisting:E.target.checked}),className:"w-5 h-5 rounded bg-white border-slate-300 text-sky-600 focus:ring-2 focus:ring-sky-200"}),r.jsx("label",{htmlFor:"quick_whitelisting",className:"text-sm font-semibold text-slate-900",children:"Whitelisting"}),v.whitelisting&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",value:v.whitelistingDuration,onChange:E=>N({...v,whitelistingDuration:parseInt(E.target.value)||0}),placeholder:"30",className:"input-soft w-20 px-2 py-1 text-slate-900 text-sm"}),r.jsx("span",{className:"text-sm text-slate-600 font-medium",children:"days"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl",children:[r.jsx("input",{type:"checkbox",id:"quick_exclusivity",checked:v.exclusivity,onChange:E=>N({...v,exclusivity:E.target.checked}),className:"w-5 h-5 rounded bg-white border-slate-300 text-sky-600 focus:ring-2 focus:ring-sky-200"}),r.jsx("label",{htmlFor:"quick_exclusivity",className:"text-sm font-semibold text-slate-900",children:"Exclusivity"}),v.exclusivity&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"text",value:v.exclusivityCategory,onChange:E=>N({...v,exclusivityCategory:E.target.value}),placeholder:"tight/loose",className:"input-soft flex-1 px-2 py-1 text-slate-900 text-sm"}),r.jsx("input",{type:"number",value:v.exclusivityMonths,onChange:E=>N({...v,exclusivityMonths:parseInt(E.target.value)||0}),placeholder:"3",className:"input-soft w-20 px-2 py-1 text-slate-900 text-sm"}),r.jsx("span",{className:"text-sm text-slate-600 font-medium",children:"months"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-900 mb-2",children:"Rush Level"}),r.jsxs("select",{value:v.rushLevel,onChange:E=>N({...v,rushLevel:E.target.value}),className:"input-soft w-full px-4 py-3 text-slate-900",children:[r.jsx("option",{value:"None",children:"None"}),r.jsx("option",{value:"Standard",children:"Standard Rush (+25-50%)"}),r.jsx("option",{value:"Extreme",children:"Extreme Rush (+75-150%)"})]})]})]})]}),r.jsxs("button",{onClick:O,className:"btn-soft w-full bg-sky-600 text-white hover:bg-sky-700 flex items-center justify-center gap-2 text-lg py-4",children:[r.jsx(sn,{className:"w-6 h-6"}),"Calculate Quote"]})]})]}),x&&r.jsxs("div",{className:"card-soft p-8 animate-scale-in",children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Calculated Quote"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[r.jsxs("div",{className:"card-soft card-pastel-lavender p-6",children:[r.jsx("div",{className:"text-sm text-purple-700 mb-2 font-semibold",children:"Low"}),r.jsxs("div",{className:"text-3xl font-bold text-slate-900",children:["$",x.low.toLocaleString()]})]}),r.jsxs("div",{className:"card-soft card-pastel-sky p-6 ring-2 ring-sky-600",children:[r.jsx("div",{className:"text-sm text-sky-700 mb-2 font-semibold",children:"Standard"}),r.jsxs("div",{className:"text-3xl font-bold text-slate-900",children:["$",x.standard.toLocaleString()]})]}),r.jsxs("div",{className:"card-soft card-pastel-emerald p-6",children:[r.jsx("div",{className:"text-sm text-emerald-700 mb-2 font-semibold",children:"Stretch"}),r.jsxs("div",{className:"text-3xl font-bold text-slate-900",children:["$",x.stretch.toLocaleString()]})]})]}),h==="none"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-slate-600 text-sm mb-4 font-medium",children:"This quote isn't saved yet. You can assign it to a deal or calculate a new quote."}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("button",{onClick:()=>j("new"),className:"btn-soft flex-1 bg-sky-600 text-white hover:bg-sky-700 flex items-center justify-center gap-2",children:[r.jsx(er,{className:"w-5 h-5"}),"Create New Deal"]}),r.jsxs("button",{onClick:()=>j("existing"),className:"btn-soft flex-1 bg-slate-100 text-slate-900 hover:bg-slate-200 flex items-center justify-center gap-2",children:[r.jsx(Eo,{className:"w-5 h-5"}),"Assign to Existing"]})]})]}),h==="new"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-900 mb-2",children:"Brand Name"}),r.jsx("input",{type:"text",value:C,onChange:E=>T(E.target.value),placeholder:"Enter brand name",className:"input-soft w-full px-4 py-3 text-slate-900"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:D,disabled:a||!C,className:"btn-soft flex-1 bg-sky-600 text-white hover:bg-sky-700 disabled:bg-slate-300 disabled:text-slate-500",children:a?"Saving...":"Save to New Deal"}),r.jsx("button",{onClick:_,className:"btn-soft bg-slate-100 text-slate-900 hover:bg-slate-200",children:"Cancel"})]})]}),h==="existing"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-900 mb-2",children:"Select Deal"}),r.jsxs("select",{value:k,onChange:E=>y(E.target.value),className:"input-soft w-full px-4 py-3 text-slate-900",children:[r.jsx("option",{value:"",children:"Choose a deal..."}),n.map(E=>r.jsxs("option",{value:E.id,children:[E.brand||"Untitled"," - ",E.stage]},E.id))]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:F,disabled:a||!k,className:"btn-soft flex-1 bg-sky-600 text-white hover:bg-sky-700 disabled:bg-slate-300 disabled:text-slate-500",children:a?"Saving...":"Assign to Deal"}),r.jsx("button",{onClick:_,className:"btn-soft bg-slate-100 text-slate-900 hover:bg-slate-200",children:"Cancel"})]})]})]})]})}function Ox({onSelectTemplate:t,compactMode:e=!1}){const{user:s}=pt(),[n,i]=S.useState([]),[a,l]=S.useState(!0),[o,c]=S.useState(!1),[u,d]=S.useState(null),[f,p]=S.useState(""),[b,g]=S.useState(""),[v,N]=S.useState({name:"",description:"",objective:"Awareness",recommended_package:"",paid_usage:!1,paid_usage_duration:0,whitelisting:!1,whitelisting_duration:0,exclusivity:!1,exclusivity_category:"",exclusivity_months:0,rush_level:"None",short_form_youtube:0,short_form_tiktok:0,short_form_instagram:0,long_form_posts:0,long_form_factor:"mention"});S.useEffect(()=>{s&&x()},[s]);const x=async()=>{l(!0);const{data:y,error:C}=await M.from("deal_templates").select("*").eq("user_id",s==null?void 0:s.id).order("created_at",{ascending:!1});!C&&y&&i(y),l(!1)},m=async()=>{if(!s||!v.name){p("Template name is required");return}p(""),g("");try{if(u){const{error:y}=await M.from("deal_templates").update(v).eq("id",u);if(y)throw y;g("Template updated successfully!")}else{const{error:y}=await M.from("deal_templates").insert({...v,user_id:s.id});if(y)throw y;g("Template created successfully!")}setTimeout(()=>g(""),3e3),x(),k()}catch(y){p(y.message)}},h=y=>{N(y),d(y.id),c(!0),window.scrollTo({top:0,behavior:"smooth"})},j=async y=>{if(!confirm("Are you sure you want to delete this template?"))return;const{error:C}=await M.from("deal_templates").delete().eq("id",y);C||x()},k=()=>{c(!1),d(null),N({name:"",description:"",objective:"Awareness",recommended_package:"",paid_usage:!1,paid_usage_duration:0,whitelisting:!1,whitelisting_duration:0,exclusivity:!1,exclusivity_category:"",exclusivity_months:0,rush_level:"None",short_form_youtube:0,short_form_tiktok:0,short_form_instagram:0,long_form_posts:0,long_form_factor:"mention"}),p("")};return e?r.jsx("div",{className:"space-y-2",children:n.map(y=>r.jsxs("button",{onClick:()=>t==null?void 0:t(y),className:"w-full text-left p-4 card-soft hover:border-sky-300 transition-colors",children:[r.jsx("div",{className:"font-semibold text-slate-900 mb-1",children:y.name}),y.description&&r.jsx("div",{className:"text-sm text-slate-600",children:y.description}),r.jsxs("div",{className:"mt-2 flex gap-2 text-xs",children:[y.recommended_package&&r.jsx("span",{className:"px-2 py-1 bg-sky-100 text-sky-700 rounded-full font-medium",children:y.recommended_package}),y.objective&&r.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 rounded-full font-medium",children:y.objective})]})]},y.id))}):r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Deal Templates"}),r.jsx("p",{className:"text-slate-600",children:"Save time by creating reusable deal configurations"})]}),!o&&r.jsxs("button",{onClick:()=>c(!0),className:"btn-soft bg-sky-600 hover:bg-sky-700 text-white font-semibold rounded-xl transition-colors flex items-center gap-2 px-6 py-3",children:[r.jsx(er,{className:"w-5 h-5"}),"New Template"]})]}),f&&r.jsxs("div",{className:"mb-4 p-3 bg-rose-50 border border-rose-200 rounded-xl text-rose-700 text-sm flex items-start gap-2",children:[r.jsx(Zn,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:f})]}),b&&r.jsx("div",{className:"mb-4 p-3 bg-emerald-50 border border-emerald-200 rounded-xl text-emerald-700 text-sm",children:b}),o&&r.jsxs("div",{className:"mb-8 card-soft p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:u?"Edit Template":"Create Template"}),r.jsx("button",{onClick:k,className:"p-2 hover:bg-slate-100 rounded-xl text-slate-600 hover:text-slate-900 transition-colors",children:r.jsx(_t,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Template Name"}),r.jsx("input",{type:"text",value:v.name,onChange:y=>N({...v,name:y.target.value}),placeholder:"e.g., Express Package, Premium Brand Deal",className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Description"}),r.jsx("input",{type:"text",value:v.description,onChange:y=>N({...v,description:y.target.value}),placeholder:"Optional description",className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Objective"}),r.jsxs("select",{value:v.objective,onChange:y=>N({...v,objective:y.target.value}),className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200",children:[r.jsx("option",{value:"",children:"Select objective"}),r.jsx("option",{value:"Awareness",children:"Awareness"}),r.jsx("option",{value:"Repurposing",children:"Repurposing"}),r.jsx("option",{value:"Conversion",children:"Conversion"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Package"}),r.jsxs("select",{value:v.recommended_package,onChange:y=>N({...v,recommended_package:y.target.value}),className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200",children:[r.jsx("option",{value:"",children:"Select package"}),r.jsx("option",{value:"Starter",children:"Starter"}),r.jsx("option",{value:"Core",children:"Core"}),r.jsx("option",{value:"Premium",children:"Premium"}),r.jsx("option",{value:"Platinum",children:"Platinum"}),r.jsx("option",{value:"Custom",children:"Custom"})]})]})]}),r.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[r.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-4",children:"Default Deliverables"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-slate-600 mb-2 font-medium",children:"YT Shorts"}),r.jsx("input",{type:"number",value:v.short_form_youtube,onChange:y=>N({...v,short_form_youtube:parseInt(y.target.value)||0}),className:"input-soft w-full px-3 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-slate-600 mb-2 font-medium",children:"TikToks"}),r.jsx("input",{type:"number",value:v.short_form_tiktok,onChange:y=>N({...v,short_form_tiktok:parseInt(y.target.value)||0}),className:"input-soft w-full px-3 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-slate-600 mb-2 font-medium",children:"IG Reels"}),r.jsx("input",{type:"number",value:v.short_form_instagram,onChange:y=>N({...v,short_form_instagram:parseInt(y.target.value)||0}),className:"input-soft w-full px-3 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-slate-600 mb-2 font-medium",children:"Long-Form"}),r.jsx("input",{type:"number",value:v.long_form_posts,onChange:y=>N({...v,long_form_posts:parseInt(y.target.value)||0}),className:"input-soft w-full px-3 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm text-slate-600 mb-2 font-medium",children:"LF Type"}),r.jsxs("select",{value:v.long_form_factor,onChange:y=>N({...v,long_form_factor:y.target.value}),className:"input-soft w-full px-3 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200",children:[r.jsx("option",{value:"mention",children:"Mention"}),r.jsx("option",{value:"adSpot",children:"Ad Spot"}),r.jsx("option",{value:"dedicated",children:"Dedicated"})]})]})]})]}),r.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[r.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-4",children:"Add-Ons"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"template_paid_usage",checked:v.paid_usage,onChange:y=>N({...v,paid_usage:y.target.checked}),className:"w-5 h-5 rounded bg-white border-slate-300 text-sky-600 focus:ring-2 focus:ring-sky-200"}),r.jsx("label",{htmlFor:"template_paid_usage",className:"text-sm font-semibold text-slate-700",children:"Paid Usage"}),v.paid_usage&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",value:v.paid_usage_duration,onChange:y=>N({...v,paid_usage_duration:parseInt(y.target.value)||0}),placeholder:"30",className:"w-20 px-2 py-1 bg-white border border-slate-200 rounded-lg text-slate-900 text-sm focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"}),r.jsx("span",{className:"text-sm text-slate-600",children:"days"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"template_whitelisting",checked:v.whitelisting,onChange:y=>N({...v,whitelisting:y.target.checked}),className:"w-5 h-5 rounded bg-white border-slate-300 text-sky-600 focus:ring-2 focus:ring-sky-200"}),r.jsx("label",{htmlFor:"template_whitelisting",className:"text-sm font-semibold text-slate-700",children:"Whitelisting"}),v.whitelisting&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",value:v.whitelisting_duration,onChange:y=>N({...v,whitelisting_duration:parseInt(y.target.value)||0}),placeholder:"30",className:"w-20 px-2 py-1 bg-white border border-slate-200 rounded-lg text-slate-900 text-sm focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"}),r.jsx("span",{className:"text-sm text-slate-600",children:"days"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"template_exclusivity",checked:v.exclusivity,onChange:y=>N({...v,exclusivity:y.target.checked}),className:"w-5 h-5 rounded bg-white border-slate-300 text-sky-600 focus:ring-2 focus:ring-sky-200"}),r.jsx("label",{htmlFor:"template_exclusivity",className:"text-sm font-semibold text-slate-700",children:"Exclusivity"}),v.exclusivity&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"number",value:v.exclusivity_months,onChange:y=>N({...v,exclusivity_months:parseInt(y.target.value)||0}),placeholder:"3",className:"w-20 px-2 py-1 bg-white border border-slate-200 rounded-lg text-slate-900 text-sm focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"}),r.jsx("span",{className:"text-sm text-slate-600",children:"months"})]})]})]}),v.exclusivity&&r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Exclusivity Category"}),r.jsx("input",{type:"text",value:v.exclusivity_category,onChange:y=>N({...v,exclusivity_category:y.target.value}),placeholder:"e.g., 'Tight - no health supplements'",className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200"})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Rush Level"}),r.jsxs("select",{value:v.rush_level,onChange:y=>N({...v,rush_level:y.target.value}),className:"input-soft w-full px-4 py-2 bg-white border border-slate-200 rounded-xl text-slate-900 focus:outline-none focus:border-sky-300 focus:ring-2 focus:ring-sky-200",children:[r.jsx("option",{value:"None",children:"None"}),r.jsx("option",{value:"Standard",children:"Standard Rush (+25-50%)"}),r.jsx("option",{value:"Extreme",children:"Extreme Rush (+75-150%)"})]})]})]})]}),r.jsxs("div",{className:"mt-6 flex gap-3",children:[r.jsxs("button",{onClick:m,className:"btn-soft px-6 py-3 bg-sky-600 hover:bg-sky-700 text-white font-semibold rounded-xl transition-colors flex items-center gap-2",children:[r.jsx(Io,{className:"w-5 h-5"}),"Save Template"]}),r.jsx("button",{onClick:k,className:"px-6 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold rounded-xl transition-colors",children:"Cancel"})]})]}),a?r.jsx("div",{className:"text-center py-12 text-slate-600",children:"Loading templates..."}):n.length===0&&!o?r.jsxs("div",{className:"text-center py-12 card-soft",children:[r.jsx("p",{className:"text-slate-600 mb-4",children:"No templates yet"}),r.jsx("button",{onClick:()=>c(!0),className:"btn-soft px-6 py-3 bg-sky-600 hover:bg-sky-700 text-white font-semibold rounded-xl transition-colors",children:"Create Your First Template"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(y=>r.jsxs("div",{className:"card-soft p-6 hover:shadow-lg transition-all",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:y.name}),y.description&&r.jsx("p",{className:"text-slate-600 text-sm",children:y.description})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>h(y),className:"p-2 hover:bg-slate-100 rounded-xl text-slate-600 hover:text-slate-900 transition-colors",children:r.jsx(Lo,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>j(y.id),className:"p-2 hover:bg-rose-50 rounded-xl text-slate-600 hover:text-rose-600 transition-colors",children:r.jsx(Ao,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.recommended_package&&r.jsx("span",{className:"px-3 py-1 bg-sky-100 text-sky-700 rounded-full text-xs font-semibold",children:y.recommended_package}),y.objective&&r.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-xs font-semibold",children:y.objective})]}),r.jsxs("div",{className:"text-sm text-slate-600",children:[r.jsx("div",{className:"font-semibold text-slate-900 mb-1",children:"Deliverables:"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.short_form_youtube>0&&r.jsxs("span",{children:[y.short_form_youtube," YT Shorts"]}),y.short_form_tiktok>0&&r.jsxs("span",{children:[y.short_form_tiktok," TikToks"]}),y.short_form_instagram>0&&r.jsxs("span",{children:[y.short_form_instagram," IG Reels"]}),y.long_form_posts>0&&r.jsxs("span",{children:[y.long_form_posts," Long-form"]})]})]}),(y.paid_usage||y.whitelisting||y.exclusivity)&&r.jsxs("div",{className:"text-sm text-slate-600",children:[r.jsx("div",{className:"font-semibold text-slate-900 mb-1",children:"Add-ons:"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.paid_usage&&r.jsxs("span",{children:["Paid Usage (",y.paid_usage_duration,"d)"]}),y.whitelisting&&r.jsxs("span",{children:["Whitelisting (",y.whitelisting_duration,"d)"]}),y.exclusivity&&r.jsxs("span",{children:["Exclusivity (",y.exclusivity_months,"m)"]})]})]})]})]},y.id))})]})}function Lx({onSelectIntent:t}){const e=[{id:"brand-contacted",title:"Brand Contacted Me",description:"Quick pricing calculator and response templates",icon:r.jsx(ux,{className:"w-7 h-7"}),color:"text-sky-700",bgColor:"card-pastel-sky",action:()=>t("brand-contacted")},{id:"pitch-brand",title:"I Want to Pitch a Brand",description:"Templates and outreach tools to land deals",icon:r.jsx(fx,{className:"w-7 h-7"}),color:"text-emerald-700",bgColor:"card-pastel-emerald",action:()=>t("pitch-brand")},{id:"explore-rates",title:"Just Exploring Rates",description:"See what you should charge for different deals",icon:r.jsx(sn,{className:"w-7 h-7"}),color:"text-amber-700",bgColor:"card-pastel-amber",action:()=>t("explore-rates")},{id:"track-deals",title:"Track Existing Deals",description:"Manage your pipeline and follow up on deals",icon:r.jsx(Ie,{className:"w-7 h-7"}),color:"text-purple-700",bgColor:"card-pastel-lavender",action:()=>t("track-deals")}];return r.jsx("div",{className:"min-h-screen py-16 px-4 bg-gradient-to-br from-slate-50 to-slate-100",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-16 animate-fade-in",children:[r.jsx("h1",{className:"text-5xl font-bold text-slate-900 mb-4",children:"What would you like to do today?"}),r.jsx("p",{className:"text-xl text-slate-600 font-medium",children:"Choose an action to get started with your brand deals"})]}),r.jsx("div",{className:"grid md:grid-cols-2 gap-6 mb-12",children:e.map((s,n)=>r.jsxs("button",{onClick:s.action,className:`card-soft ${s.bgColor} p-10 text-left transition-all-smooth hover:-translate-y-1 animate-scale-in`,style:{animationDelay:`${n*.1}s`},children:[r.jsx("div",{className:`${s.color==="text-sky-700"?"icon-container-sky":s.color==="text-emerald-700"?"icon-container-emerald":s.color==="text-amber-700"?"icon-container-amber":"icon-container-lavender"} w-14 h-14 rounded-2xl flex items-center justify-center mb-6`,children:r.jsx("div",{className:s.color,children:s.icon})}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-3",children:s.title}),r.jsx("p",{className:"text-slate-700 text-base font-medium",children:s.description})]},s.id))}),r.jsx("div",{className:"text-center",children:r.jsx("div",{className:"card-soft inline-block px-8 py-4",children:r.jsxs("p",{className:"text-slate-600 font-medium",children:["Not sure where to start? Try ",r.jsx("span",{className:"text-sky-700 font-bold",children:'"Brand Contacted Me"'})," for quick pricing help"]})})})]})})}function Ax({onViewDeal:t,onViewPipeline:e}){const[s,n]=S.useState([]),[i,a]=S.useState([]),[l,o]=S.useState({totalPipelineValue:0,dealsThisMonth:0,averageDealSize:0,dealsNeedingAttention:0}),[c,u]=S.useState(!0),[d,f]=S.useState(null);S.useEffect(()=>{p()},[]);const p=async()=>{try{const{data:{user:k}}=await M.auth.getUser();if(!k)return;const[y,C]=await Promise.all([M.from("deals").select(`
            *,
            deal_stages (
              name
            )
          `).eq("user_id",k.id).order("last_activity_at",{ascending:!1}),M.from("deal_activities").select(`
            id,
            activity_type,
            description,
            created_at,
            deal_id
          `).eq("user_id",k.id).order("created_at",{ascending:!1}).limit(10)]);if(y.data&&(n(y.data),b(y.data)),C.data){const T=await Promise.all(C.data.map(async w=>{var O;const P=(O=y.data)==null?void 0:O.find(D=>D.id===w.deal_id);return{...w,brand_name:P==null?void 0:P.brand}}));a(T)}}catch(k){console.error("Error loading dashboard data:",k),f("Failed to load dashboard data. Please try refreshing the page.")}finally{u(!1)}},b=k=>{const y=new Date,C=new Date(y.getFullYear(),y.getMonth(),1),T=k.filter(F=>{var _,E,$;const I=((E=(_=F.deal_stages)==null?void 0:_.name)==null?void 0:E.toLowerCase())||(($=F.stage)==null?void 0:$.toLowerCase())||"";return I!=="won"&&I!=="lost"&&I!=="closed"}),w=T.reduce((F,I)=>F+I.final_amount,0),P=T.filter(F=>new Date(F.created_at)>=C).length,O=T.length>0?w/T.length:0,D=g(k).length;o({totalPipelineValue:w,dealsThisMonth:P,averageDealSize:O,dealsNeedingAttention:D})},g=(k=s)=>{const y=new Date,C=new Date(y);return C.setDate(C.getDate()+1),k.filter(T=>{var P,O,D,F;const w=((O=(P=T.deal_stages)==null?void 0:P.name)==null?void 0:O.toLowerCase())||((D=T.stage)==null?void 0:D.toLowerCase())||"";return!!(w==="negotiating"&&Math.floor((y.getTime()-new Date(T.last_activity_at).getTime())/864e5)>7||(w==="in production"||w==="content creation")&&T.draft_date&&new Date(T.draft_date)<=C||((F=T.payment_status)==null?void 0:F.toLowerCase())==="overdue"&&T.invoice_date&&Math.floor((y.getTime()-new Date(T.invoice_date).getTime())/864e5)>30)}).slice(0,5)},v=()=>{const k=new Date,y=new Date(k.getTime()+14*24*60*60*1e3);return s.filter(C=>{var P,O,D;const T=((O=(P=C.deal_stages)==null?void 0:P.name)==null?void 0:O.toLowerCase())||((D=C.stage)==null?void 0:D.toLowerCase())||"",w=T!=="won"&&T!=="lost"&&T!=="closed";return C.expected_close_date&&new Date(C.expected_close_date)<=y&&new Date(C.expected_close_date)>=k&&w}).sort((C,T)=>new Date(C.expected_close_date).getTime()-new Date(T.expected_close_date).getTime()).slice(0,5)},N=k=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(k),x=k=>{const y=new Date(k),T=Math.floor((new Date().getTime()-y.getTime())/1e3);return T<60?"Just now":T<3600?`${Math.floor(T/60)}m ago`:T<86400?`${Math.floor(T/3600)}h ago`:T<604800?`${Math.floor(T/86400)}d ago`:y.toLocaleDateString()},m=k=>{switch(k){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-amber-100 text-amber-800";case"low":return"bg-green-100 text-green-800";default:return"bg-slate-100 text-slate-800"}};if(c)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-slate-900"})});if(d)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 gap-4",children:[r.jsxs("div",{className:"text-red-500 text-center",children:[r.jsx("p",{className:"text-lg font-semibold mb-2",children:"Error Loading Dashboard"}),r.jsx("p",{className:"text-sm",children:d})]}),r.jsx("button",{onClick:()=>{f(null),u(!0),p()},className:"bg-slate-900 text-white px-6 py-2 rounded-lg hover:bg-slate-800 transition-colors",children:"Retry"})]});const h=g(),j=v();return r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"card-soft card-pastel-sky p-8 animate-scale-in",children:[r.jsx("div",{className:"icon-container-sky w-12 h-12 rounded-2xl flex items-center justify-center mb-4",children:r.jsx(bs,{className:"w-6 h-6 text-sky-700"})}),r.jsx("div",{className:"text-4xl font-bold mb-2 text-slate-900",children:N(l.totalPipelineValue)}),r.jsx("div",{className:"text-sky-700 text-sm font-medium",children:"Total Pipeline Value"})]}),r.jsxs("div",{className:"card-soft card-pastel-emerald p-8 animate-scale-in",style:{animationDelay:"0.1s"},children:[r.jsx("div",{className:"icon-container-emerald w-12 h-12 rounded-2xl flex items-center justify-center mb-4",children:r.jsx(Me,{className:"w-6 h-6 text-emerald-700"})}),r.jsx("div",{className:"text-4xl font-bold mb-2 text-slate-900",children:l.dealsThisMonth}),r.jsx("div",{className:"text-emerald-700 text-sm font-medium",children:"Deals This Month"})]}),r.jsxs("div",{className:"card-soft card-pastel-lavender p-8 animate-scale-in",style:{animationDelay:"0.2s"},children:[r.jsx("div",{className:"icon-container-lavender w-12 h-12 rounded-2xl flex items-center justify-center mb-4",children:r.jsx(Ie,{className:"w-6 h-6 text-purple-700"})}),r.jsx("div",{className:"text-4xl font-bold mb-2 text-slate-900",children:N(l.averageDealSize)}),r.jsx("div",{className:"text-purple-700 text-sm font-medium",children:"Average Deal Size"})]}),r.jsxs("div",{className:"card-soft card-pastel-amber p-8 animate-scale-in",style:{animationDelay:"0.3s"},children:[r.jsx("div",{className:"icon-container-amber w-12 h-12 rounded-2xl flex items-center justify-center mb-4",children:r.jsx(Zn,{className:"w-6 h-6 text-amber-700"})}),r.jsx("div",{className:"text-4xl font-bold mb-2 text-slate-900",children:l.dealsNeedingAttention}),r.jsx("div",{className:"text-amber-700 text-sm font-medium",children:"Need Attention"})]})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"card-soft p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-900 flex items-center gap-3",children:[r.jsx("div",{className:"icon-container-amber w-10 h-10 rounded-xl flex items-center justify-center",children:r.jsx(Zn,{className:"w-5 h-5 text-amber-700"})}),"Deals Needing Attention"]}),r.jsxs("button",{onClick:e,className:"text-slate-600 hover:text-slate-900 text-sm font-semibold flex items-center gap-1 transition-colors",children:["View All",r.jsx(Eo,{className:"w-4 h-4"})]})]}),h.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"icon-container-emerald w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4",children:r.jsx(Me,{className:"w-8 h-8 text-emerald-700"})}),r.jsx("p",{className:"text-slate-600 font-medium",children:"All caught up! No deals need immediate attention."})]}):r.jsx("div",{className:"space-y-3",children:h.map(k=>{const y=Math.floor((new Date().getTime()-new Date(k.last_activity_at).getTime())/864e5);return r.jsxs("button",{onClick:()=>t(k.id),className:"w-full text-left p-5 bg-gradient-to-br from-slate-50 to-slate-100/50 rounded-2xl hover:shadow-md transition-all-smooth",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-slate-900",children:k.brand}),r.jsx("div",{className:"text-sm text-slate-600 mt-1",children:k.requested_deliverables})]}),r.jsx("span",{className:`text-xs px-3 py-1.5 rounded-full font-semibold ${m(k.priority)}`,children:k.priority})]}),r.jsxs("div",{className:"flex items-center justify-between mt-3",children:[r.jsx("span",{className:"text-sm font-bold text-slate-900",children:N(k.final_amount)}),r.jsxs("span",{className:"text-xs text-amber-700 flex items-center gap-1 font-medium",children:[r.jsx(Kh,{className:"w-3.5 h-3.5"}),y,"d since last update"]})]})]},k.id)})})]}),r.jsxs("div",{className:"card-soft p-8",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsxs("h3",{className:"text-xl font-bold text-slate-900 flex items-center gap-3",children:[r.jsx("div",{className:"icon-container-sky w-10 h-10 rounded-xl flex items-center justify-center",children:r.jsx(Ue,{className:"w-5 h-5 text-sky-700"})}),"Upcoming Deadlines"]})}),j.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"icon-container-sky w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4",children:r.jsx(Ue,{className:"w-8 h-8 text-sky-700"})}),r.jsx("p",{className:"text-slate-600 font-medium",children:"No upcoming deadlines in the next 2 weeks"})]}):r.jsx("div",{className:"space-y-3",children:j.map(k=>r.jsxs("button",{onClick:()=>t(k.id),className:"w-full text-left p-5 bg-gradient-to-br from-slate-50 to-slate-100/50 rounded-2xl hover:shadow-md transition-all-smooth",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-slate-900",children:k.brand}),r.jsx("div",{className:"text-sm text-slate-600 mt-1",children:k.requested_deliverables})]}),r.jsx("span",{className:"text-sm font-bold text-slate-900",children:N(k.final_amount)})]}),r.jsxs("div",{className:"text-xs text-sky-700 flex items-center gap-1 mt-3 font-medium",children:[r.jsx(Ue,{className:"w-3.5 h-3.5"}),"Due ",new Date(k.expected_close_date).toLocaleDateString()]})]},k.id))})]})]}),r.jsxs("div",{className:"card-soft p-8",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsxs("h3",{className:"text-xl font-bold text-slate-900 flex items-center gap-3",children:[r.jsx("div",{className:"icon-container-emerald w-10 h-10 rounded-xl flex items-center justify-center",children:r.jsx(ya,{className:"w-5 h-5 text-emerald-700"})}),"Recent Activity"]})}),i.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"icon-container-lavender w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4",children:r.jsx(ya,{className:"w-8 h-8 text-purple-700"})}),r.jsx("p",{className:"text-slate-600 font-medium",children:"No recent activity"})]}):r.jsx("div",{className:"space-y-4",children:i.map(k=>r.jsxs("div",{className:"flex items-start gap-4 pb-4 border-b border-slate-100 last:border-0",children:[r.jsx("div",{className:"icon-container-sky w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0",children:r.jsx(ya,{className:"w-4 h-4 text-sky-700"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("p",{className:"text-slate-900 font-semibold",children:[k.description,k.brand_name&&r.jsxs("span",{className:"text-slate-600 font-normal",children:[" - ",k.brand_name]})]}),r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:x(k.created_at)})]})]},k.id))})]}),r.jsxs("div",{className:"card-soft card-pastel-sky p-10 text-center",children:[r.jsx("div",{className:"icon-container-sky w-16 h-16 rounded-2xl flex items-center justify-center mx-auto mb-4 animate-bounce-gentle",children:r.jsx(Ie,{className:"w-8 h-8 text-sky-700"})}),r.jsx("h3",{className:"text-2xl font-bold mb-3 text-slate-900",children:"Ready to track more deals?"}),r.jsx("p",{className:"text-slate-600 mb-6 font-medium",children:"View your full pipeline and manage all your opportunities"}),r.jsx("button",{onClick:e,className:"btn-soft bg-sky-600 text-white hover:bg-sky-700",children:"View Pipeline"})]})]})}function Rx({onDealClick:t,onCreateDeal:e}){const[s,n]=S.useState([]),[i,a]=S.useState([]),[l,o]=S.useState(!0),[c,u]=S.useState(null),[d,f]=S.useState(null),[p,b]=S.useState(""),[g,v]=S.useState("all"),[N,x]=S.useState(!1),[m,h]=S.useState(!1);S.useEffect(()=>{j()},[]);const j=async()=>{try{const{data:{user:I}}=await M.auth.getUser();if(!I)return;const _=await M.from("deal_stages").select("*").eq("user_id",I.id).order("position");if(_.data&&_.data.length===0){const $=[{user_id:I.id,name:"Lead",position:0,color:"#9CA3AF",is_default:!0},{user_id:I.id,name:"Contacted",position:1,color:"#60A5FA",is_default:!0},{user_id:I.id,name:"Negotiating",position:2,color:"#FBBF24",is_default:!0},{user_id:I.id,name:"Proposal Sent",position:3,color:"#A78BFA",is_default:!0},{user_id:I.id,name:"Won",position:4,color:"#34D399",is_default:!0},{user_id:I.id,name:"Lost",position:5,color:"#F87171",is_default:!0}],{data:L}=await M.from("deal_stages").insert($).select();L&&n(L)}else _.data&&n(_.data);const E=await M.from("deals").select("*").eq("user_id",I.id).order("last_activity_at",{ascending:!1});E.data&&a(E.data)}catch(I){console.error("Error loading kanban data:",I),u("Failed to load pipeline data. Please try refreshing the page.")}finally{o(!1)}},k=I=>{f(I)},y=I=>{I.preventDefault()},C=async I=>{if(d)try{const{data:{user:_}}=await M.auth.getUser();if(!_)return;await M.from("deals").update({stage_id:I}).eq("id",d);const E=s.find($=>$.id===I);await M.from("deal_activities").insert({deal_id:d,user_id:_.id,activity_type:"stage_changed",description:`Moved to ${E==null?void 0:E.name}`,metadata:{stage_name:E==null?void 0:E.name,stage_id:I}}),a(i.map($=>$.id===d?{...$,stage_id:I}:$))}catch(_){console.error("Error updating deal stage:",_)}finally{f(null)}},T=I=>i.filter(_=>{const E=_.stage_id===I,$=p===""||_.brand_name.toLowerCase().includes(p.toLowerCase())||_.deliverable_type.toLowerCase().includes(p.toLowerCase()),L=g==="all"||_.priority===g;return E&&$&&L}),w=I=>{switch(I){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-amber-100 text-amber-800";case"low":return"bg-green-100 text-green-800";default:return"bg-slate-100 text-slate-800"}},P=I=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(I),O=I=>{if(!s.find(L=>L.id===I))return 0;const E=s.filter(L=>!L.name.toLowerCase().includes("lost")),$=E.findIndex(L=>L.id===I);return $===-1?0:Math.round($/(E.length-1)*100)},D=()=>{const I=i.length,_=i.reduce((z,B)=>z+B.rate,0),E=I>0?_/I:0,$=i.filter(z=>z.priority==="high").length,L=i.filter(z=>{if(!z.expected_close_date)return!1;const B=Math.ceil((new Date(z.expected_close_date).getTime()-new Date().getTime())/(1e3*60*60*24));return B>0&&B<=7}).length;return{totalDeals:I,totalValue:_,avgDealSize:E,highPriorityDeals:$,closingSoon:L}};if(l)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-sky-600"})});if(c)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg font-semibold mb-2 text-slate-900",children:"Error Loading Pipeline"}),r.jsx("p",{className:"text-sm text-slate-600",children:c})]}),r.jsx("button",{onClick:()=>{u(null),o(!0),j()},className:"btn-soft bg-sky-600 text-white hover:bg-sky-700",children:"Retry"})]});const F=D();return r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsxs("div",{className:"mb-8 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Deal Pipeline"}),r.jsx("button",{onClick:e,className:"btn-soft bg-sky-600 text-white hover:bg-sky-700",children:"New Deal"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Oo,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Search deals by brand or type...",value:p,onChange:I=>b(I.target.value),className:"input-soft w-full pl-12 pr-4 py-3 text-slate-900"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>h(!m),className:"btn-soft bg-white text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[m?r.jsx(Nl,{className:"w-5 h-5"}):r.jsx(ax,{className:"w-5 h-5"}),m?"Detailed":"Compact"]}),r.jsxs("button",{onClick:()=>x(!N),className:"btn-soft bg-white text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[r.jsx(Yh,{className:"w-5 h-5"}),"Filters"]})]})]}),N&&r.jsx("div",{className:"card-soft p-5",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[r.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"Priority:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:["all","high","medium","low"].map(I=>r.jsx("button",{onClick:()=>v(I),className:`px-4 py-2 rounded-xl text-sm font-semibold transition-all-smooth ${g===I?"bg-sky-600 text-white shadow-sm":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:I.charAt(0).toUpperCase()+I.slice(1)},I))})]})})]}),r.jsx("div",{className:"flex-1 overflow-x-auto",children:r.jsx("div",{className:"flex gap-4 pb-4",style:{minWidth:"max-content"},children:s.map(I=>{const _=T(I.id),E=_.reduce(($,L)=>$+L.rate,0);return r.jsxs("div",{className:"flex-shrink-0 w-80 flex flex-col card-soft",onDragOver:y,onDrop:()=>C(I.id),children:[r.jsxs("div",{className:"p-5 border-b border-slate-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-3",children:[r.jsx("div",{className:"w-4 h-4 rounded-full shadow-sm",style:{backgroundColor:I.color}}),I.name]}),r.jsx("span",{className:"bg-slate-100 text-slate-900 text-sm font-bold px-3 py-1 rounded-full",children:_.length})]}),E>0&&r.jsxs("p",{className:"text-sm text-slate-600 font-medium ml-7",children:[P(E)," total"]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-slate-50",children:[_.map($=>{const L=O($.stage_id);return m?r.jsxs("div",{draggable:!0,onDragStart:()=>k($.id),onClick:()=>t==null?void 0:t($.id),className:"bg-white rounded-2xl p-4 cursor-move hover:shadow-md transition-all-smooth soft-shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"font-bold text-slate-900 text-sm flex-1 truncate",children:$.brand_name}),r.jsx("span",{className:"text-sm font-bold text-slate-900 ml-2",children:P($.rate)})]}),r.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2 mb-2",children:r.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all duration-300",style:{width:`${L}%`}})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs text-slate-600 truncate flex-1 font-medium",children:$.deliverable_type}),r.jsx("span",{className:`text-xs px-2 py-1 rounded-full ml-2 font-semibold ${w($.priority)}`,children:$.priority})]})]},$.id):r.jsxs("div",{draggable:!0,onDragStart:()=>k($.id),onClick:()=>t==null?void 0:t($.id),className:"bg-white rounded-2xl p-5 cursor-move hover:shadow-md transition-all-smooth soft-shadow-sm",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsx("h4",{className:"font-bold text-slate-900 flex-1",children:$.brand_name}),r.jsx("button",{className:"text-slate-400 hover:text-slate-600 transition-colors",children:r.jsx(dx,{className:"w-4 h-4"})})]}),r.jsx("p",{className:"text-sm text-slate-600 mb-3 font-medium",children:$.deliverable_type}),r.jsxs("div",{className:"mb-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Progress"}),r.jsxs("span",{className:"text-xs text-slate-700 font-bold",children:[L,"%"]})]}),r.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2",children:r.jsx("div",{className:"bg-gradient-to-r from-sky-500 to-sky-400 h-2 rounded-full transition-all duration-300",style:{width:`${L}%`}})})]}),r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-1 text-slate-900 font-bold",children:[r.jsx(bs,{className:"w-4 h-4"}),P($.rate)]}),r.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-semibold ${w($.priority)}`,children:$.priority})]}),$.expected_close_date&&r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 font-medium",children:[r.jsx(Ue,{className:"w-3 h-3"}),new Date($.expected_close_date).toLocaleDateString()]})]},$.id)}),_.length===0&&r.jsx("div",{className:"text-center py-12 text-slate-400 text-sm font-medium",children:"No deals in this stage"})]})]},I.id)})})}),r.jsxs("div",{className:"mt-8 lg:hidden",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-4",children:"Pipeline Summary"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"card-soft card-pastel-sky p-5",children:[r.jsx("p",{className:"text-sky-700 text-xs mb-2 font-semibold",children:"Total Deals"}),r.jsx("p",{className:"text-3xl font-bold text-slate-900",children:F.totalDeals})]}),r.jsxs("div",{className:"card-soft card-pastel-emerald p-5",children:[r.jsx("p",{className:"text-emerald-700 text-xs mb-2 font-semibold",children:"Total Value"}),r.jsx("p",{className:"text-3xl font-bold text-slate-900",children:P(F.totalValue)})]}),r.jsxs("div",{className:"card-soft card-pastel-lavender p-5",children:[r.jsx("p",{className:"text-purple-700 text-xs mb-2 font-semibold",children:"Avg Deal Size"}),r.jsx("p",{className:"text-3xl font-bold text-slate-900",children:P(F.avgDealSize)})]}),r.jsxs("div",{className:"card-soft card-pastel-rose p-5",children:[r.jsx("p",{className:"text-rose-700 text-xs mb-2 font-semibold",children:"High Priority"}),r.jsx("p",{className:"text-3xl font-bold text-slate-900",children:F.highPriorityDeals})]}),F.closingSoon>0&&r.jsxs("div",{className:"card-soft card-pastel-amber p-5 col-span-2",children:[r.jsx("p",{className:"text-amber-700 text-xs mb-2 font-semibold",children:"Closing This Week"}),r.jsxs("p",{className:"text-3xl font-bold text-slate-900",children:[F.closingSoon," deal",F.closingSoon!==1?"s":""]})]})]})]})]})}function $x({onDealClick:t,onCreateDeal:e}){const[s,n]=S.useState([]),[i,a]=S.useState([]),[l,o]=S.useState(!0),[c,u]=S.useState(new Date);S.useEffect(()=>{d()},[]);const d=async()=>{try{const{data:{user:m}}=await M.auth.getUser();if(!m)return;const{data:h}=await M.from("deals").select("*").eq("user_id",m.id).order("created_at",{ascending:!1});h&&n(h);const j={Intake:"#3B82F6",Quoted:"#0EA5E9",Negotiating:"#F59E0B",Contracted:"#10B981","In Production":"#F97316",Delivered:"#14B8A6",Closed:"#6B7280"},k=[...new Set((h==null?void 0:h.map(y=>y.stage))||[])];a(k.map(y=>({id:y,name:y,color:j[y]||"#9CA3AF"})))}catch(m){console.error("Error loading timeline data:",m)}finally{o(!1)}},f=m=>{const h=m.getFullYear(),j=m.getMonth(),k=new Date(h,j+1,0),y=[];let C=[];for(let T=1;T<=k.getDate();T++){const w=new Date(h,j,T);C.push(w),(w.getDay()===6||T===k.getDate())&&(y.push([...C]),C=[])}return y},p=m=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(m),b=m=>{const h=i.find(j=>j.name===m);return(h==null?void 0:h.color)||"#9CA3AF"},g=()=>{u(new Date(c.getFullYear(),c.getMonth()-1))},v=()=>{u(new Date(c.getFullYear(),c.getMonth()+1))},N=()=>{u(new Date)};if(l)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-sky-600"})});f(c);const x=c.toLocaleDateString("en-US",{month:"long",year:"numeric"});return r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsxs("div",{className:"mb-8 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Timeline View"}),r.jsx("button",{onClick:e,className:"btn-soft bg-sky-600 text-white hover:bg-sky-700",children:"New Deal"})]}),r.jsxs("div",{className:"flex items-center justify-between card-soft p-5",children:[r.jsx("button",{onClick:g,className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-xl transition-colors",children:r.jsx(Po,{className:"w-6 h-6"})}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:x}),r.jsx("button",{onClick:N,className:"btn-soft text-sm bg-sky-600 text-white hover:bg-sky-700",children:"Today"})]}),r.jsx("button",{onClick:v,className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-xl transition-colors",children:r.jsx(Do,{className:"w-6 h-6"})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:r.jsx("div",{className:"space-y-4",children:s.length===0?r.jsxs("div",{className:"text-center py-16",children:[r.jsx("div",{className:"icon-container-sky w-20 h-20 rounded-3xl flex items-center justify-center mx-auto mb-4",children:r.jsx(Ue,{className:"w-10 h-10 text-sky-700"})}),r.jsx("p",{className:"text-xl font-bold text-slate-900 mb-2",children:"No deals to display"}),r.jsx("p",{className:"text-sm text-slate-600 font-medium",children:"Create your first deal to see it on the timeline"})]}):s.map(m=>{m.publish_date?new Date(m.publish_date):m.next_followup?new Date(m.next_followup):new Date(m.created_at);const h=m.final_amount>0?m.final_amount:m.quote_standard;return r.jsxs("button",{onClick:()=>t==null?void 0:t(m.id),className:"w-full p-6 sm:p-8 card-soft hover:shadow-md transition-all-smooth text-left",style:{borderLeftColor:b(m.stage),borderLeftWidth:"6px",borderLeftStyle:"solid",borderTopLeftRadius:"24px",borderBottomLeftRadius:"24px"},children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:m.brand||"Unknown Brand"}),r.jsx("p",{className:"text-sm text-slate-600 font-medium",children:m.product||"No product specified"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`text-xs px-3 py-1.5 rounded-full font-semibold ${m.payment_status==="Fully Paid"?"bg-emerald-100 text-emerald-800":m.payment_status==="Deposit Paid"?"bg-amber-100 text-amber-800":m.payment_status==="Overdue"?"bg-red-100 text-red-800":"bg-slate-100 text-slate-800"}`,children:m.payment_status}),r.jsxs("div",{className:"flex items-center gap-2 text-slate-900 font-bold text-lg",children:[r.jsx(bs,{className:"w-5 h-5"}),p(h)]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-slate-100 rounded-xl",children:[r.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:b(m.stage)}}),r.jsx("span",{className:"text-slate-900 font-semibold",children:m.stage})]}),m.publish_date&&r.jsxs("div",{className:"flex items-center gap-2 text-slate-600 font-medium",children:[r.jsx(Ue,{className:"w-4 h-4"}),r.jsxs("span",{children:["Publish: ",new Date(m.publish_date).toLocaleDateString()]})]}),m.next_followup&&r.jsxs("div",{className:"flex items-center gap-2 text-slate-600 font-medium",children:[r.jsx(Ie,{className:"w-4 h-4"}),r.jsxs("span",{children:["Follow-up: ",new Date(m.next_followup).toLocaleDateString()]})]})]})]},m.id)})})})]})}function Fx({onDealClick:t,onCreateDeal:e}){const[s,n]=S.useState([]),[i,a]=S.useState([]),[l,o]=S.useState(!0),[c,u]=S.useState("");S.useState("all");const[d,f]=S.useState("all"),[p,b]=S.useState(!1),[g,v]=S.useState("large");S.useEffect(()=>{N()},[]);const N=async()=>{try{const{data:{user:w}}=await M.auth.getUser();if(!w)return;const{data:P}=await M.from("deals").select("*").eq("user_id",w.id).order("created_at",{ascending:!1});P&&n(P);const O=[...new Set((P==null?void 0:P.map(F=>F.stage))||[])],D={Intake:"#3B82F6",Quoted:"#0EA5E9",Negotiating:"#F59E0B",Contracted:"#10B981","In Production":"#F97316",Delivered:"#14B8A6",Closed:"#6B7280"};a(O.map((F,I)=>({id:F,name:F,color:D[F]||"#9CA3AF",position:I})))}catch(w){console.error("Error loading gallery data:",w)}finally{o(!1)}},x=()=>s.filter(w=>{var D,F;const P=c===""||((D=w.brand)==null?void 0:D.toLowerCase().includes(c.toLowerCase()))||((F=w.product)==null?void 0:F.toLowerCase().includes(c.toLowerCase())),O=d==="all"||w.stage===d;return P&&O}),m=w=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(w),h=w=>i.find(P=>P.name===w),j=w=>{const P=["Intake","Quoted","Negotiating","Contracted","In Production","Delivered","Closed"],O=P.indexOf(w);return O===-1?0:Math.round(O/(P.length-1)*100)},k=w=>w?w.split(" ").map(P=>P[0]).join("").toUpperCase().slice(0,2):"??",y=w=>{if(!w)return"from-slate-500 to-slate-600";const P=["from-blue-500 to-blue-600","from-green-500 to-green-600","from-red-500 to-red-600","from-amber-500 to-amber-600","from-cyan-500 to-cyan-600","from-pink-500 to-pink-600","from-teal-500 to-teal-600","from-orange-500 to-orange-600"],O=w.length%P.length;return P[O]};if(l)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-sky-600"})});const C=x(),T=C.reduce((w,P)=>w+(P.final_amount>0?P.final_amount:P.quote_standard),0);return r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsxs("div",{className:"mb-8 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:"Gallery View"}),r.jsxs("p",{className:"text-sm text-slate-600 mt-2 font-medium",children:[C.length," deals  ",m(T)," total value"]})]}),r.jsx("button",{onClick:e,className:"btn-soft bg-sky-600 text-white hover:bg-sky-700",children:"New Deal"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Oo,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Search deals by brand or type...",value:c,onChange:w=>u(w.target.value),className:"input-soft w-full pl-12 pr-4 py-3 text-slate-900"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>v(g==="large"?"small":"large"),className:"btn-soft bg-white text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[g==="large"?r.jsx(Jh,{className:"w-5 h-5"}):r.jsx(sx,{className:"w-5 h-5"}),g==="large"?"Compact":"Large"]}),r.jsxs("button",{onClick:()=>b(!p),className:"btn-soft bg-white text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[r.jsx(Yh,{className:"w-5 h-5"}),"Filters"]})]})]}),p&&r.jsx("div",{className:"card-soft p-5 space-y-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[r.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"Stage:"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-xl text-sm font-semibold transition-all-smooth ${d==="all"?"bg-sky-600 text-white shadow-sm":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"All"}),i.map(w=>r.jsxs("button",{onClick:()=>f(w.id),className:`px-4 py-2 rounded-xl text-sm font-semibold transition-all-smooth flex items-center gap-2 ${d===w.id?"bg-sky-600 text-white shadow-sm":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[r.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:w.color}}),w.name]},w.id))]})]})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto",children:[r.jsx("div",{className:`grid gap-6 ${g==="large"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"}`,children:C.map(w=>{const P=h(w.stage),O=j(w.stage),D=w.final_amount>0?w.final_amount:w.quote_standard;return r.jsxs("button",{onClick:()=>t==null?void 0:t(w.id),className:"card-soft overflow-hidden hover:shadow-lg transition-all-smooth text-left",children:[r.jsx("div",{className:`h-32 bg-gradient-to-br ${y(w.brand||"Unknown")} flex items-center justify-center`,children:r.jsx("div",{className:"text-white font-bold text-4xl",children:k(w.brand||"Unknown")})}),r.jsxs("div",{className:"p-5 space-y-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-slate-900 text-lg mb-1",children:w.brand||"Unknown Brand"}),r.jsx("p",{className:"text-sm text-slate-600 font-medium",children:w.product||"No product specified"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-1 text-slate-900 font-bold text-lg",children:[r.jsx(bs,{className:"w-5 h-5"}),m(D)]}),r.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-semibold ${w.payment_status==="Fully Paid"?"bg-emerald-100 text-emerald-800":w.payment_status==="Deposit Paid"?"bg-amber-100 text-amber-800":w.payment_status==="Overdue"?"bg-red-100 text-red-800":"bg-slate-100 text-slate-800"}`,children:w.payment_status})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:P==null?void 0:P.color}}),r.jsx("span",{className:"text-xs text-slate-700 font-semibold",children:P==null?void 0:P.name})]}),r.jsxs("span",{className:"text-xs text-slate-700 font-bold",children:[O,"%"]})]}),r.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2",children:r.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:`${O}%`,backgroundColor:(P==null?void 0:P.color)||"#0EA5E9"}})})]}),w.next_followup&&r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 pt-2 border-t border-slate-100 font-medium",children:[r.jsx(Ue,{className:"w-3.5 h-3.5"}),"Follow-up: ",new Date(w.next_followup).toLocaleDateString()]})]})]},w.id)})}),C.length===0&&r.jsxs("div",{className:"text-center py-16",children:[r.jsx("div",{className:"icon-container-lavender w-20 h-20 rounded-3xl flex items-center justify-center mx-auto mb-4",children:r.jsx(Ie,{className:"w-10 h-10 text-purple-700"})}),r.jsx("p",{className:"text-xl font-bold text-slate-900 mb-2",children:"No deals found"}),r.jsx("p",{className:"text-sm text-slate-600 font-medium",children:"Try adjusting your filters or create a new deal"})]})]})]})}function Ux({mode:t,onClose:e,onSuccess:s}){S.useState(1);const[n,i]=S.useState({brandName:"",deliverableType:"Instagram Story",followerCount:1e4,platform:"Instagram",urgency:"standard",exclusivity:!1,usageRights:"organic",priority:"medium",expectedCloseDate:""}),[a,l]=S.useState(0),[o,c]=S.useState([]),[u,d]=S.useState([]),[f,p]=S.useState(null),[b,g]=S.useState(null),[v,N]=S.useState(!1),[x,m]=S.useState(!0);S.useEffect(()=>{h()},[]),S.useEffect(()=>{const D=Nx(n.followerCount,n.deliverableType,n.platform,{urgency:n.urgency,exclusivity:n.exclusivity,usageRights:n.usageRights});l(D)},[n]);const h=async()=>{try{const{data:{user:D}}=await M.auth.getUser();if(!D)return;const[F,I]=await Promise.all([M.from("deal_templates").select("*").eq("user_id",D.id).order("created_at",{ascending:!1}).limit(10),M.from("copy_snippets").select("*").eq("user_id",D.id).order("created_at",{ascending:!1}).limit(10)]);F.data&&c(F.data),I.data&&d(I.data)}catch(D){console.error("Error loading templates and snippets:",D),c([]),d([])}finally{m(!1)}},j=(D,F)=>{i({...n,[D]:F})},k=async D=>{await navigator.clipboard.writeText(D.text),g(D.id),setTimeout(()=>g(null),2e3)},y=async()=>{var D;N(!0);try{const{data:{user:F}}=await M.auth.getUser();if(!F)return;const{data:I}=await M.from("deal_stages").select("id").eq("user_id",F.id).order("position").limit(1),_=(D=I==null?void 0:I[0])==null?void 0:D.id,{data:E,error:$}=await M.from("deals").insert({user_id:F.id,brand_name:n.brandName,deliverable_type:n.deliverableType,rate:a,status:"active",stage_id:_,priority:n.priority,expected_close_date:n.expectedCloseDate||null}).select().single();if($)throw $;await M.from("deal_activities").insert({deal_id:E.id,user_id:F.id,activity_type:"created",description:`Created deal with ${n.brandName}`,metadata:{mode:t,calculated_rate:a}}),s==null||s()}catch(F){console.error("Error saving deal:",F)}finally{N(!1)}},C=()=>t==="brand-contacted"?u.filter(D=>D.category==="response"||D.category==="rates"):t==="pitch-brand"?u.filter(D=>D.category==="pitch"||D.category==="intro"):u.slice(0,5),T=()=>o.slice(0,3),w=D=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(D),P=()=>{switch(t){case"brand-contacted":return"Brand Contacted You";case"pitch-brand":return"Pitch a Brand";case"explore-rates":return"Explore Your Rates";default:return"Create Deal"}},O=()=>{switch(t){case"brand-contacted":return"Calculate your rate and respond with confidence";case"pitch-brand":return"Build your pitch and track the opportunity";case"explore-rates":return"See what you should be charging";default:return""}};return x?r.jsx("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"card-soft p-8 animate-scale-in",children:r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-sky-600"}),r.jsx("p",{className:"text-slate-700 font-medium",children:"Loading..."})]})})}):r.jsx("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:r.jsxs("div",{className:"bg-white rounded-3xl soft-shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col animate-scale-in",children:[r.jsxs("div",{className:"card-pastel-sky p-8 flex items-center justify-between border-b border-sky-100",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold mb-2 text-slate-900",children:P()}),r.jsx("p",{className:"text-sky-700 font-medium",children:O()})]}),r.jsx("button",{onClick:e,className:"icon-container-sky w-10 h-10 rounded-xl flex items-center justify-center hover:bg-sky-200 transition-colors",children:r.jsx(_t,{className:"w-5 h-5 text-sky-700"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-8 bg-slate-50",children:r.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"card-soft p-8",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-3",children:[r.jsx("div",{className:"icon-container-lavender w-10 h-10 rounded-xl flex items-center justify-center",children:r.jsx(gx,{className:"w-5 h-5 text-purple-700"})}),"Deal Details"]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-5",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Brand Name"}),r.jsx("input",{type:"text",value:n.brandName,onChange:D=>j("brandName",D.target.value),placeholder:"Enter brand name",className:"input-soft w-full px-4 py-3 text-slate-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Deliverable Type"}),r.jsxs("select",{value:n.deliverableType,onChange:D=>j("deliverableType",D.target.value),className:"input-soft w-full px-4 py-3 text-slate-900",children:[r.jsx("option",{children:"Instagram Story"}),r.jsx("option",{children:"Instagram Post"}),r.jsx("option",{children:"Instagram Reel"}),r.jsx("option",{children:"TikTok Video"}),r.jsx("option",{children:"YouTube Video"}),r.jsx("option",{children:"YouTube Short"}),r.jsx("option",{children:"Blog Post"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Follower Count"}),r.jsx("input",{type:"number",value:n.followerCount,onChange:D=>j("followerCount",parseInt(D.target.value)),className:"input-soft w-full px-4 py-3 text-slate-900"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Platform"}),r.jsxs("select",{value:n.platform,onChange:D=>j("platform",D.target.value),className:"input-soft w-full px-4 py-3 text-slate-900",children:[r.jsx("option",{children:"Instagram"}),r.jsx("option",{children:"TikTok"}),r.jsx("option",{children:"YouTube"}),r.jsx("option",{children:"Twitter"}),r.jsx("option",{children:"Blog"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Priority"}),r.jsxs("select",{value:n.priority,onChange:D=>j("priority",D.target.value),className:"input-soft w-full px-4 py-3 text-slate-900",children:[r.jsx("option",{value:"low",children:"Low"}),r.jsx("option",{value:"medium",children:"Medium"}),r.jsx("option",{value:"high",children:"High"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Expected Close Date"}),r.jsx("input",{type:"date",value:n.expectedCloseDate,onChange:D=>j("expectedCloseDate",D.target.value),className:"input-soft w-full px-4 py-3 text-slate-900"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:"Urgency & Modifiers"}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsxs("select",{value:n.urgency,onChange:D=>j("urgency",D.target.value),className:"input-soft px-4 py-3 text-slate-900",children:[r.jsx("option",{value:"standard",children:"Standard Timeline"}),r.jsx("option",{value:"rush",children:"Rush (+25%)"})]}),r.jsxs("label",{className:"flex items-center gap-2 px-5 py-3 bg-white border-2 border-slate-100 rounded-xl cursor-pointer hover:border-sky-200 transition-colors text-slate-900 font-medium",children:[r.jsx("input",{type:"checkbox",checked:n.exclusivity,onChange:D=>j("exclusivity",D.target.checked),className:"rounded"}),r.jsx("span",{className:"text-sm",children:"Exclusivity (+30%)"})]}),r.jsxs("select",{value:n.usageRights,onChange:D=>j("usageRights",D.target.value),className:"input-soft px-4 py-3 text-slate-900",children:[r.jsx("option",{value:"organic",children:"Organic Only"}),r.jsx("option",{value:"paid",children:"Paid Ads (+50%)"})]})]})]})]})]}),T().length>0&&r.jsxs("div",{className:"card-soft p-8",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-3",children:[r.jsx("div",{className:"icon-container-sky w-10 h-10 rounded-xl flex items-center justify-center",children:r.jsx(Gh,{className:"w-5 h-5 text-sky-700"})}),"Suggested Templates"]}),r.jsx("div",{className:"space-y-3",children:T().map(D=>r.jsxs("button",{onClick:()=>p(D),className:"w-full text-left p-5 bg-gradient-to-br from-slate-50 to-slate-100/50 rounded-2xl hover:shadow-md transition-all-smooth",children:[r.jsx("div",{className:"font-bold text-slate-900",children:D.name}),r.jsx("div",{className:"text-sm text-slate-600 mt-1",children:D.description||D.recommended_package||"Template"})]},D.id))})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"card-soft card-pastel-sky p-8 sticky top-0",children:[r.jsx("div",{className:"icon-container-sky w-12 h-12 rounded-2xl flex items-center justify-center mb-4",children:r.jsx(Ie,{className:"w-6 h-6 text-sky-700"})}),r.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Live Rate"}),r.jsx("div",{className:"text-5xl font-bold mb-4 text-slate-900",children:w(a)}),r.jsx("p",{className:"text-sky-700 text-sm mb-6 font-medium",children:"Based on your audience size and deliverable type"}),t!=="explore-rates"&&r.jsx("button",{onClick:y,disabled:!n.brandName||v,className:"btn-soft w-full bg-sky-600 text-white hover:bg-sky-700 disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Saving...":"Save Deal"})]}),C().length>0&&r.jsxs("div",{className:"card-soft p-8",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-3",children:[r.jsx("div",{className:"icon-container-emerald w-10 h-10 rounded-xl flex items-center justify-center",children:r.jsx(Gt,{className:"w-5 h-5 text-emerald-700"})}),"Quick Copy"]}),r.jsx("div",{className:"space-y-3",children:C().map(D=>r.jsx("button",{onClick:()=>k(D),className:"w-full text-left p-4 bg-gradient-to-br from-slate-50 to-slate-100/50 rounded-2xl hover:shadow-md transition-all-smooth group",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-semibold text-slate-900 text-sm mb-1",children:D.label}),r.jsx("div",{className:"text-xs text-slate-600 line-clamp-2",children:D.text})]}),b===D.id?r.jsx(Me,{className:"w-5 h-5 text-emerald-600 flex-shrink-0 ml-2"}):r.jsx(Gt,{className:"w-5 h-5 text-slate-400 group-hover:text-emerald-600 flex-shrink-0 ml-2"})]})},D.id))})]})]})]})})]})})}const Mx=({isOpen:t,onClose:e,deal:s={}})=>{const[n,i]=S.useState(!1),[a,l]=S.useState(!1),[o,c]=S.useState(null),[u,d]=S.useState("brief"),[f,p]=S.useState(!1),[b,g]=S.useState(!1),[v,N]=S.useState(!1),[x,m]=S.useState(!1),[h,j]=S.useState({objective:"Awareness",deliverables:"",usageType:"Organic",usageDuration:"90 Days",exclusivity:"",publishDate:"",draftDate:"",feedbackDate:"",revisionDate:"",finalApprovalDate:""});S.useEffect(()=>{t&&(s!=null&&s.id)&&k(s.id)},[t,s==null?void 0:s.id]);const k=async O=>{i(!0);try{const{data:D,error:F}=await M.from("deals").select("*").eq("id",O).maybeSingle();D&&(c(D),j({objective:D.objective||"Awareness",deliverables:D.requested_deliverables||"",usageType:D.paid_usage?"Paid Ads (Whitelisting)":"Organic Only",usageDuration:D.paid_usage_duration?`${D.paid_usage_duration} Days`:"90 Days",exclusivity:D.exclusivity_category||"",publishDate:D.publish_date||"",draftDate:D.draft_date||"",feedbackDate:"",revisionDate:"",finalApprovalDate:""}))}catch(D){console.error("Error loading deal:",D)}finally{i(!1)}},y=O=>{if(!O)return;const D=new Date(O),F=(I,_)=>{const E=new Date(I);return E.setDate(E.getDate()-_),E.toISOString().split("T")[0]};j(I=>({...I,publishDate:O,finalApprovalDate:F(D,2),revisionDeliveryDate:F(D,5),feedbackDueDate:F(D,7),draftDeliveryDate:F(D,10)}))},C=()=>{const O=`
CAMPAIGN DETAILS
================

PRIMARY OBJECTIVE: ${h.objective}

DELIVERABLES:
${h.deliverables||"Not specified"}

USAGE RIGHTS:
- Type: ${h.usageType}
- Duration: ${h.usageDuration}

EXCLUSIVITY:
${h.exclusivity||"Not specified"}

TIMELINE:
- Publish Date: ${h.publishDate||"TBD"}
- Final Approval: ${h.finalApprovalDate||"TBD"}
- Revision Delivery: ${h.revisionDeliveryDate||"TBD"}
- Brand Feedback Due: ${h.feedbackDueDate||"TBD"}
- Draft Delivery: ${h.draftDeliveryDate||"TBD"}

SCOPE LOCKED: ${f?"Yes":"No"}
    `.trim();navigator.clipboard.writeText(O),N(!0),setTimeout(()=>N(!1),2e3)},T=()=>{const O={campaign:{objective:h.objective,deliverables:h.deliverables,usageType:h.usageType,usageDuration:h.usageDuration,exclusivity:h.exclusivity,timeline:{publishDate:h.publishDate,finalApprovalDate:h.finalApprovalDate,revisionDeliveryDate:h.revisionDeliveryDate,feedbackDueDate:h.feedbackDueDate,draftDeliveryDate:h.draftDeliveryDate},scopeLocked:f}},D=new Blob([JSON.stringify(O,null,2)],{type:"application/json"}),F=URL.createObjectURL(D),I=document.createElement("a");I.href=F,I.download=`campaign-details-${Date.now()}.json`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(F),g(!1)},w=async()=>{const O={objective:h.objective,deliverables:h.deliverables,usageType:h.usageType,usageDuration:h.usageDuration,exclusivity:h.exclusivity,timeline:{publishDate:h.publishDate,finalApprovalDate:h.finalApprovalDate,revisionDeliveryDate:h.revisionDeliveryDate,feedbackDueDate:h.feedbackDueDate,draftDeliveryDate:h.draftDeliveryDate},scopeLocked:f},D=btoa(JSON.stringify(O)),F=`${window.location.origin}/share?data=${D}`;navigator.clipboard.writeText(F),N(!0),setTimeout(()=>{N(!1),g(!1)},2e3)},P=async()=>{if(o!=null&&o.id){l(!0);try{const O={objective:h.objective,requested_deliverables:h.deliverables,paid_usage:h.usageType!=="Organic Only",exclusivity_category:h.exclusivity,publish_date:h.publishDate||null,draft_date:h.draftDate||null,updated_at:new Date().toISOString()};if(h.usageType!=="Organic Only"){const F=h.usageDuration.match(/\d+/);F&&(O.paid_usage_duration=parseInt(F[0]))}const{error:D}=await M.from("deals").update(O).eq("id",o.id);if(D)throw D;m(!0),setTimeout(()=>m(!1),2e3)}catch(O){console.error("Error saving deal:",O),alert("Failed to save changes. Please try again.")}finally{l(!1)}}};return t?n?r.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm transition-opacity",onClick:e}),r.jsx("div",{className:"fixed inset-y-0 right-0 pl-10 max-w-full flex",children:r.jsx("div",{className:"w-screen max-w-2xl bg-white shadow-xl flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-slate-900"})})})]}):r.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-sm transition-opacity",onClick:e}),r.jsx("div",{className:"fixed inset-y-0 right-0 pl-10 max-w-full flex",children:r.jsxs("div",{className:"w-screen max-w-2xl transform transition-all ease-in-out duration-500 sm:duration-700 bg-white shadow-xl flex flex-col h-full",children:[r.jsxs("div",{className:"px-6 py-6 bg-slate-900 text-white flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold",children:(o==null?void 0:o.brand)||"Campaign Details"}),r.jsx("p",{className:"text-slate-400 text-sm",children:o?"Manage the deal lifecycle":"Loading..."})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>g(!b),className:"p-2 hover:bg-slate-800 rounded-lg text-slate-400 hover:text-white transition-colors",title:"Share & Export",children:r.jsx(px,{size:20})}),b&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),r.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-xl shadow-xl border border-slate-200 overflow-hidden z-20",children:[r.jsx("div",{className:"p-2 bg-slate-50 border-b border-slate-200",children:r.jsx("p",{className:"text-xs font-semibold text-slate-700 px-2 py-1",children:"Share & Export"})}),r.jsxs("div",{className:"p-2 space-y-1",children:[r.jsxs("button",{onClick:C,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-100 transition-colors text-left",children:[r.jsx(Gt,{size:16,className:"text-slate-600"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Copy as Text"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Formatted campaign details"})]}),v&&r.jsx(gi,{size:16,className:"text-emerald-600"})]}),r.jsxs("button",{onClick:T,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-100 transition-colors text-left",children:[r.jsx(ex,{size:16,className:"text-slate-600"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Download JSON"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Machine-readable format"})]})]}),r.jsxs("button",{onClick:w,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-100 transition-colors text-left",children:[r.jsx(ix,{size:16,className:"text-slate-600"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Copy Share Link"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Share with anyone"})]}),v&&r.jsx(gi,{size:16,className:"text-emerald-600"})]})]})]})]})]}),r.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors",children:r.jsx(_t,{size:24})})]})]}),r.jsx("div",{className:"border-b border-slate-200 flex px-6 space-x-8",children:["brief","scope","timeline"].map(O=>r.jsxs("button",{onClick:()=>d(O),className:`py-4 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 capitalize ${u===O?"border-sky-500 text-sky-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[O==="brief"&&r.jsx(xi,{size:16}),O==="scope"&&r.jsx(Sl,{size:16}),O==="timeline"&&r.jsx(Ue,{size:16}),O]},O))}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50",children:[u==="brief"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[r.jsxs("h3",{className:"font-bold text-slate-900 mb-4 flex items-center gap-2",children:[r.jsx(xi,{size:20,className:"text-sky-500"}),"Primary Objective (A-R-C)"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:["Awareness","Repurposing","Conversion"].map(O=>r.jsxs("button",{onClick:()=>j({...h,objective:O}),className:`p-3 rounded-lg border text-left transition-all ${h.objective===O?"border-sky-500 bg-sky-50 ring-1 ring-sky-500":"border-slate-200 hover:border-slate-300"}`,children:[r.jsx("span",{className:"block font-bold text-sm text-slate-900",children:O}),r.jsxs("span",{className:"block text-xs text-slate-500 mt-1",children:[O==="Awareness"&&"Focus on views & CPM.",O==="Repurposing"&&"Focus on quality & rights.",O==="Conversion"&&"Focus on clicks & sales."]})]},O))})]}),r.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Key Message (Talking Points)"}),r.jsx("textarea",{rows:3,className:"w-full p-3 border rounded-lg text-sm focus:ring-2 focus:ring-sky-500 outline-none",placeholder:"What is the ONE thing they want the audience to remember?"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Prohibited Claims"}),r.jsx("input",{type:"text",className:"w-full p-3 border rounded-lg text-sm",placeholder:"What are you NOT allowed to say?"})]})]})]}),u==="scope"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-full ${f?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-500"}`,children:f?r.jsx(lx,{size:20}):r.jsx(xx,{size:20})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-sm text-slate-900",children:"Scope Lock"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Lock this once contract is signed."})]})]}),r.jsx("button",{onClick:()=>p(!f),className:`text-xs font-bold px-4 py-2 rounded-lg transition-colors ${f?"bg-slate-100 text-slate-600 hover:bg-slate-200":"bg-sky-600 text-white hover:bg-sky-700"}`,children:f?"Unlock Scope":"Lock Scope"})]}),r.jsxs("div",{className:`bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-6 ${f?"opacity-75 pointer-events-none":""}`,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"D - Deliverables"}),r.jsx("textarea",{className:"w-full p-3 border rounded-lg text-sm bg-slate-50",rows:3,value:h.deliverables,onChange:O=>j({...h,deliverables:O.target.value}),placeholder:"e.g. 1x IG Reel (30s), 3x Stories..."})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"U - Usage Type"}),r.jsxs("select",{className:"w-full p-3 border rounded-lg text-sm bg-slate-50",value:h.usageType,onChange:O=>j({...h,usageType:O.target.value}),children:[r.jsx("option",{children:"Organic Only"}),r.jsx("option",{children:"Paid Ads (Whitelisting)"}),r.jsx("option",{children:"Full Digital Rights"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Duration"}),r.jsxs("select",{className:"w-full p-3 border rounded-lg text-sm bg-slate-50",value:h.usageDuration,onChange:O=>j({...h,usageDuration:O.target.value}),children:[r.jsx("option",{children:"30 Days"}),r.jsx("option",{children:"90 Days"}),r.jsx("option",{children:"6 Months"}),r.jsx("option",{children:"1 Year"}),r.jsx("option",{children:"Perpetuity ( Charge More)"})]})]})]}),h.usageDuration.includes("Perpetuity")&&r.jsxs("div",{className:"flex gap-2 items-center text-xs text-amber-700 bg-amber-50 p-3 rounded-lg",children:[r.jsx(Co,{size:14}),r.jsx("p",{children:'"Unlimited usage in perpetuity" is a major licensing deal. Price accordingly.'})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"E - Exclusivity"}),r.jsx("input",{type:"text",className:"w-full p-3 border rounded-lg text-sm bg-slate-50",placeholder:"e.g. Skincare category, no Nivea or Olay",value:h.exclusivity,onChange:O=>j({...h,exclusivity:O.target.value})})]})]})]}),u==="timeline"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-sky-50 border border-sky-100 p-4 rounded-xl flex gap-3",children:[r.jsx("div",{className:"bg-sky-100 p-2 rounded-full h-fit text-sky-600",children:r.jsx(Ue,{size:18})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-sky-900 text-sm",children:"Timelines Brands Respect"}),r.jsx("p",{className:"text-xs text-sky-700 mt-1",children:"Select your Publish Date, and we'll calculate the rest to ensure you get paid on time."})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-900 mb-1",children:" Target Publish Date"}),r.jsx("input",{type:"date",className:"w-full p-3 border-2 border-sky-100 rounded-lg text-sm focus:border-sky-500 outline-none",onChange:O=>y(O.target.value)})]}),r.jsx("div",{className:"relative pl-4 border-l-2 border-slate-100 space-y-6",children:[{label:"Final Approval Deadline",date:h.finalApprovalDate,note:"2 days before live"},{label:"Revision Delivery Date",date:h.revisionDeliveryDate,note:"5 days before live"},{label:"Brand Feedback Due",date:h.feedbackDueDate,note:"7 days before live"},{label:"Draft Delivery Date",date:h.draftDeliveryDate,note:"10 days before live"}].map((O,D)=>r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute -left-[21px] top-1 w-3 h-3 rounded-full bg-slate-300 border-2 border-white"}),r.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase",children:O.label}),r.jsxs("div",{className:"flex items-center justify-between mt-1",children:[r.jsx("input",{type:"date",className:"bg-slate-50 border border-slate-200 rounded p-2 text-sm text-slate-700 w-40",value:O.date,readOnly:!0}),r.jsx("span",{className:"text-xs text-slate-400 italic",children:O.note})]})]},D))})]})]})]}),r.jsx("div",{className:"p-6 border-t border-slate-200 bg-white",children:r.jsxs("button",{onClick:P,disabled:a,className:"w-full py-3 bg-slate-900 hover:bg-slate-800 text-white rounded-lg font-medium transition-colors disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[x&&r.jsx(Me,{size:20}),a?"Saving...":x?"Saved!":"Save Changes"]})})]})})]}):null};function zx(){const[t,e]=S.useState(null),[s,n]=S.useState(!1);return S.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("data");if(a)try{const l=atob(a),o=JSON.parse(l);e(o)}catch{n(!0)}else n(!0)},[]),s?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-6",children:r.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl border border-slate-200 p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Co,{className:"w-8 h-8 text-red-600"})}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Invalid Link"}),r.jsx("p",{className:"text-slate-600",children:"This campaign share link is invalid or has expired."})]})}):t?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-8 text-center",children:[r.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl mx-auto mb-4 shadow-lg",children:r.jsx(To,{className:"w-8 h-8 text-white"})}),r.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Shared Campaign Details"}),r.jsx("p",{className:"text-slate-600",children:"View-only campaign brief and timeline"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 bg-sky-50 border-b border-sky-100",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(xi,{className:"w-5 h-5 text-sky-600"}),r.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Campaign Brief"})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Primary Objective"}),r.jsx("div",{className:"inline-flex px-4 py-2 bg-sky-100 text-sky-900 rounded-lg font-medium",children:t.objective})]}),t.deliverables&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Deliverables"}),r.jsx("p",{className:"text-slate-900 bg-slate-50 p-4 rounded-lg whitespace-pre-wrap",children:t.deliverables})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 bg-emerald-50 border-b border-emerald-100",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Sl,{className:"w-5 h-5 text-emerald-600"}),r.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Scope & Usage Rights"})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Usage Type"}),r.jsx("p",{className:"text-slate-900 font-medium",children:t.usageType})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Duration"}),r.jsx("p",{className:"text-slate-900 font-medium",children:t.usageDuration})]})]}),t.exclusivity&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Exclusivity"}),r.jsx("p",{className:"text-slate-900 bg-slate-50 p-4 rounded-lg",children:t.exclusivity})]}),t.scopeLocked&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-emerald-700 bg-emerald-50 p-3 rounded-lg",children:[r.jsx(Sl,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:"Scope is locked and finalized"})]})]})]}),t.timeline&&t.timeline.publishDate&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 bg-amber-50 border-b border-amber-100",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ue,{className:"w-5 h-5 text-amber-600"}),r.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Timeline"})]})}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"relative pl-4 border-l-2 border-slate-200 space-y-6",children:[{label:"Target Publish Date",date:t.timeline.publishDate},{label:"Final Approval Deadline",date:t.timeline.finalApprovalDate},{label:"Revision Delivery Date",date:t.timeline.revisionDeliveryDate},{label:"Brand Feedback Due",date:t.timeline.feedbackDueDate},{label:"Draft Delivery Date",date:t.timeline.draftDeliveryDate}].map((i,a)=>i.date&&r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute -left-[21px] top-1 w-3 h-3 rounded-full bg-sky-500 border-2 border-white"}),r.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase mb-1",children:i.label}),r.jsx("p",{className:"text-slate-900 font-medium",children:new Date(i.date).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"})})]},a))})})]})]}),r.jsx("div",{className:"mt-8 text-center text-sm text-slate-500",children:r.jsx("p",{children:"Shared via Brand Deal OS"})})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-sky-600"})})}function Bx(){const{user:t,signOut:e}=pt(),[s,n]=S.useState("intent-dashboard"),[i,a]=S.useState("kanban"),[l,o]=S.useState(),[c,u]=S.useState(),[d,f]=S.useState(!1),[p,b]=S.useState(!1),[g,v]=S.useState(null),[N,x]=S.useState(!1),[m,h]=S.useState(null),j=()=>{o(void 0),u(void 0),n("new-deal"),f(!1)},k=I=>{o(void 0),u(I),n("new-deal"),f(!1)},y=I=>{h({id:I}),x(!0),f(!1)},C=()=>{x(!1),h(null)},T=()=>{n("kanban"),f(!1)},w=I=>{n(I),f(!1)},P=I=>{I==="track-deals"?n("kanban"):I==="explore-rates"?(v("explore-rates"),b(!0)):(v(I),b(!0))},O=()=>{b(!1),v(null)},D=()=>{b(!1),v(null),n("kanban")},F=[{id:"intent-dashboard",label:"Home",icon:nx},{id:"dashboard",label:"Dashboard",icon:Ie},{id:"kanban",label:"Pipeline",icon:Nl},{id:"quick-quote",label:"Quick Quote",icon:sn},{id:"templates",label:"Templates",icon:Gh},{id:"copy-bank",label:"Copy Bank",icon:Gt},{id:"settings",label:"Settings",icon:mx}];return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[r.jsx("nav",{className:"bg-white/80 backdrop-blur-md border-b border-slate-200 sticky top-0 z-50 soft-shadow-sm",children:r.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex items-center justify-between h-16",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>f(!d),className:"lg:hidden p-2 hover:bg-slate-100 rounded-xl text-slate-600 hover:text-slate-900 transition-colors","aria-label":"Toggle menu",children:d?r.jsx(_t,{className:"w-6 h-6"}):r.jsx(cx,{className:"w-6 h-6"})}),r.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl soft-shadow-md",children:r.jsx(To,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Brand Deal OS"}),r.jsx("p",{className:"text-xs text-slate-600 hidden sm:block font-medium",children:"Creator Edition"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm text-slate-600 hidden md:block truncate max-w-[150px] lg:max-w-none font-medium",children:t==null?void 0:t.email}),r.jsx("button",{onClick:()=>e(),className:"p-2 hover:bg-slate-100 rounded-xl text-slate-600 hover:text-slate-900 transition-colors",title:"Sign out",children:r.jsx(ox,{className:"w-5 h-5"})})]})]})})}),r.jsxs("div",{className:"flex relative",children:[d&&r.jsx("div",{className:"lg:hidden fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-40 top-16",onClick:()=>f(!1)}),r.jsx("aside",{className:`
          fixed lg:static inset-y-0 left-0 z-40 top-16
          w-64 bg-white/95 lg:bg-white/60 backdrop-blur-md border-r border-slate-200
          min-h-[calc(100vh-4rem)] p-4
          transform transition-transform duration-200 ease-in-out
          ${d?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        `,children:r.jsx("div",{className:"space-y-2",children:F.map(I=>{const _=I.icon,E=s===I.id||(s==="new-deal"||s==="edit-deal")&&I.id==="tracker";return r.jsxs("button",{onClick:()=>w(I.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all-smooth font-semibold ${E?"bg-sky-600 text-white shadow-sm":"text-slate-700 hover:bg-slate-100"}`,children:[r.jsx(_,{className:"w-5 h-5"}),r.jsx("span",{children:I.label})]},I.id)})})}),r.jsxs("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 min-w-0",children:[s==="intent-dashboard"&&r.jsx(Lx,{onSelectIntent:P}),s==="dashboard"&&r.jsx(Ax,{onViewDeal:y,onViewPipeline:()=>w("kanban")}),s==="kanban"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-end gap-2 card-soft p-2",children:[r.jsxs("button",{onClick:()=>a("kanban"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all-smooth font-semibold ${i==="kanban"?"bg-sky-600 text-white shadow-sm":"text-slate-700 hover:bg-slate-100"}`,children:[r.jsx(Nl,{className:"w-4 h-4"}),"Board"]}),r.jsxs("button",{onClick:()=>a("timeline"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all-smooth font-semibold ${i==="timeline"?"bg-sky-600 text-white shadow-sm":"text-slate-700 hover:bg-slate-100"}`,children:[r.jsx(Ue,{className:"w-4 h-4"}),"Timeline"]}),r.jsxs("button",{onClick:()=>a("gallery"),className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all-smooth font-semibold ${i==="gallery"?"bg-sky-600 text-white shadow-sm":"text-slate-700 hover:bg-slate-100"}`,children:[r.jsx(Jh,{className:"w-4 h-4"}),"Gallery"]})]}),i==="kanban"&&r.jsx(Rx,{onDealClick:y,onCreateDeal:j}),i==="timeline"&&r.jsx($x,{onDealClick:y,onCreateDeal:j}),i==="gallery"&&r.jsx(Fx,{onDealClick:y,onCreateDeal:j})]}),s==="quick-quote"&&r.jsx(Ix,{}),s==="new-deal"&&r.jsx(uu,{template:c,onSave:T}),s==="edit-deal"&&r.jsx(uu,{dealId:l,onSave:T}),s==="tracker"&&r.jsx(Ex,{onNewDeal:j,onEditDeal:y}),s==="templates"&&r.jsx(Ox,{onSelectTemplate:k}),s==="copy-bank"&&r.jsx(Px,{}),s==="settings"&&r.jsx(Dx,{}),p&&g&&r.jsx(Ux,{mode:g,onClose:O,onSuccess:D})]})]}),r.jsx(Mx,{isOpen:N,onClose:C,deal:m})]})}function qx(){return r.jsx(Gg,{children:r.jsx(Vx,{})})}function Vx(){const{user:t,loading:e}=pt(),[s,n]=S.useState(null),[i,a]=S.useState(!0),l=window.location.pathname==="/share"||window.location.search.includes("data=");S.useEffect(()=>{t?o():a(!1)},[t]);const o=async()=>{if(!t)return;const{data:c}=await M.from("profiles").select("*").eq("id",t.id).maybeSingle();c&&n(c),a(!1)};return l?r.jsx(zx,{}):e||i?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:r.jsx("div",{className:"text-white",children:"Loading..."})}):t?s&&!s.onboarding_completed?r.jsx(Sx,{onComplete:o}):r.jsx(Bx,{}):r.jsx(vx,{})}_h(document.getElementById("root")).render(r.jsx(S.StrictMode,{children:r.jsx(qx,{})}));
